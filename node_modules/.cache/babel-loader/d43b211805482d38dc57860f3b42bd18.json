{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _classCallCheck from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import UserHead from'../../components/User/UserHead';import{InputWithLabel,AuthButton,AuthContent,AuthError}from'../../components/Auth';import{connect}from'react-redux';import{bindActionCreators}from'redux';import*as userPageActions from'../../redux/modules/userPage';import storage from'../../lib/storage';var UserHeadContainer=/*#__PURE__*/function(_Component){_inherits(UserHeadContainer,_Component);function UserHeadContainer(){var _getPrototypeOf2;var _this;_classCallCheck(this,UserHeadContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(UserHeadContainer)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.getUserInfo=function _callee(){var _this$props,UserPageActions,username,info;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,UserPageActions=_this$props.UserPageActions,username=_this$props.username;_context.prev=1;_context.next=4;return _regeneratorRuntime.awrap(UserPageActions.getUserInfo(username));case 4:info=_this.props.result.toJS();_context.next=7;return _regeneratorRuntime.awrap(UserPageActions.setUserInfo(info));case 7:_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},null,null,[[1,9]]);};_this.setError=function(message){var UserPageActions=_this.props.UserPageActions;UserPageActions.setError({form:'User',message:message});return false;};_this.handleChange=function(e){var UserPageActions=_this.props.UserPageActions;var _e$target=e.target,name=_e$target.name,value=_e$target.value;UserPageActions.changeInput({name:name,value:value,form:'User'});};_this.handleClick=function _callee2(){var _this$props2,UserPageActions,form,username,_form$toJS,password,data;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props2=_this.props,UserPageActions=_this$props2.UserPageActions,form=_this$props2.form,username=_this$props2.username;_form$toJS=form.toJS(),password=_form$toJS.password;_context2.prev=2;_context2.next=5;return _regeneratorRuntime.awrap(UserPageActions.checkUserAndGetInfo({password:password}));case 5:data=_this.props.result.toJS();_context2.next=8;return _regeneratorRuntime.awrap(UserPageActions.setUserData({data:data}));case 8:storage.set('passed','true');_context2.next=15;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);return _context2.abrupt(\"return\",_this.setError(\"비밀번호가 틀렸습니다. 다시 입력해주세요.\"));case 15:window.location.href='/@'+username+'/info';case 16:case\"end\":return _context2.stop();}}},null,null,[[2,11]]);};_this.enter=function(){if(window.event.keyCode===13)_this.handleClick();};return _this;}_createClass(UserHeadContainer,[{key:\"componentDidMount\",value:function componentDidMount(){if(!storage.get('loggedInfo'))return;var username=storage.get('loggedInfo').username;if(username.includes('Kakao')){storage.set('passed','true');window.location.replace('/@'+username+'/info');}this.getUserInfo();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(prevProps.username!==this.props.username){this.getUserInfo();}}},{key:\"render\",value:function render(){var error=this.props.error;var _this$props3=this.props,username=_this$props3.username,thumbnail=_this$props3.thumbnail,fetched=_this$props3.fetched,password=_this$props3.password;var handleChange=this.handleChange,handleClick=this.handleClick,enter=this.enter;if(!fetched)return null;return React.createElement(AuthContent,{title:\"MY PAGE\"},React.createElement(UserHead,{username:username,thumbnail:thumbnail}),React.createElement(InputWithLabel,{label:\"\\uBE44\\uBC00\\uBC88\\uD638 \\uC785\\uB825\",name:\"password\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\",type:\"password\",value:password,onChange:handleChange,enter:enter}),error&&React.createElement(AuthError,null,error),React.createElement(AuthButton,{onClick:handleClick},\"\\uD655\\uC778\"));}}]);return UserHeadContainer;}(Component);export default connect(function(state){return{thumbnail:state.userPage.getIn(['info','thumbnail']),error:state.userPage.getIn(['User','error']),result:state.userPage.get('result'),fetched:state.pender.success['userPage/GET_USER_INFO'],form:state.userPage.getIn(['User','form']),userpage:state.userPage};},function(dispatch){return{UserPageActions:bindActionCreators(userPageActions,dispatch)};})(UserHeadContainer);","map":{"version":3,"sources":["C:/Users/user/fronttimeline/src/containers/User/UserHeadContainer.js"],"names":["React","Component","UserHead","InputWithLabel","AuthButton","AuthContent","AuthError","connect","bindActionCreators","userPageActions","storage","UserHeadContainer","getUserInfo","props","UserPageActions","username","info","result","toJS","setUserInfo","console","log","setError","message","form","handleChange","e","target","name","value","changeInput","handleClick","password","checkUserAndGetInfo","data","setUserData","set","window","location","href","enter","event","keyCode","get","includes","replace","prevProps","prevState","error","thumbnail","fetched","state","userPage","getIn","pender","success","userpage","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\n\r\nimport UserHead from '../../components/User/UserHead';\r\nimport {InputWithLabel,AuthButton,AuthContent,AuthError} from '../../components/Auth';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport * as userPageActions from '../../redux/modules/userPage';\r\nimport storage from '../../lib/storage';\r\n\r\nclass UserHeadContainer extends Component {\r\n    componentDidMount(){\r\n        if(!storage.get('loggedInfo')) return;\r\n        let username = storage.get('loggedInfo').username;\r\n        if(username.includes('Kakao')){\r\n            storage.set('passed','true');\r\n            window.location.replace('/@' + username+'/info');\r\n        }\r\n        this.getUserInfo();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState){\r\n        if(prevProps.username !== this.props.username){\r\n            this.getUserInfo();\r\n        }\r\n    }\r\n    \r\n    getUserInfo = async() => {\r\n        const{UserPageActions, username} = this.props;\r\n        try{\r\n            await UserPageActions.getUserInfo(username);\r\n            const info = this.props.result.toJS();\r\n            await UserPageActions.setUserInfo(info);\r\n        }catch(e){\r\n            console.log(e);\r\n        }\r\n        \r\n    }\r\n\r\n    setError = (message) => {\r\n        const {UserPageActions} = this.props;\r\n        UserPageActions.setError({\r\n            form : 'User',\r\n            message\r\n        });\r\n        return false;\r\n    }\r\n\r\n    handleChange = (e) =>{\r\n        const {UserPageActions} = this.props;\r\n        const {name, value} = e.target;\r\n        UserPageActions.changeInput({\r\n            name,\r\n            value,\r\n            form: 'User'  \r\n        });\r\n    }\r\n    handleClick = async() => {\r\n        const{UserPageActions,form,username} = this.props;\r\n        const{password} = form.toJS();\r\n        try{\r\n            await UserPageActions.checkUserAndGetInfo({password});\r\n            const data = this.props.result.toJS();\r\n            await UserPageActions.setUserData({data}); \r\n            storage.set('passed','true');\r\n        } catch(e){\r\n            console.log(e);\r\n            return this.setError(\"비밀번호가 틀렸습니다. 다시 입력해주세요.\");\r\n        }\r\n        window.location.href =  '/@' + username+'/info';\r\n        \r\n    } \r\n    enter = () => {\r\n        if(window.event.keyCode === 13)\r\n        this.handleClick();\r\n    }\r\n\r\n    render(){\r\n        const { error } = this.props;\r\n        const {username,thumbnail,fetched,password} = this.props;\r\n        const {handleChange,handleClick,enter} = this;\r\n        if(!fetched) return null;\r\n        return (\r\n            <AuthContent title='MY PAGE'>\r\n            <UserHead username={username} thumbnail={thumbnail}/>\r\n            <InputWithLabel label = \"비밀번호 입력\" name=\"password\" placeholder=\"비밀번호\"\r\n                type=\"password\"\r\n                value={password} onChange={handleChange} enter={enter}\r\n                />\r\n                {\r\n                    error && <AuthError>{error}</AuthError>\r\n                }\r\n                <AuthButton onClick={handleClick} >확인</AuthButton>\r\n                \r\n            </AuthContent>\r\n\r\n        );\r\n    \r\n    }\r\n}\r\n\r\nexport default connect(\r\n    (state) => ({\r\n        thumbnail: state.userPage.getIn(['info','thumbnail']),\r\n        error: state.userPage.getIn(['User','error']),\r\n        result : state.userPage.get('result'),\r\n        fetched: state.pender.success['userPage/GET_USER_INFO'],\r\n        form : state.userPage.getIn(['User','form']),\r\n        userpage : state.userPage\r\n    }),\r\n    (dispatch)=> ({\r\n        UserPageActions: bindActionCreators(userPageActions, dispatch)\r\n    })\r\n)(UserHeadContainer);"]},"metadata":{},"sourceType":"module"}