{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _classCallCheck from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{AuthContent,InputWithLabel,AuthButton,RightAlignedLink,AuthError}from'../../components/Auth';import{bindActionCreators}from'redux';import{connect}from'react-redux';import*as authActions from'../../redux/modules/auth';import{setError,checkEmailExists,validate,setAuthActions}from'../Function/ValidateModule';import*as userActions from'../../redux/modules/user';import storage from'../../lib/storage';var KakaoRegister=/*#__PURE__*/function(_Component){_inherits(KakaoRegister,_Component);function KakaoRegister(){var _getPrototypeOf2;var _this;_classCallCheck(this,KakaoRegister);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(KakaoRegister)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.handleChange=function(e){var AuthActions=_this.props.AuthActions;var _e$target=e.target,name=_e$target.name,value=_e$target.value;AuthActions.changeInput({name:name,value:value,form:'register'});if(name.indexOf('email')>-1)checkEmailExists(value);};_this.handleLocalRegister=function _callee(){var _this$props,form,AuthActions,error,history,UserActions,match,id,_form$toJS,email,comment,loggedInfo;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,form=_this$props.form,AuthActions=_this$props.AuthActions,error=_this$props.error,history=_this$props.history,UserActions=_this$props.UserActions,match=_this$props.match;id=match.params.id;_form$toJS=form.toJS(),email=_form$toJS.email,comment=_form$toJS.comment;if(!error){_context.next=5;break;}return _context.abrupt(\"return\");case 5:if(!(!validate['email'](email)||!validate['comment'](comment))){_context.next=7;break;}return _context.abrupt(\"return\");case 7:_context.prev=7;_context.next=10;return _regeneratorRuntime.awrap(AuthActions.kakaoRegister({email:email,id:id,comment:comment}));case 10:loggedInfo=_this.props.result.toJS();storage.set('loggedInfo',loggedInfo);UserActions.setLoggedInfo(loggedInfo);UserActions.setValidated(true);history.push('/');_context.next=21;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](7);if(_context.t0.response.status===411)setError('조건에 맞는 데이터를 입력해주세요.');if(_context.t0.response.status===409)setError('다른 회원과 일치하는 데이터가 있습니다. 다시 입력해주세요.');case 21:case\"end\":return _context.stop();}}},null,null,[[7,17]]);};_this.enterRegister=function(){if(window.event.keyCode===13)_this.handleLocalRegister();};return _this;}_createClass(KakaoRegister,[{key:\"componentDidMount\",value:function componentDidMount(){if(!storage.get('kakaologin'))return null;storage.remove('kakaologin');setAuthActions(this.props.AuthActions);}},{key:\"render\",value:function render(){var _this$props2=this.props,error=_this$props2.error,errorId=_this$props2.errorId;var _this$props$form$toJS=this.props.form.toJS(),email=_this$props$form$toJS.email,comment=_this$props$form$toJS.comment;var handleChange=this.handleChange,handleLocalRegister=this.handleLocalRegister,enterRegister=this.enterRegister;return React.createElement(AuthContent,{title:\"SIGN UP\"},React.createElement(InputWithLabel,{label:\"\\uC774\\uBA54\\uC77C\",name:\"email\",placeholder:\"timeline@naver.com\",enter:enterRegister,value:email,onChange:handleChange}),errorId==='email'&&error&&React.createElement(AuthError,null,error),React.createElement(InputWithLabel,{label:\"\\uCF54\\uBA58\\uD2B8\",name:\"comment\",placeholder:\"\\uBC18\\uAC11\\uC2B5\\uB2C8\\uB2E4.\",value:comment,onChange:handleChange,enter:enterRegister}),errorId==='comment'&&error&&React.createElement(AuthError,null,error),React.createElement(AuthButton,{onClick:handleLocalRegister,enter:enterRegister},\"\\uD68C\\uC6D0\\uAC00\\uC785\"),React.createElement(RightAlignedLink,{to:\"/auth/login\"},\"\\uB85C\\uADF8\\uC778\"));}}]);return KakaoRegister;}(Component);export default connect(function(state){return{form:state.auth.getIn(['register','form']),error:state.auth.getIn(['register','error']),errorId:state.auth.getIn(['register','errorId']),result:state.auth.get('result')};},function(dispatch){return{AuthActions:bindActionCreators(authActions,dispatch),UserActions:bindActionCreators(userActions,dispatch)};})(KakaoRegister);","map":{"version":3,"sources":["C:/Users/user/fronttimeline/src/containers/Auth/KakaoRegister.js"],"names":["React","Component","AuthContent","InputWithLabel","AuthButton","RightAlignedLink","AuthError","bindActionCreators","connect","authActions","setError","checkEmailExists","validate","setAuthActions","userActions","storage","KakaoRegister","handleChange","e","AuthActions","props","target","name","value","changeInput","form","indexOf","handleLocalRegister","error","history","UserActions","match","id","params","toJS","email","comment","kakaoRegister","loggedInfo","result","set","setLoggedInfo","setValidated","push","response","status","enterRegister","window","event","keyCode","get","remove","errorId","state","auth","getIn","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {AuthContent,InputWithLabel,AuthButton,RightAlignedLink,AuthError} from '../../components/Auth';\r\nimport { bindActionCreators } from 'redux';\r\nimport {connect} from 'react-redux';\r\nimport * as authActions from '../../redux/modules/auth';\r\nimport {setError,checkEmailExists,validate,setAuthActions} from '../Function/ValidateModule';\r\nimport * as userActions from '../../redux/modules/user';\r\nimport storage from '../../lib/storage';\r\n\r\nclass KakaoRegister extends Component{ \r\n    componentDidMount(){\r\n        if(!storage.get('kakaologin')) return null;\r\n        storage.remove('kakaologin');\r\n        setAuthActions(this.props.AuthActions);\r\n    }\r\n    handleChange = (e) =>{\r\n        const {AuthActions} = this.props;\r\n        const {name, value} = e.target;\r\n        AuthActions.changeInput({\r\n          name,\r\n          value,\r\n          form: 'register'  \r\n        });\r\n        if( name.indexOf('email') > -1)\r\n            checkEmailExists(value);\r\n    } \r\n    handleLocalRegister = async() => {\r\n        const{form, AuthActions, error, history,UserActions,match} = this.props;\r\n        const{id} = match.params;\r\n        const {email,comment} = form.toJS();\r\n    \r\n        if(error) return; //현재 에러 있는 상태라면 진행 x\r\n        if(!validate['email'](email)\r\n        || !validate['comment'](comment)\r\n        ){\r\n            //하나라도 실패하면 진행 하지 않음\r\n            return;\r\n        }\r\n        \r\n        try{\r\n             await AuthActions.kakaoRegister({\r\n                email,id,comment\r\n            });\r\n            const loggedInfo = this.props.result.toJS();\r\n            storage.set('loggedInfo', loggedInfo);\r\n            UserActions.setLoggedInfo(loggedInfo);\r\n            UserActions.setValidated(true);\r\n            history.push('/');\r\n        } catch(e){\r\n            if(e.response.status === 411)\r\n                setError('조건에 맞는 데이터를 입력해주세요.');\r\n            if(e.response.status === 409)\r\n                setError('다른 회원과 일치하는 데이터가 있습니다. 다시 입력해주세요.');\r\n        }\r\n        }\r\n        enterRegister = () => {\r\n            if(window.event.keyCode === 13)\r\n              this.handleLocalRegister();\r\n        }\r\nrender(){\r\n    const {error,errorId} = this.props;\r\n        const {email,comment} = this.props.form.toJS();\r\n        const {handleChange,handleLocalRegister,enterRegister} = this;\r\n    return(\r\n        <AuthContent title='SIGN UP'>\r\n                <InputWithLabel label = \"이메일\" name=\"email\" placeholder=\"timeline@naver.com\" enter = {enterRegister}\r\n                value = {email}\r\n                onChange={handleChange}/>\r\n                 {\r\n                    errorId === 'email' &&error && <AuthError>{error}</AuthError>\r\n                }               \r\n                <InputWithLabel label = \"코멘트\" name=\"comment\" placeholder=\"반갑습니다.\"\r\n                value = {comment} onChange={handleChange} enter = {enterRegister}/>\r\n                {\r\n                    errorId === 'comment' &&error && <AuthError>{error}</AuthError>\r\n                } \r\n                <AuthButton onClick={handleLocalRegister} enter = {enterRegister}>회원가입</AuthButton>\r\n                <RightAlignedLink to=\"/auth/login\">로그인</RightAlignedLink>\r\n            </AuthContent>\r\n    );\r\n}\r\n}\r\nexport default connect(\r\n    (state) => ({\r\n        form: state.auth.getIn(['register','form']),\r\n        error: state.auth.getIn(['register','error']),\r\n        errorId: state.auth.getIn(['register','errorId']),\r\n        result: state.auth.get('result')\r\n    }),\r\n    (dispatch)=>({\r\n        AuthActions : bindActionCreators(authActions,dispatch),\r\n        UserActions : bindActionCreators(userActions, dispatch)\r\n    })\r\n)(KakaoRegister);"]},"metadata":{},"sourceType":"module"}