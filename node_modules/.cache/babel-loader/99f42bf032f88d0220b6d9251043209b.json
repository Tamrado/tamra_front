{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\fronttimeline\\\\src\\\\containers\\\\Auth\\\\KakaoRegister.js\";\nimport React, { Component } from 'react';\nimport { AuthContent, InputWithLabel, AuthButton, RightAlignedLink, AuthError } from '../../components/Auth';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport * as authActions from '../../redux/modules/auth';\nimport { setError, checkEmailExists, validate, setAuthActions } from '../Function/ValidateModule';\nimport * as userActions from '../../redux/modules/user';\nimport * as postActions from '../../redux/modules/post';\nimport storage from '../../lib/storage';\n\nclass KakaoRegister extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleChange = e => {\n      const AuthActions = this.props.AuthActions;\n      const _e$target = e.target,\n            name = _e$target.name,\n            value = _e$target.value;\n      AuthActions.changeInput({\n        name,\n        value,\n        form: 'register'\n      });\n      if (name.indexOf('email') > -1) checkEmailExists(value);\n    };\n\n    this.handleLocalRegister = async () => {\n      const _this$props = this.props,\n            form = _this$props.form,\n            AuthActions = _this$props.AuthActions,\n            error = _this$props.error,\n            history = _this$props.history,\n            UserActions = _this$props.UserActions,\n            match = _this$props.match,\n            PostActions = _this$props.PostActions;\n      const id = match.params.id;\n\n      const _form$toJS = form.toJS(),\n            email = _form$toJS.email,\n            comment = _form$toJS.comment;\n\n      if (error) return; //현재 에러 있는 상태라면 진행 x\n\n      if (!validate['email'](email) || !validate['comment'](comment)) {\n        //하나라도 실패하면 진행 하지 않음\n        return;\n      }\n\n      try {\n        await AuthActions.kakaoRegister({\n          email,\n          id,\n          comment\n        });\n        const loggedInfo = this.props.result.toJS();\n        storage.set('loggedInfo', loggedInfo);\n        UserActions.setLoggedInfo(loggedInfo);\n        UserActions.setValidated(true);\n        await PostActions.setPopupDisplay('block');\n        history.push('/');\n      } catch (e) {\n        if (e.response.status === 411) setError('조건에 맞는 데이터를 입력해주세요.', 'main');\n        if (e.response.status === 409) setError('다른 회원과 일치하는 데이터가 있습니다. 다시 입력해주세요.', 'main');\n      }\n    };\n\n    this.enterRegister = () => {\n      if (window.event.keyCode === 13) this.handleLocalRegister();\n    };\n\n    this.handlePopupOk = () => {\n      const PostActions = this.props.PostActions;\n      PostActions.setPopupDisplay('none');\n    };\n  }\n\n  componentDidMount() {\n    if (!storage.get('kakaologin')) return null;\n    storage.remove('kakaologin');\n    setAuthActions(this.props.AuthActions);\n  }\n\n  render() {\n    const _this$props2 = this.props,\n          error = _this$props2.error,\n          errorId = _this$props2.errorId,\n          popupDisplay = _this$props2.popupDisplay,\n          popupText = _this$props2.popupText;\n\n    const _this$props$form$toJS = this.props.form.toJS(),\n          email = _this$props$form$toJS.email,\n          comment = _this$props$form$toJS.comment;\n\n    const handleChange = this.handleChange,\n          handleLocalRegister = this.handleLocalRegister,\n          enterRegister = this.enterRegister,\n          handlePopupOk = this.handlePopupOk;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(AuthContent, {\n      title: \"SIGN UP\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(InputWithLabel, {\n      label: \"\\uC774\\uBA54\\uC77C\",\n      name: \"email\",\n      placeholder: \"timeline@naver.com()\",\n      enter: enterRegister,\n      value: email,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), errorId === 'email' && error && React.createElement(AuthError, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, error), React.createElement(InputWithLabel, {\n      label: \"\\uCF54\\uBA58\\uD2B8\",\n      name: \"comment\",\n      placeholder: \"\\uBC18\\uAC11\\uC2B5\\uB2C8\\uB2E4.\",\n      value: comment,\n      onChange: handleChange,\n      enter: enterRegister,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }), errorId === 'comment' && error && React.createElement(AuthError, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, error), React.createElement(AuthButton, {\n      onClick: handleLocalRegister,\n      enter: enterRegister,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"\\uD68C\\uC6D0\\uAC00\\uC785\"), errorId === 'main' && error && React.createElement(AuthError, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, error), React.createElement(RightAlignedLink, {\n      to: \"/auth/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"\\uB85C\\uADF8\\uC778\")), React.createElement(Popup, {\n      handlePopupOk: handlePopupOk,\n      display: popupDisplay,\n      text: '회원가입이 완료었습니다.',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default connect(state => ({\n  form: state.auth.getIn(['register', 'form']),\n  error: state.auth.getIn(['register', 'error']),\n  errorId: state.auth.getIn(['register', 'errorId']),\n  result: state.auth.get('result'),\n  popupText: state.post.get('popupText'),\n  popupId: state.post.get('popupId'),\n  popupDisplay: state.post.get('popupDisplay')\n}), dispatch => ({\n  AuthActions: bindActionCreators(authActions, dispatch),\n  UserActions: bindActionCreators(userActions, dispatch),\n  PostActions: bindActionCreators(postActions, dispatch)\n}))(KakaoRegister);","map":{"version":3,"sources":["C:/Users/user/fronttimeline/src/containers/Auth/KakaoRegister.js"],"names":["React","Component","AuthContent","InputWithLabel","AuthButton","RightAlignedLink","AuthError","bindActionCreators","connect","authActions","setError","checkEmailExists","validate","setAuthActions","userActions","postActions","storage","KakaoRegister","handleChange","e","AuthActions","props","target","name","value","changeInput","form","indexOf","handleLocalRegister","error","history","UserActions","match","PostActions","id","params","toJS","email","comment","kakaoRegister","loggedInfo","result","set","setLoggedInfo","setValidated","setPopupDisplay","push","response","status","enterRegister","window","event","keyCode","handlePopupOk","componentDidMount","get","remove","render","errorId","popupDisplay","popupText","state","auth","getIn","post","popupId","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {AuthContent,InputWithLabel,AuthButton,RightAlignedLink,AuthError} from '../../components/Auth';\r\nimport { bindActionCreators } from 'redux';\r\nimport {connect} from 'react-redux';\r\nimport * as authActions from '../../redux/modules/auth';\r\nimport {setError,checkEmailExists,validate,setAuthActions} from '../Function/ValidateModule';\r\nimport * as userActions from '../../redux/modules/user';\r\nimport * as postActions from '../../redux/modules/post';\r\nimport storage from '../../lib/storage';\r\n\r\nclass KakaoRegister extends Component{ \r\n    componentDidMount(){\r\n        if(!storage.get('kakaologin')) return null;\r\n        storage.remove('kakaologin');\r\n        setAuthActions(this.props.AuthActions);\r\n    }\r\n    handleChange = (e) =>{\r\n        const {AuthActions} = this.props;\r\n        const {name, value} = e.target;\r\n        AuthActions.changeInput({\r\n          name,\r\n          value,\r\n          form: 'register'  \r\n        });\r\n        if( name.indexOf('email') > -1)\r\n            checkEmailExists(value);\r\n    } \r\n    handleLocalRegister = async() => {\r\n        const{form, AuthActions, error, history,UserActions,match,PostActions} = this.props;\r\n        const{id} = match.params;\r\n        const {email,comment} = form.toJS();\r\n    \r\n        if(error) return; //현재 에러 있는 상태라면 진행 x\r\n        if(!validate['email'](email)\r\n        || !validate['comment'](comment)\r\n        ){\r\n            //하나라도 실패하면 진행 하지 않음\r\n            return;\r\n        }\r\n        \r\n        try{\r\n             await AuthActions.kakaoRegister({\r\n                email,id,comment\r\n            });\r\n            const loggedInfo = this.props.result.toJS();\r\n            storage.set('loggedInfo', loggedInfo);\r\n            UserActions.setLoggedInfo(loggedInfo);\r\n            UserActions.setValidated(true);\r\n            await PostActions.setPopupDisplay('block');\r\n            history.push('/');\r\n        } catch(e){\r\n            if(e.response.status === 411)\r\n                setError('조건에 맞는 데이터를 입력해주세요.','main');\r\n            if(e.response.status === 409)\r\n                setError('다른 회원과 일치하는 데이터가 있습니다. 다시 입력해주세요.','main');\r\n        }\r\n        }\r\n        enterRegister = () => {\r\n            if(window.event.keyCode === 13)\r\n              this.handleLocalRegister();\r\n        }\r\n        handlePopupOk = () => {\r\n            const{PostActions} = this.props;\r\n            PostActions.setPopupDisplay('none');\r\n        }\r\nrender(){\r\n    const {error,errorId,popupDisplay,popupText} = this.props;\r\n        const {email,comment} = this.props.form.toJS();\r\n        const {handleChange,handleLocalRegister,enterRegister,handlePopupOk} = this;\r\n    return(\r\n        <div>\r\n        <AuthContent title='SIGN UP'>\r\n                <InputWithLabel label = \"이메일\" name=\"email\" placeholder=\"timeline@naver.com()\" enter = {enterRegister}\r\n                value = {email}\r\n                onChange={handleChange}/>\r\n                 {\r\n                    errorId === 'email' &&error && <AuthError>{error}</AuthError>\r\n                }               \r\n                <InputWithLabel label = \"코멘트\" name=\"comment\" placeholder=\"반갑습니다.\"\r\n                value = {comment} onChange={handleChange} enter = {enterRegister}/>\r\n                {\r\n                    errorId === 'comment' &&error && <AuthError>{error}</AuthError>\r\n                } \r\n                <AuthButton onClick={handleLocalRegister} enter = {enterRegister}>회원가입</AuthButton>\r\n                {\r\n                    errorId === 'main' &&error && <AuthError>{error}</AuthError>\r\n                } \r\n                <RightAlignedLink to=\"/auth/login\">로그인</RightAlignedLink>\r\n            </AuthContent>\r\n             <Popup handlePopupOk = {handlePopupOk} display={popupDisplay} text={'회원가입이 완료었습니다.'} />\r\n            </div>\r\n    );\r\n}\r\n}\r\nexport default connect(\r\n    (state) => ({\r\n        form: state.auth.getIn(['register','form']),\r\n        error: state.auth.getIn(['register','error']),\r\n        errorId: state.auth.getIn(['register','errorId']),\r\n        result: state.auth.get('result'),\r\n        popupText : state.post.get('popupText'),\r\n        popupId : state.post.get('popupId'),\r\n        popupDisplay : state.post.get('popupDisplay')\r\n    }),\r\n    (dispatch)=>({\r\n        AuthActions : bindActionCreators(authActions,dispatch),\r\n        UserActions : bindActionCreators(userActions, dispatch),\r\n        PostActions : bindActionCreators(postActions,dispatch)\r\n    })\r\n)(KakaoRegister);"]},"metadata":{},"sourceType":"module"}