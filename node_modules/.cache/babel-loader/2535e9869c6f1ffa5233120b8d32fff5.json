{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _classCallCheck from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import Header,{RegisterButton,UserThumbnail,SearchList,Setting}from'../../components/Header';import{FollowList}from'../../components/FollowMenu';import{AlarmList}from'../../components/Alarm';import{connect}from'react-redux';import*as userActions from'../../redux/modules/user';import*as baseActions from'../../redux/modules/base';import*as friendActions from'../../redux/modules/friend';import*as searchActions from'../../redux/modules/search';import*as alarmActions from'../../redux/modules/alarm';import{bindActionCreators}from'redux';import UserMenuContainer from'./UserMenuContainer';import menuImage from'../../build/static/images/iconmonstr-arrow-80-24.png';import alarmImage from'../../build/static/images/iconmonstr-bell-thin-32.png';import friendRequestImage from'../../build/static/images/iconmonstr-user-29-32.png';import mypageImage from'../../build/static/images/iconmonstr-gear-10-32.png';import hoverMenuImage from'../../build/static/images/iconmonstr-arrow-80-12.png';import hoverAlarmImage from'../../build/static/images/iconmonstr-bell-thin-32 (1).png';import hoverFriendRequestImage from'../../build/static/images/iconmonstr-user-29-32 (1).png';import hoverMypageImage from'../../build/static/images/iconmonstr-gear-10-32 (1).png';import{dateTimeToFormatted}from'../Function/dateTimeModule';var HeaderContainer=/*#__PURE__*/function(_Component){_inherits(HeaderContainer,_Component);function HeaderContainer(){var _getPrototypeOf2;var _this;_classCallCheck(this,HeaderContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(HeaderContainer)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={friendRequestVisible:'none',alarmNumVisible:'none',mypageVisible:'none',mVisible:'none',noFriendAddVisible:'none',alarmNonevisible:'none'};_this.getFollowRequest=function _callee(){var FriendActions;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:FriendActions=_this.props.FriendActions;_context.prev=1;_context.next=4;return _regeneratorRuntime.awrap(FriendActions.getFriendAlarmInfo());case 4:_this.setState({friendRequestVisible:'block',noFriendAddVisible:'none'});_context.next=12;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);console.log(_context.t0);_this.setState({friendRequestVisible:'none',noFriendAddVisible:'block'});return _context.abrupt(\"return\");case 12:case\"end\":return _context.stop();}}},null,null,[[1,7]]);};_this.getAlarm=function _callee3(){var AlarmActions,_this$props,alarmList,alarmNum;return _regeneratorRuntime.async(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:AlarmActions=_this.props.AlarmActions;_context3.prev=1;_context3.next=4;return _regeneratorRuntime.awrap(AlarmActions.getAlarmNum());case 4:_context3.next=6;return _regeneratorRuntime.awrap(AlarmActions.getAlarm());case 6:_this$props=_this.props,alarmList=_this$props.alarmList,alarmNum=_this$props.alarmNum;alarmList.map(function _callee2(alarm,index){var time,dateString;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:time=alarm.get('timestamp');dateString=dateTimeToFormatted(time);_context2.next=4;return _regeneratorRuntime.awrap(AlarmActions.setAlarmTime({dateString:dateString,index:index}));case 4:case\"end\":return _context2.stop();}}});});if(alarmList.size>0)_this.setState({alarmNonevisible:'none'});else _this.setState({alarmNonevisible:'block'});if(alarmNum>0)_this.setState({alarmNumVisible:'block'});else _this.setState({alarmNumVisible:'none'});_context3.next=15;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](1);_this.setState({alarmNonevisible:'block',alarmNumVisible:'none'});case 15:case\"end\":return _context3.stop();}}},null,null,[[1,12]]);};_this.setFollowNotificationUnavailable=function _callee4(e){var FriendActions,id;return _regeneratorRuntime.async(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:FriendActions=_this.props.FriendActions;id=e.target.id;_context4.prev=2;console.log(id);_context4.next=6;return _regeneratorRuntime.awrap(FriendActions.deleteFriendAlarmNotification({'userId':id}));case 6:_this.handleFriendRequestClick();_this.getFollowRequest();_context4.next=14;break;case 10:_context4.prev=10;_context4.t0=_context4[\"catch\"](2);console.log(_context4.t0);return _context4.abrupt(\"return\");case 14:case\"end\":return _context4.stop();}}},null,null,[[2,10]]);};_this.handleThumbnailClick=function(){var _this$props2=_this.props,BaseActions=_this$props2.BaseActions,userMenuVisible=_this$props2.userMenuVisible;if(userMenuVisible==='none')BaseActions.setUserMenuVisibility('block');else BaseActions.setUserMenuVisibility('none');};_this.handleAlarmClick=function(){var _this$props3=_this.props,BaseActions=_this$props3.BaseActions,alarmMenuVisible=_this$props3.alarmMenuVisible;if(alarmMenuVisible==='none'){BaseActions.setAlarmMenuVisible('block');BaseActions.setFollowMenuVisible('none');BaseActions.setUserMenuVisibility('none');}else BaseActions.setAlarmMenuVisible('none');};_this.handleFriendRequestClick=function(){var _this$props4=_this.props,BaseActions=_this$props4.BaseActions,followMenuVisible=_this$props4.followMenuVisible;if(followMenuVisible==='none'){BaseActions.setAlarmMenuVisible('none');BaseActions.setFollowMenuVisible('block');BaseActions.setUserMenuVisibility('none');}else BaseActions.setFollowMenuVisible('none');};_this.handleMyPageClick=function(){var username=_this.props.username;window.location.href='/@'+username+'/password';};_this.follow=function(e){var FriendActions=_this.props.FriendActions;var id=e.target.id;try{FriendActions.follow(id);_this.handleFriendRequestClick();window.location.reload();}catch(e){return;}};_this.handleProfileClick=function(){var username=_this.props.username;window.location.href=\"/@:\".concat(username);};_this.handleSearchBox=function _callee5(e){var SearchActions,innerText,headerContent;return _regeneratorRuntime.async(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:SearchActions=_this.props.SearchActions;innerText=e.target.innerText;_context5.next=4;return _regeneratorRuntime.awrap(SearchActions.setHeaderContent(innerText));case 4:headerContent=_this.props.headerContent;_context5.prev=5;_context5.next=8;return _regeneratorRuntime.awrap(SearchActions.searchInHeader(headerContent,1,5));case 8:_context5.next=13;break;case 10:_context5.prev=10;_context5.t0=_context5[\"catch\"](5);SearchActions.setEmptyUserlist();case 13:_context5.next=15;return _regeneratorRuntime.awrap(SearchActions.setHeaderVisible('block'));case 15:case\"end\":return _context5.stop();}}},null,null,[[5,10]]);};_this.handleSearchClick=function _callee6(){var _this$props5,SearchActions,page,headerContent;return _regeneratorRuntime.async(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_this$props5=_this.props,SearchActions=_this$props5.SearchActions,page=_this$props5.page,headerContent=_this$props5.headerContent;_context6.next=3;return _regeneratorRuntime.awrap(SearchActions.searchInHeader(headerContent,page,10));case 3:_context6.next=5;return _regeneratorRuntime.awrap(SearchActions.setEmptyUserlist());case 5:_context6.next=7;return _regeneratorRuntime.awrap(SearchActions.setAddPage());case 7:case\"end\":return _context6.stop();}}});};_this.handleUserClick=function _callee7(e){return _regeneratorRuntime.async(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:window.location.href=\"/@:\".concat(e.target.id);case 1:case\"end\":return _context7.stop();}}});};_this.handleClickHome=function(){window.location.href='/';};_this.handleAllRead=function _callee8(){var _this$props6,AlarmActions,BaseActions;return _regeneratorRuntime.async(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_this$props6=_this.props,AlarmActions=_this$props6.AlarmActions,BaseActions=_this$props6.BaseActions;_context8.next=3;return _regeneratorRuntime.awrap(AlarmActions.setAllReadAlarm());case 3:_context8.next=5;return _regeneratorRuntime.awrap(_this.getAlarm());case 5:BaseActions.setAlarmMenuVisible('none');case 6:case\"end\":return _context8.stop();}}});};return _this;}_createClass(HeaderContainer,[{key:\"componentDidMount\",value:function componentDidMount(){this.getFollowRequest();this.getAlarm();}},{key:\"render\",value:function render(){var _this$props7=this.props,visible=_this$props7.visible,user=_this$props7.user,followRequest=_this$props7.followRequest,friendRequestNum=_this$props7.friendRequestNum,headerVisible=_this$props7.headerVisible,alarmMenuVisible=_this$props7.alarmMenuVisible,userList=_this$props7.userList,headerContent=_this$props7.headerContent,alarmList=_this$props7.alarmList,alarmNum=_this$props7.alarmNum,userMenuVisible=_this$props7.userMenuVisible,followMenuVisible=_this$props7.followMenuVisible;var _this$state=this.state,friendRequestVisible=_this$state.friendRequestVisible,alarmNumVisible=_this$state.alarmNumVisible,alarmNonevisible=_this$state.alarmNonevisible,mypageVisible=_this$state.mypageVisible,mVisible=_this$state.mVisible,noFriendAddVisible=_this$state.noFriendAddVisible;var handleThumbnailClick=this.handleThumbnailClick,handleAlarmClick=this.handleAlarmClick,handleFriendRequestClick=this.handleFriendRequestClick,handleMyPageClick=this.handleMyPageClick,follow=this.follow,setFollowNotificationUnavailable=this.setFollowNotificationUnavailable,handleSearchBox=this.handleSearchBox,handleUserClick=this.handleUserClick,handleProfileClick=this.handleProfileClick,handleClickHome=this.handleClickHome,handleAllRead=this.handleAllRead,handleAlarmInfoClick=this.handleAlarmInfoClick;var content,search,alarm,friendRequest,mypage,menu=null;if(!visible)return null;if(user.get('logged')){content=React.createElement(UserThumbnail,{profileClick:handleProfileClick,username:user.getIn(['loggedInfo','username']),thumbnail:user.getIn(['loggedInfo','thumbnail'])});search=React.createElement(SearchList,{userclick:handleUserClick,onclick:handleSearchBox,visible:headerVisible,users:userList,nickname:headerContent});alarm=React.createElement(Setting,{key:'alarm',resultvisible:alarmNumVisible,alarmNum:alarmNum,image:alarmImage,size:'30px',onclick:handleAlarmClick,hoverimg:hoverAlarmImage,tvisible:alarmMenuVisible});friendRequest=React.createElement(Setting,{key:'friendRequest',tvisible:followMenuVisible,resultvisible:friendRequestVisible,image:friendRequestImage,size:'30px',onclick:handleFriendRequestClick,hoverimg:hoverFriendRequestImage,alarmNum:friendRequestNum});mypage=React.createElement(Setting,{key:'mypage',tvisible:'none',resultvisible:mypageVisible,image:mypageImage,size:'35px',onclick:handleMyPageClick,hoverimg:hoverMypageImage});menu=React.createElement(Setting,{key:'menu',left:'10px',tvisible:userMenuVisible,resultvisible:mVisible,image:menuImage,size:'12px',hoverimg:hoverMenuImage,onclick:handleThumbnailClick});}else{content=React.createElement(RegisterButton,null);}return React.createElement(Header,{home:handleClickHome},search,content,alarm,friendRequest,mypage,menu,React.createElement(AlarmList,{alarms:alarmList,visible:alarmMenuVisible,alarmvisible:alarmNonevisible,handleAllRead:handleAllRead,handleAlarmInfoClick:handleAlarmInfoClick}),React.createElement(FollowList,{friend:followRequest,deleteclick:setFollowNotificationUnavailable,follow:follow,visible:followMenuVisible,result:friendRequestVisible,friendvisible:noFriendAddVisible}),React.createElement(UserMenuContainer,{eventTypes:\"click\"}));}}]);return HeaderContainer;}(Component);export default connect(function(state){return{userMenuVisible:state.base.get('userMenuVisible'),visible:state.base.getIn(['header','visible']),username:state.user.getIn(['loggedInfo','username']),user:state.user,followRequest:state.friend.get('alarm'),friendRequestNum:state.friend.get('friendRequestNum'),headerContent:state.search.get('headerContent'),userList:state.search.get('userList'),headerVisble:state.search.get('headervisible'),alarmList:state.alarm.get('alarmList'),alarmNum:state.alarm.get('alarmNum'),followMenuVisible:state.base.get('followMenuVisible'),alarmMenuVisible:state.base.get('alarmMenuVisible')};},function(dispatch){return{UserActions:bindActionCreators(userActions,dispatch),BaseActions:bindActionCreators(baseActions,dispatch),FriendActions:bindActionCreators(friendActions,dispatch),SearchActions:bindActionCreators(searchActions,dispatch),AlarmActions:bindActionCreators(alarmActions,dispatch)};})(HeaderContainer);","map":{"version":3,"sources":["C:/Users/user/fronttimeline/src/containers/Base/HeaderContainer.js"],"names":["React","Component","Header","RegisterButton","UserThumbnail","SearchList","Setting","FollowList","AlarmList","connect","userActions","baseActions","friendActions","searchActions","alarmActions","bindActionCreators","UserMenuContainer","menuImage","alarmImage","friendRequestImage","mypageImage","hoverMenuImage","hoverAlarmImage","hoverFriendRequestImage","hoverMypageImage","dateTimeToFormatted","HeaderContainer","state","friendRequestVisible","alarmNumVisible","mypageVisible","mVisible","noFriendAddVisible","alarmNonevisible","getFollowRequest","FriendActions","props","getFriendAlarmInfo","setState","console","log","getAlarm","AlarmActions","getAlarmNum","alarmList","alarmNum","map","alarm","index","time","get","dateString","setAlarmTime","size","setFollowNotificationUnavailable","e","id","target","deleteFriendAlarmNotification","handleFriendRequestClick","handleThumbnailClick","BaseActions","userMenuVisible","setUserMenuVisibility","handleAlarmClick","alarmMenuVisible","setAlarmMenuVisible","setFollowMenuVisible","followMenuVisible","handleMyPageClick","username","window","location","href","follow","reload","handleProfileClick","handleSearchBox","SearchActions","innerText","setHeaderContent","headerContent","searchInHeader","setEmptyUserlist","setHeaderVisible","handleSearchClick","page","setAddPage","handleUserClick","handleClickHome","handleAllRead","setAllReadAlarm","visible","user","followRequest","friendRequestNum","headerVisible","userList","handleAlarmInfoClick","content","search","friendRequest","mypage","menu","getIn","base","friend","headerVisble","dispatch","UserActions"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport Header, {RegisterButton,UserThumbnail,SearchList,Setting} from '../../components/Header';\r\nimport {FollowList} from '../../components/FollowMenu';\r\nimport {AlarmList} from '../../components/Alarm';\r\nimport {connect} from 'react-redux';\r\nimport * as userActions from '../../redux/modules/user';\r\nimport * as baseActions from '../../redux/modules/base';\r\nimport * as friendActions from '../../redux/modules/friend';\r\nimport * as searchActions from '../../redux/modules/search';\r\nimport * as alarmActions from '../../redux/modules/alarm';\r\nimport {bindActionCreators} from 'redux';\r\nimport UserMenuContainer from './UserMenuContainer';\r\nimport menuImage from '../../build/static/images/iconmonstr-arrow-80-24.png';\r\nimport alarmImage from '../../build/static/images/iconmonstr-bell-thin-32.png';\r\nimport friendRequestImage from '../../build/static/images/iconmonstr-user-29-32.png';\r\nimport mypageImage from '../../build/static/images/iconmonstr-gear-10-32.png';\r\nimport hoverMenuImage from '../../build/static/images/iconmonstr-arrow-80-12.png';\r\nimport hoverAlarmImage from '../../build/static/images/iconmonstr-bell-thin-32 (1).png';\r\nimport hoverFriendRequestImage from '../../build/static/images/iconmonstr-user-29-32 (1).png';\r\nimport hoverMypageImage from '../../build/static/images/iconmonstr-gear-10-32 (1).png';\r\nimport {dateTimeToFormatted} from '../Function/dateTimeModule';\r\nclass HeaderContainer extends Component {\r\n    state = {\r\n        friendRequestVisible : 'none',\r\n        alarmNumVisible : 'none',\r\n        mypageVisible : 'none',\r\n        mVisible : 'none',\r\n        noFriendAddVisible : 'none',\r\n        alarmNonevisible : 'none'\r\n    }\r\n    \r\n    componentDidMount() {\r\n       this.getFollowRequest();\r\n       this.getAlarm();\r\n    }\r\n    getFollowRequest = async() => {\r\n        const {FriendActions} = this.props;\r\n        try{\r\n            await FriendActions.getFriendAlarmInfo();\r\n        this.setState({\r\n                friendRequestVisible : 'block',\r\n                noFriendAddVisible : 'none'\r\n            });\r\n        }catch(e){\r\n            console.log(e);\r\n            this.setState({\r\n                friendRequestVisible : 'none',\r\n                noFriendAddVisible : 'block'\r\n            });\r\n            return;\r\n        }\r\n    }\r\n    getAlarm = async () => {\r\n        const {AlarmActions} = this.props;\r\n        try{\r\n            await AlarmActions.getAlarmNum();\r\n            await AlarmActions.getAlarm();\r\n\r\n            const {alarmList,alarmNum} = this.props;\r\n            alarmList.map(\r\n                async(alarm,index) =>{\r\n                    let time = alarm.get('timestamp');\r\n                            let dateString = dateTimeToFormatted(time);\r\n                            await AlarmActions.setAlarmTime({dateString:dateString,index : index});\r\n                }\r\n            )\r\n            if(alarmList.size > 0)\r\n            this.setState({ alarmNonevisible : 'none'});\r\n            else\r\n                this.setState({ alarmNonevisible : 'block'});\r\n            if(alarmNum > 0)\r\n                this.setState({alarmNumVisible : 'block'});\r\n            else\r\n                this.setState({alarmNumVisible: 'none'});\r\n            \r\n        }catch(e){\r\n            this.setState({\r\n                alarmNonevisible : 'block',\r\n                alarmNumVisible : 'none'\r\n            });\r\n        }\r\n    }\r\n    setFollowNotificationUnavailable = async(e) => {\r\n        const {FriendActions} = this.props;\r\n        const {id} = e.target;\r\n        try{\r\n            console.log(id);\r\n            await FriendActions.deleteFriendAlarmNotification({'userId' : id});\r\n            this.handleFriendRequestClick();\r\n            this.getFollowRequest();\r\n            \r\n        }catch(e){\r\n            console.log(e);\r\n            return;\r\n        }\r\n    }\r\n    handleThumbnailClick = () => {\r\n        const {BaseActions,userMenuVisible} = this.props;\r\n        if(userMenuVisible === 'none')\r\n            BaseActions.setUserMenuVisibility('block');\r\n        \r\n        else BaseActions.setUserMenuVisibility('none');\r\n    }\r\n\r\n    handleAlarmClick = () => {\r\n        const{BaseActions,alarmMenuVisible} = this.props;\r\n     if(alarmMenuVisible === 'none'){\r\n        BaseActions.setAlarmMenuVisible('block');\r\n        BaseActions.setFollowMenuVisible('none');\r\n        BaseActions.setUserMenuVisibility('none');\r\n    }\r\n     else\r\n        BaseActions.setAlarmMenuVisible('none');\r\n    }\r\n\r\n    handleFriendRequestClick = () => {\r\n        const{BaseActions,followMenuVisible} = this.props;\r\n        if(followMenuVisible === 'none'){\r\n            BaseActions.setAlarmMenuVisible('none');\r\n        BaseActions.setFollowMenuVisible('block');\r\n        BaseActions.setUserMenuVisibility('none');\r\n    }\r\n        else\r\n        BaseActions.setFollowMenuVisible('none');\r\n    }\r\n    handleMyPageClick = () => {\r\n        const {username} = this.props;\r\n        window.location.href = '/@' + username+'/password';\r\n    }\r\n    follow = (e) => {\r\n        const {FriendActions} = this.props;\r\n        const {id} = e.target;\r\n        try{\r\n        FriendActions.follow(id);\r\n        this.handleFriendRequestClick();\r\n        window.location.reload();\r\n        }catch(e){\r\n            return;\r\n        }\r\n    }\r\n\r\n    handleProfileClick = () => {\r\n        const{username} = this.props;\r\n        window.location.href =`/@:${username}`;\r\n    }\r\n\r\n    handleSearchBox = async(e) => {\r\n        const {SearchActions} = this.props;\r\n        const {innerText} = e.target;\r\n        \r\n        await SearchActions.setHeaderContent(innerText);\r\n        const {headerContent} = this.props;\r\n        try{\r\n        await SearchActions.searchInHeader(headerContent,1,5);\r\n        }catch(e){\r\n            SearchActions.setEmptyUserlist();\r\n        }\r\n        await SearchActions.setHeaderVisible('block');\r\n    }\r\n\r\n    handleSearchClick = async() => {\r\n        const {SearchActions,page,headerContent} = this.props;\r\n        await SearchActions.searchInHeader(headerContent,page,10);\r\n        await SearchActions.setEmptyUserlist();\r\n        await SearchActions.setAddPage();\r\n    }\r\n\r\n    handleUserClick = async(e) => {\r\n        window.location.href = `/@:${e.target.id}`;\r\n    }\r\n    handleClickHome = () => {\r\n        window.location.href = '/';\r\n    }\r\n    handleAllRead = async() => {\r\n        const {AlarmActions,BaseActions} = this.props;\r\n        await AlarmActions.setAllReadAlarm();\r\n        await this.getAlarm();\r\n        BaseActions.setAlarmMenuVisible('none');\r\n\r\n    }\r\n\r\n    render(){\r\n    const {visible, user,followRequest,friendRequestNum,headerVisible,alarmMenuVisible,\r\n        userList,headerContent,alarmList,alarmNum,userMenuVisible,followMenuVisible} = this.props;\r\n    const{friendRequestVisible,alarmNumVisible,alarmNonevisible,\r\n        mypageVisible,mVisible,noFriendAddVisible} = this.state;\r\n    const {handleThumbnailClick,handleAlarmClick,handleFriendRequestClick,handleMyPageClick\r\n        ,follow,setFollowNotificationUnavailable,handleSearchBox,handleUserClick,handleProfileClick,\r\n        handleClickHome,handleAllRead,handleAlarmInfoClick} = this;\r\n    let content,search,alarm,friendRequest,mypage,menu = null;\r\n    \r\n    if(!visible) return null;\r\n\r\n    if(user.get('logged')){\r\n        content = <UserThumbnail profileClick={handleProfileClick}  username={user.getIn(['loggedInfo','username'])} thumbnail={user.getIn(['loggedInfo','thumbnail'])} />;\r\n        search = <SearchList userclick = {handleUserClick}\r\n         onclick = {handleSearchBox} visible={headerVisible} users={userList} nickname={headerContent}/>;\r\n        alarm = <Setting key={'alarm'} resultvisible = {alarmNumVisible} alarmNum = {alarmNum}image = {alarmImage} size = {'30px'}\r\n         onclick = {handleAlarmClick} hoverimg={hoverAlarmImage} tvisible={alarmMenuVisible}/>;\r\n        \r\n        friendRequest = <Setting key={'friendRequest'} tvisible={followMenuVisible} resultvisible={friendRequestVisible} image = {friendRequestImage} size ={'30px'}\r\n         onclick = {handleFriendRequestClick} hoverimg={hoverFriendRequestImage} alarmNum = {friendRequestNum}/>;\r\n        \r\n         mypage = <Setting key={'mypage'} tvisible = {'none'}resultvisible={mypageVisible} image = {mypageImage} size = {'35px'} onclick = {handleMyPageClick} hoverimg={hoverMypageImage}/>;\r\n        \r\n         menu = <Setting key={'menu'} left ={'10px'} tvisible = {userMenuVisible} resultvisible={mVisible} image = {menuImage} size = {'12px'}  hoverimg = {hoverMenuImage} onclick={handleThumbnailClick}/>;\r\n    }\r\n    else{\r\n        content = <RegisterButton/>;\r\n    }\r\n        return(\r\n            \r\n            <Header home={handleClickHome}>\r\n                {search}\r\n                {content}\r\n                {alarm}\r\n                {friendRequest}\r\n                {mypage}\r\n                {menu}\r\n                <AlarmList alarms={alarmList} visible={alarmMenuVisible} alarmvisible={alarmNonevisible}\r\n                handleAllRead={handleAllRead} handleAlarmInfoClick={handleAlarmInfoClick}/>\r\n                <FollowList friend = {followRequest} deleteclick={setFollowNotificationUnavailable}\r\n                follow = {follow} visible = {followMenuVisible} result={friendRequestVisible} \r\n                friendvisible = {noFriendAddVisible} />\r\n                <UserMenuContainer eventTypes=\"click\"/>\r\n           </Header>\r\n        );\r\n    }\r\n}\r\nexport default connect(\r\n    (state) => ({\r\n        userMenuVisible : state.base.get('userMenuVisible'),\r\n        visible: state.base.getIn(['header', 'visible']),\r\n        username: state.user.getIn(['loggedInfo','username']),\r\n        user: state.user,\r\n        followRequest : state.friend.get('alarm'),\r\n        friendRequestNum : state.friend.get('friendRequestNum'),\r\n        headerContent : state.search.get('headerContent'),\r\n        userList : state.search.get('userList'),\r\n        headerVisble : state.search.get('headervisible'),\r\n        alarmList : state.alarm.get('alarmList'),\r\n        alarmNum : state.alarm.get('alarmNum'),\r\n        followMenuVisible : state.base.get('followMenuVisible'),\r\n        alarmMenuVisible : state.base.get('alarmMenuVisible')\r\n    }),\r\n    (dispatch) => ({\r\n        UserActions: bindActionCreators(userActions, dispatch),\r\n        BaseActions: bindActionCreators(baseActions,dispatch),\r\n        FriendActions : bindActionCreators(friendActions,dispatch),\r\n        SearchActions : bindActionCreators(searchActions,dispatch),\r\n        AlarmActions : bindActionCreators(alarmActions,dispatch)\r\n    })\r\n) (HeaderContainer);"]},"metadata":{},"sourceType":"module"}