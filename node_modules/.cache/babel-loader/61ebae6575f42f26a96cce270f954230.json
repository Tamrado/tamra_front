{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\fronttimeline\\\\src\\\\containers\\\\Base\\\\PostDetailContainer.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport storage from '../../lib/storage';\nimport * as timelineActions from '../../redux/modules/timeline';\nimport * as commentActions from '../../redux/modules/comment';\nimport * as postActions from '../../redux/modules/post';\nimport * as likeActions from '../../redux/modules/like';\nimport { CommentList, DetailPostView } from '../../components/DetailPost';\n\nclass PostDetailContainer extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      pageCount: 0\n    };\n\n    this.componentDidMount = async () => {\n      await this.renderPageInfo();\n      await this.renderCommentInfo();\n    };\n\n    this.setImageSize = async index => {\n      const _this$props = this.props,\n            presentPost = _this$props.presentPost,\n            PostActions = _this$props.PostActions;\n      let imageSize = await this.getImageSize(presentPost.getIn(['feed', 'files', index, 'original']));\n      await PostActions.setFileSize(imageSize);\n    };\n\n    this.renderPageInfo = async () => {\n      const _this$props2 = this.props,\n            postid = _this$props2.postid,\n            TimelineActions = _this$props2.TimelineActions,\n            PostActions = _this$props2.PostActions,\n            imageIndex = _this$props2.imageIndex;\n      let index = imageIndex.substr(1);\n      const id = postid.substr(1);\n      await TimelineActions.getFeedInformationDetail(id);\n      await this.setPostTime();\n      const presentPost = this.props.presentPost;\n      await this.setImageSize(index);\n      if (presentPost.getIn(['feed', 'files']) > 1) TimelineActions.setImageArrowVisible('block');\n    };\n\n    this.getImageSize = url => {\n      return new Promise((resolve, reject) => {\n        let image = new Image();\n\n        image.onload = () => {\n          resolve({\n            width: image.naturalWidth,\n            height: image.naturalHeight\n          });\n        };\n\n        image.src = url;\n      });\n    };\n\n    this.renderCommentInfo = async () => {\n      const _this$props3 = this.props,\n            CommentActions = _this$props3.CommentActions,\n            TimelineActions = _this$props3.TimelineActions,\n            presentPost = _this$props3.presentPost,\n            postid = _this$props3.postid;\n      const id = postid.substr(1);\n      let page = presentPost.getIn(['feed', 'commentPage']);\n      await CommentActions.showPostCommentList(id, page);\n      await TimelineActions.setDetailCommentPage(id);\n      const _this$props4 = this.props,\n            comments = _this$props4.comments,\n            lastComment = _this$props4.lastComment;\n      if (lastComment) await TimelineActions.setDetailCommentList({\n        'commentId': id,\n        'commentList': comments,\n        'trueComment': false\n      });else await TimelineActions.setDetailCommentList({\n        'commentId': id,\n        'commentList': comments,\n        'trueComment': true\n      });\n      await this.setCommentTime();\n    };\n\n    this.setPostTime = async () => {\n      const _this$props5 = this.props,\n            presentPost = _this$props5.presentPost,\n            TimelineActions = _this$props5.TimelineActions;\n      let time = presentPost.getIn(['feed', 'timestamp']);\n      let timestring = this.dateTimeToFormatted(time);\n      await TimelineActions.setDetailTime(timestring);\n    };\n\n    this.setCommentTime = async () => {\n      const _this$props6 = this.props,\n            presentPost = _this$props6.presentPost,\n            TimelineActions = _this$props6.TimelineActions,\n            commentList = _this$props6.commentList;\n      const comments = commentList;\n      await Promise.all(comments.map(async (comment, commentIndex) => {\n        let time = comment.timestamp;\n        let timestring = this.dateTimeToFormatted(time);\n        await TimelineActions.setDetailCommentTime({\n          timestring: timestring,\n          commentIndex: commentIndex\n        });\n      }));\n    };\n\n    this.handleLeft = async () => {\n      const _this$props7 = this.props,\n            presentPost = _this$props7.presentPost,\n            imageIndex = _this$props7.imageIndex,\n            history = _this$props7.history,\n            postid = _this$props7.postid,\n            PostActions = _this$props7.PostActions;\n      let index = imageIndex.substr(1);\n      let imageSize = presentPost.getIn(['feed', 'files']).size;\n      this.setState({\n        pageCount: this.state.pageCount + 1\n      });\n\n      if (parseInt(index) === 0) {\n        await this.setImageSize(imageSize - 1);\n        history.push(`/feed/@${postid}/image/:${imageSize - 1}`);\n      } else {\n        await this.setImageSize(parseInt(index) - 1);\n        history.push(`/feed/@${postid}/image/:${parseInt(index) - 1}`);\n      }\n    };\n\n    this.handleRight = async () => {\n      const _this$props8 = this.props,\n            presentPost = _this$props8.presentPost,\n            imageIndex = _this$props8.imageIndex,\n            history = _this$props8.history,\n            postid = _this$props8.postid,\n            PostActions = _this$props8.PostActions;\n      let index = imageIndex.substr(1);\n      let size = await this.getImageSize(presentPost.getIn(['feed', 'files', index, 'original']));\n      PostActions.setFileSize(size);\n      this.setState({\n        pageCount: this.state.pageCount + 1\n      });\n      let imageSize = presentPost.getIn(['feed', 'files']).size;\n\n      if (parseInt(index) === imageSize - 1) {\n        await this.setImageSize(0);\n        history.push(`/feed/@${postid}/image/:0`);\n      } else {\n        await this.setImageSize(parseInt(index) + 1);\n        history.push(`/feed/@${postid}/image/:${parseInt(index) + 1}`);\n      }\n    };\n\n    this.handleCommentAdd = async () => {\n      const _this$props9 = this.props,\n            TimelineActions = _this$props9.TimelineActions,\n            CommentActions = _this$props9.CommentActions,\n            presentPost = _this$props9.presentPost,\n            postid = _this$props9.postid;\n      const id = postid.substr(1);\n\n      if (presentPost.getIn(['feed', 'trueComment'])) {\n        const page = presentPost.getIn(['feed', 'commentPage']);\n\n        try {\n          await CommentActions.showPostCommentList(id, page);\n          await TimelineActions.setDetailCommentPage(id);\n          const _this$props10 = this.props,\n                comments = _this$props10.comments,\n                lastComment = _this$props10.lastComment;\n          if (lastComment) await TimelineActions.setDetailCommentList({\n            'commentId': id,\n            'commentList': comments,\n            'trueComment': false\n          });else await TimelineActions.setDetailCommentList({\n            'commentId': id,\n            'commentList': comments,\n            'trueComment': true\n          });\n          await this.setCommentTime(id);\n        } catch (e) {\n          TimelineActions.setCommentFalse(id);\n        }\n      }\n    };\n\n    this.enterComment = async e => {\n      if (window.event.keyCode === 13) {\n        const _this$props11 = this.props,\n              CommentActions = _this$props11.CommentActions,\n              TimelineActions = _this$props11.TimelineActions,\n              postid = _this$props11.postid;\n        const innerText = e.target.innerText;\n        const id = postid.substr(1);\n        var content = innerText;\n        content = content.replace(/\\r/g, \"\");\n        content = content.replace(/\\n/g, \"\");\n        await CommentActions.writeComment({\n          id,\n          content\n        });\n        await CommentActions.showPostCommentList(id, 1);\n        this.renewComment(id);\n\n        for (var i = 0; i < document.getElementsByName('^^comment').length; i++) {\n          console.log(document.getElementsByName('^^comment')[i].id);\n\n          if (parseInt(document.getElementsByName('^^comment')[i].id) === parseInt(id)) {\n            document.getElementsByName('^^comment')[i].textContent = '';\n            document.getElementsByName('^^comment')[i].blur();\n          }\n        }\n\n        await CommentActions.getCommentNum(id);\n        var commentNum = this.props.commentNum;\n        await TimelineActions.setCommentNum({\n          'commentNum': commentNum,\n          'commentId': id\n        });\n        await this.setCommentTime(id);\n      }\n    };\n\n    this.renewComment = id => setTimeout(async () => {\n      const _this$props12 = this.props,\n            presentComment = _this$props12.presentComment,\n            TimelineActions = _this$props12.TimelineActions;\n      await TimelineActions.renewDetailComment({\n        'commentId': id,\n        'presentComment': presentComment\n      });\n      await this.setCommentTime(id);\n    }, 2000);\n\n    this.handleLikeClick = async e => {\n      const _this$props13 = this.props,\n            LikeActions = _this$props13.LikeActions,\n            TimelineActions = _this$props13.TimelineActions;\n      const id = e.target.id;\n      await TimelineActions.setLikeKey(id);\n      await LikeActions.clickLike(id);\n      await TimelineActions.setDetailLike('none');\n      await TimelineActions.setLike('none');\n\n      try {\n        await LikeActions.getLikeAndUserList(id, 1);\n      } catch (e) {}\n\n      const totalNum = this.props.totalNum;\n      await TimelineActions.setDetailLikeNum(totalNum);\n      await TimelineActions.setLikeNum(totalNum);\n    };\n\n    this.handleCancelClick = async e => {\n      const _this$props14 = this.props,\n            LikeActions = _this$props14.LikeActions,\n            TimelineActions = _this$props14.TimelineActions;\n      const id = e.target.id;\n      await TimelineActions.setLikeKey(id);\n      await LikeActions.cancelLike(id);\n      await TimelineActions.setDetailLike('block');\n      await TimelineActions.setLike('block');\n\n      try {\n        await LikeActions.getLikeAndUserList(id, 1);\n      } catch (e) {}\n\n      const totalNum = this.props.totalNum;\n      await TimelineActions.setDetailLikeNum(totalNum);\n      await TimelineActions.setLikeNum(totalNum);\n    };\n  }\n\n  render() {\n    if (!storage.get('loggedInfo')) {\n      return null;\n    }\n\n    const _storage$get = storage.get('loggedInfo'),\n          thumbnail = _storage$get.thumbnail,\n          username = _storage$get.username,\n          nickname = _storage$get.nickname;\n\n    const _this$props15 = this.props,\n          presentPost = _this$props15.presentPost,\n          commentList = _this$props15.commentList,\n          fileSize = _this$props15.fileSize,\n          imageIndex = _this$props15.imageIndex,\n          history = _this$props15.history,\n          trueComment = _this$props15.trueComment,\n          postid = _this$props15.postid;\n    const handleLeft = this.handleLeft,\n          handleRight = this.handleRight,\n          enterComment = this.enterComment,\n          handleCommentAdd = this.handleCommentAdd,\n          handleCancelClick = this.handleCancelClick,\n          handleLikeClick = this.handleLikeClick;\n    let index = imageIndex.substr(1);\n    let postId = postid.substr(1);\n    return React.createElement(DetailPostView, {\n      mainfeed: presentPost.toJS(),\n      fileSize: fileSize,\n      imageIndex: index,\n      history: history,\n      handleLeft: handleLeft,\n      handleRight: handleRight,\n      pageCount: this.state.pageCount,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(CommentList, {\n      comments: commentList,\n      commentThumbnail: thumbnail,\n      name: nickname,\n      userId: username,\n      enterComment: enterComment,\n      handleCommentAdd: handleCommentAdd,\n      trueComment: trueComment,\n      postId: postId,\n      mainfeed: presentPost.toJS(),\n      cancel: handleCancelClick,\n      like: handleLikeClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default connect(state => ({\n  presentPost: state.timeline.get('presentPost'),\n  lastComment: state.comment.get('lastComment'),\n  comments: state.comment.get('commentList'),\n  commentList: state.timeline.getIn(['presentPost', 'feed', 'commentList']),\n  fileSize: state.post.get('fileSize'),\n  commentNum: state.comment.get('commentNum'),\n  trueComment: state.timeline.getIn(['presentPost', 'feed', 'trueComment']),\n  totalNum: state.like.get('totalNum'),\n  presentComment: state.comment.get('presentComment')\n}), dispatch => ({\n  TimelineActions: bindActionCreators(timelineActions, dispatch),\n  CommentActions: bindActionCreators(commentActions, dispatch),\n  PostActions: bindActionCreators(postActions, dispatch),\n  LikeActions: bindActionCreators(likeActions, dispatch)\n}))(PostDetailContainer);","map":{"version":3,"sources":["C:/Users/user/fronttimeline/src/containers/Base/PostDetailContainer.js"],"names":["React","Component","connect","bindActionCreators","storage","timelineActions","commentActions","postActions","likeActions","CommentList","DetailPostView","PostDetailContainer","state","pageCount","componentDidMount","renderPageInfo","renderCommentInfo","setImageSize","index","props","presentPost","PostActions","imageSize","getImageSize","getIn","setFileSize","postid","TimelineActions","imageIndex","substr","id","getFeedInformationDetail","setPostTime","setImageArrowVisible","url","Promise","resolve","reject","image","Image","onload","width","naturalWidth","height","naturalHeight","src","CommentActions","page","showPostCommentList","setDetailCommentPage","comments","lastComment","setDetailCommentList","setCommentTime","time","timestring","dateTimeToFormatted","setDetailTime","commentList","all","map","comment","commentIndex","timestamp","setDetailCommentTime","handleLeft","history","size","setState","parseInt","push","handleRight","handleCommentAdd","e","setCommentFalse","enterComment","window","event","keyCode","innerText","target","content","replace","writeComment","renewComment","i","document","getElementsByName","length","console","log","textContent","blur","getCommentNum","commentNum","setCommentNum","setTimeout","presentComment","renewDetailComment","handleLikeClick","LikeActions","setLikeKey","clickLike","setDetailLike","setLike","getLikeAndUserList","totalNum","setDetailLikeNum","setLikeNum","handleCancelClick","cancelLike","render","get","thumbnail","username","nickname","fileSize","trueComment","postId","toJS","timeline","post","like","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport storage from '../../lib/storage';\r\nimport * as timelineActions from '../../redux/modules/timeline';\r\nimport * as commentActions from '../../redux/modules/comment';\r\nimport * as postActions from '../../redux/modules/post';\r\nimport * as likeActions from '../../redux/modules/like';\r\nimport {CommentList,DetailPostView} from '../../components/DetailPost';\r\nclass PostDetailContainer extends Component{\r\n    state = {\r\n        pageCount : 0\r\n    }\r\n    componentDidMount=async()=>{\r\n        await this.renderPageInfo();\r\n        await this.renderCommentInfo();\r\n    }\r\n    \r\n    setImageSize=async(index)=>{\r\n        const{presentPost,PostActions} = this.props;\r\n        let imageSize = await this.getImageSize(presentPost.getIn(['feed','files',index,'original']));\r\n        await PostActions.setFileSize(imageSize);\r\n    }\r\n    renderPageInfo=async()=>{\r\n    const {postid,TimelineActions,PostActions,imageIndex} = this.props;\r\n    let index = imageIndex.substr(1);\r\n    const id = postid.substr(1);\r\n    await TimelineActions.getFeedInformationDetail(id);\r\n    await this.setPostTime();\r\n    const{presentPost} = this.props;\r\n    await this.setImageSize(index);\r\n    if(presentPost.getIn(['feed','files']) > 1)\r\n        TimelineActions.setImageArrowVisible('block');\r\n    }\r\n    getImageSize= (url)=> {\r\n        return new Promise((resolve, reject) => {\r\n          let image = new Image()\r\n          image.onload = () => {\r\n            resolve({\r\n              width: image.naturalWidth,\r\n              height: image.naturalHeight\r\n            })\r\n          }\r\n          image.src = url\r\n        })\r\n      }\r\n    renderCommentInfo =async()=>{\r\n        const {CommentActions,TimelineActions,presentPost,postid} = this.props;\r\n        const id = postid.substr(1);\r\n        let page = presentPost.getIn(['feed','commentPage']);\r\n            await CommentActions.showPostCommentList(id,page);\r\n            await TimelineActions.setDetailCommentPage(id);\r\n            const{comments,lastComment}=this.props;\r\n            if(lastComment)\r\n            await TimelineActions.setDetailCommentList({'commentId' : id,'commentList':comments,'trueComment' :false});\r\n            else\r\n            await TimelineActions.setDetailCommentList({'commentId' : id,'commentList':comments,'trueComment' :true});\r\n            await this.setCommentTime();\r\n    }\r\n    setPostTime = async() => {\r\n        const{presentPost,TimelineActions} = this.props;\r\n        let time = presentPost.getIn(['feed','timestamp']);\r\n        let timestring = this.dateTimeToFormatted(time);\r\n        await TimelineActions.setDetailTime(timestring);\r\n    }\r\n\r\n    setCommentTime = async() => {\r\n        const{presentPost,TimelineActions,commentList} = this.props;\r\n        const comments = commentList;\r\n                await Promise.all(\r\n                    comments.map(\r\n                        async(comment,commentIndex) => {\r\n                            let time = comment.timestamp;\r\n                            let timestring = this.dateTimeToFormatted(time);\r\n                            await TimelineActions.setDetailCommentTime({timestring:timestring,commentIndex:commentIndex});\r\n                        }\r\n                    )\r\n                );\r\n    }\r\n    handleLeft = async() => {\r\n        const {presentPost,imageIndex,history,postid,PostActions} = this.props;\r\n        let index = imageIndex.substr(1);\r\n        let imageSize = presentPost.getIn(['feed','files']).size;\r\n        this.setState({\r\n            pageCount : this.state.pageCount + 1\r\n        });\r\n        if(parseInt(index) === 0) {\r\n            await this.setImageSize(imageSize -1);\r\n            history.push(`/feed/@${postid}/image/:${imageSize-1}`);\r\n        }\r\n        else {\r\n            await this.setImageSize(parseInt(index)-1);\r\n            history.push(`/feed/@${postid}/image/:${parseInt(index)-1}`);\r\n        }\r\n    }\r\n    handleRight = async() => {\r\n        const {presentPost,imageIndex,history,postid,PostActions} = this.props;\r\n        let index = imageIndex.substr(1);\r\n        let size = await this.getImageSize(presentPost.getIn(['feed','files',index,'original']));\r\n        PostActions.setFileSize(size);\r\n        this.setState({\r\n            pageCount : this.state.pageCount + 1\r\n        });\r\n        let imageSize = presentPost.getIn(['feed','files']).size;\r\n        if(parseInt(index) === imageSize-1) {\r\n            await this.setImageSize(0);\r\n            history.push(`/feed/@${postid}/image/:0`);\r\n        }\r\n        else {\r\n            await this.setImageSize(parseInt(index)+1);\r\n            history.push(`/feed/@${postid}/image/:${parseInt(index)+1}`);\r\n        }\r\n    }\r\n    handleCommentAdd = async() =>{\r\n        const {TimelineActions,CommentActions,presentPost,postid} = this.props;\r\n        const id = postid.substr(1);\r\n        if(presentPost.getIn(['feed','trueComment'])){\r\n            \r\n            const page = presentPost.getIn(['feed','commentPage']);\r\n            try{\r\n                await CommentActions.showPostCommentList(id,page);\r\n                await TimelineActions.setDetailCommentPage(id);\r\n                const{comments,lastComment}=this.props;\r\n            if(lastComment)\r\n            await TimelineActions.setDetailCommentList({'commentId':id,'commentList':comments,'trueComment' :false});\r\n            else\r\n            await TimelineActions.setDetailCommentList({'commentId':id,'commentList':comments,'trueComment' :true});\r\n            await this.setCommentTime(id);\r\n            }catch(e){\r\n                TimelineActions.setCommentFalse(id);\r\n            }\r\n        } \r\n    }\r\n    enterComment = async(e) =>{\r\n        if(window.event.keyCode === 13){\r\n            const {CommentActions,TimelineActions,postid} = this.props;\r\n            const {innerText} = e.target;\r\n            const id = postid.substr(1);\r\n            var content = innerText;\r\n            content = content.replace(/\\r/g, \"\");\r\n            content = content.replace(/\\n/g, \"\");\r\n            await CommentActions.writeComment({id,content});\r\n            await CommentActions.showPostCommentList(id,1);\r\n            this.renewComment(id);\r\n            \r\n            for(var i = 0; i < document.getElementsByName('^^comment').length; i++){\r\n                console.log(document.getElementsByName('^^comment')[i].id);\r\n                if(parseInt(document.getElementsByName('^^comment')[i].id) === parseInt(id)){\r\n                    document.getElementsByName('^^comment')[i].textContent = '';\r\n                    document.getElementsByName('^^comment')[i].blur();\r\n                }\r\n            }\r\n            await CommentActions.getCommentNum(id);\r\n            var {commentNum} = this.props;\r\n            await TimelineActions.setCommentNum({'commentNum':commentNum,'commentId':id});\r\n            await this.setCommentTime(id);\r\n            \r\n        }\r\n    }\r\n    renewComment=(id)=>\r\n        setTimeout(async()=>{\r\n            const {presentComment,TimelineActions} = this.props;\r\n            await TimelineActions.renewDetailComment({'commentId' : id,'presentComment':presentComment});\r\n            await this.setCommentTime(id);\r\n        },2000);\r\n        handleLikeClick = async(e) =>{\r\n            const {LikeActions,TimelineActions} = this.props;\r\n            const id = e.target.id;\r\n            await TimelineActions.setLikeKey(id);\r\n            await LikeActions.clickLike(id);\r\n            await TimelineActions.setDetailLike('none');\r\n            await TimelineActions.setLike('none');\r\n            try{\r\n            await LikeActions.getLikeAndUserList(id,1);\r\n            }catch(e){}\r\n            const {totalNum} = this.props;\r\n            await TimelineActions.setDetailLikeNum(totalNum);\r\n            await TimelineActions.setLikeNum(totalNum);\r\n               \r\n        }\r\n        handleCancelClick =async(e) => {\r\n            const {LikeActions,TimelineActions} = this.props;\r\n            const id = e.target.id;\r\n            await TimelineActions.setLikeKey(id);\r\n            await LikeActions.cancelLike(id);\r\n            await TimelineActions.setDetailLike('block');\r\n            await TimelineActions.setLike('block');\r\n            try{\r\n            await LikeActions.getLikeAndUserList(id,1);\r\n            }catch(e){}\r\n            const {totalNum} = this.props;\r\n            await TimelineActions.setDetailLikeNum(totalNum);\r\n            await TimelineActions.setLikeNum(totalNum);\r\n        }\r\n    render(){\r\n        if(!storage.get('loggedInfo')) {\r\n            \r\n            return null;\r\n        }\r\n        const {thumbnail,username,nickname} = storage.get('loggedInfo');\r\n        const {presentPost,commentList,fileSize,imageIndex,history,trueComment,postid} = this.props;\r\n        const {handleLeft,handleRight,enterComment,handleCommentAdd,handleCancelClick,\r\n            handleLikeClick} = this;\r\n        let index = imageIndex.substr(1);\r\n        let postId = postid.substr(1);\r\n        return (\r\n            <DetailPostView mainfeed = {presentPost.toJS()}  fileSize = {fileSize} imageIndex = {index}\r\n             history={history} handleLeft={handleLeft} handleRight={handleRight} pageCount = {this.state.pageCount} > \r\n                <CommentList comments = {commentList} commentThumbnail = {thumbnail} name={nickname}\r\n            userId= {username} enterComment = {enterComment} handleCommentAdd = {handleCommentAdd}\r\n            trueComment = {trueComment} postId={postId} mainfeed = {presentPost.toJS()} cancel={handleCancelClick}\r\n            like = {handleLikeClick}/>\r\n            </DetailPostView>\r\n        )\r\n    }\r\n}\r\nexport default connect(\r\n    (state) => ({\r\n        presentPost : state.timeline.get('presentPost'),\r\n        lastComment : state.comment.get('lastComment'),\r\n        comments : state.comment.get('commentList'),\r\n        commentList : state.timeline.getIn(['presentPost','feed','commentList']),\r\n        fileSize : state.post.get('fileSize'),\r\n        commentNum : state.comment.get('commentNum'),\r\n        trueComment : state.timeline.getIn(['presentPost','feed','trueComment']),\r\n        totalNum : state.like.get('totalNum'),\r\n        presentComment : state.comment.get('presentComment')\r\n    }),\r\n    (dispatch) => ({\r\n        TimelineActions : bindActionCreators(timelineActions,dispatch),\r\n        CommentActions : bindActionCreators(commentActions,dispatch),\r\n        PostActions : bindActionCreators(postActions,dispatch),\r\n        LikeActions : bindActionCreators(likeActions,dispatch)\r\n    })\r\n)(PostDetailContainer);"]},"metadata":{},"sourceType":"module"}