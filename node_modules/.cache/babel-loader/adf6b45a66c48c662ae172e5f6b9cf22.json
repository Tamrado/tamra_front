{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\fronttimeline\\\\src\\\\containers\\\\User\\\\UserModify.js\";\nimport React, { Component } from 'react';\nimport { AuthContent, InputWithLabel, AuthButton, AuthError, Label } from '../../components/Auth';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport * as userPageActions from '../../redux/modules/userPage';\nimport * as userActions from '../../redux/modules/user';\nimport * as authActions from '../../redux/modules/auth';\nimport * as postActions from '../../redux/modules/post';\nimport storage from '../..//lib/storage';\nimport { setError, validate, checkEmailExists, checkPhoneExists, inputStyle, setAuthActions, setPassword } from '../Function/ValidateModule';\nimport { Popup } from '../../components/Popup';\n\nclass UserModify extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.checkIfUserPassed = () => {\n      const username = this.props.username;\n      if (!storage.get('passed')) window.location.href = '/@' + username + \"/password\";else storage.remove('passed');\n    };\n\n    this.initialModifyInfo = async () => {\n      const _this$props = this.props,\n            username = _this$props.username,\n            UserPageActions = _this$props.UserPageActions;\n\n      try {\n        await UserPageActions.checkUserAndGetUser();\n        const user = this.props.result.toJS();\n        UserPageActions.setUserData(user);\n      } catch (e) {\n        console.log(e);\n        window.location.replace('/@' + username + \"/password\");\n      }\n    };\n\n    this.checkedChange = e => {\n      const UserPageActions = this.props.UserPageActions;\n      const _e$target$checked = e.target.checked,\n            name = _e$target$checked.name,\n            value = _e$target$checked.value;\n      UserPageActions.changeInput({\n        name,\n        value,\n        form: 'User'\n      });\n    };\n\n    this.defaultNullChange = e => {\n      const UserPageActions = this.props.UserPageActions;\n      const _e$target = e.target,\n            name = _e$target.name,\n            value = _e$target.value;\n      UserPageActions.changeInput({\n        name,\n        value,\n        form: 'User'\n      });\n    };\n\n    this.handleChange = e => {\n      const UserPageActions = this.props.UserPageActions;\n      const _e$target2 = e.target,\n            name = _e$target2.name,\n            value = _e$target2.value;\n      UserPageActions.changeInput({\n        name,\n        value,\n        form: 'User'\n      });\n      setPassword(this.props.password);\n      const validation = validate[name](value);\n      if (name.indexOf('password') > -1 || !validation) return;\n      if (name.indexOf('email') > -1) checkEmailExists(value);else if (name.indexOf('phone') > -1) checkPhoneExists(value);\n    };\n\n    this.handleLocalRegister = async () => {\n      const _this$props2 = this.props,\n            form = _this$props2.form,\n            UserPageActions = _this$props2.UserPageActions,\n            error = _this$props2.error,\n            PostActions = _this$props2.PostActions;\n\n      const _form$toJS = form.toJS(),\n            email = _form$toJS.email,\n            id = _form$toJS.id,\n            password = _form$toJS.password,\n            passwordConfirm = _form$toJS.passwordConfirm,\n            phone = _form$toJS.phone,\n            name = _form$toJS.name,\n            comment = _form$toJS.comment,\n            address = _form$toJS.address,\n            gender = _form$toJS.gender,\n            birthday = _form$toJS.birthday;\n\n      if (error) return; //현재 에러 있는 상태라면 진행 x\n\n      if (!validate['email'](email) || !validate['password'](password) || !validate['passwordConfirm'](passwordConfirm) || !validate['name'](name) || !validate['comment'](comment) || !validate['phone'](phone) || !validate['gender'](gender)) {\n        //하나라도 실패하면 진행 하지 않음\n        return;\n      }\n\n      try {\n        await UserPageActions.modifyUserInfo({\n          email,\n          id,\n          password,\n          name,\n          comment,\n          phone,\n          address,\n          gender,\n          birthday\n        });\n        storage.remove('passed');\n        PostActions.setPopupDisplay('block');\n      } catch (e) {\n        if (e.response.status === 411) setError('조건에 맞는 데이터를 입력해주세요.', 'main');\n        if (e.response.status === 409) setError('다른 회원과 일치하는 데이터가 있습니다. 다시 입력해주세요.', 'main');\n      }\n    };\n\n    this.handlePopupOk = () => {\n      const _this$props3 = this.props,\n            PostActions = _this$props3.PostActions,\n            history = _this$props3.history;\n      PostActions.setPopupDisplay('none');\n      history.push('/');\n    };\n  }\n\n  componentDidMount() {\n    this.checkIfUserPassed();\n    this.initialModifyInfo();\n    setAuthActions(this.props.AuthActions);\n  }\n\n  componentWillUnmount() {\n    const UserPageActions = this.props.UserPageActions;\n    UserPageActions.initializeForm('User');\n  }\n\n  render() {\n    const _this$props4 = this.props,\n          error = _this$props4.error,\n          form = _this$props4.form,\n          errorId = _this$props4.errorId,\n          popupDisplay = _this$props4.popupDisplay;\n\n    const _form$toJS2 = form.toJS(),\n          id = _form$toJS2.id,\n          password = _form$toJS2.password,\n          passwordConfirm = _form$toJS2.passwordConfirm,\n          email = _form$toJS2.email,\n          name = _form$toJS2.name,\n          phone = _form$toJS2.phone,\n          birthday = _form$toJS2.birthday,\n          comment = _form$toJS2.comment,\n          address = _form$toJS2.address,\n          gender = _form$toJS2.gender;\n\n    const handleChange = this.handleChange,\n          handleLocalRegister = this.handleLocalRegister,\n          defaultNullChange = this.defaultNullChange,\n          checkedChange = this.checkedChange,\n          handlePopupOk = this.handlePopupOk;\n    console.log(gender);\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(AuthContent, {\n      title: \"MY PAGE\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(InputWithLabel, {\n      label: \"\\uC544\\uC774\\uB514\",\n      name: \"id\",\n      placeholder: \"\\uC544\\uC774\\uB514\",\n      value: id,\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), !id.includes('Kakao') && React.createElement(InputWithLabel, {\n      label: \"\\uBE44\\uBC00\\uBC88\\uD638\",\n      name: \"password\",\n      placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638\",\n      type: \"password\",\n      value: password,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), errorId === 'password' && error && React.createElement(AuthError, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, error), !id.includes('Kakao') && React.createElement(InputWithLabel, {\n      label: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\",\n      name: \"passwordConfirm\",\n      placeholder: \"\\uB2E4\\uC2DC \\uD55C\\uBC88 \\uC785\\uB825\",\n      type: \"password\",\n      value: passwordConfirm,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), errorId === 'passwordConfirm' && error && React.createElement(AuthError, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, error), React.createElement(InputWithLabel, {\n      label: \"\\uC0DD\\uB144\\uC6D4\\uC77C\",\n      name: \"birthday\",\n      type: \"date\",\n      value: birthday,\n      onChange: defaultNullChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }), errorId === 'birthday' && error && React.createElement(AuthError, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, error), React.createElement(InputWithLabel, {\n      label: \"\\uC774\\uBA54\\uC77C\",\n      name: \"email\",\n      placeholder: \"timeline@naver.com\",\n      type: \"email\",\n      defaultValue: email,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }), errorId === 'email' && error && React.createElement(AuthError, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, error), React.createElement(InputWithLabel, {\n      label: \"\\uD578\\uB4DC\\uD3F0 \\uBC88\\uD638\",\n      name: \"phone\",\n      placeholder: \"010-1234-1234\",\n      defaultValue: phone,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }), errorId === 'phone' && error && React.createElement(AuthError, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, error), React.createElement(InputWithLabel, {\n      label: \"\\uC774\\uB984\",\n      name: \"name\",\n      placeholder: \"\\uC774\\uB984\",\n      defaultValue: name,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }), errorId === 'name' && error && React.createElement(AuthError, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, error), React.createElement(InputWithLabel, {\n      label: \"\\uCF54\\uBA58\\uD2B8\",\n      name: \"comment\",\n      placeholder: \"\\uBC18\\uAC11\\uC2B5\\uB2C8\\uB2E4.\",\n      defaultValue: comment,\n      onChange: handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }), \" \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), errorId === 'comment' && error && React.createElement(AuthError, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, error), React.createElement(Label, {\n      label: \"\\uC131\\uBCC4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }), errorId === 'gender' && error && React.createElement(AuthError, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, error), React.createElement(\"input\", {\n      style: inputStyle,\n      name: \"gender\",\n      type: \"radio\",\n      value: Number('0'),\n      onChange: checkedChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), \"\\uC5EC\\uC790\", React.createElement(\"input\", {\n      style: inputStyle,\n      name: \"gender\",\n      type: \"radio\",\n      value: Number('1'),\n      onChange: checkedChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }), \"\\uB0A8\\uC790\", React.createElement(\"input\", {\n      style: inputStyle,\n      name: \"gender\",\n      type: \"radio\",\n      value: Number('2'),\n      onChange: checkedChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }), \"others\", React.createElement(InputWithLabel, {\n      label: \"\\uC8FC\\uC18C\",\n      name: \"address\",\n      placeholder: \"\\uC11C\\uC6B8\",\n      defaultValue: address,\n      onChange: defaultNullChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), errorId === 'address' && error && React.createElement(AuthError, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, error), React.createElement(AuthButton, {\n      onClick: handleLocalRegister,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, \"\\uD655\\uC778\"), errorId === 'main' && error && React.createElement(AuthError, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, error)), React.createElement(Popup, {\n      handlePopupOk: handlePopupOk,\n      right: '20%',\n      top: '100px',\n      display: popupDisplay,\n      text: '회원가입이 완료었습니다.',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default connect(state => ({\n  form: state.userPage.getIn(['User', 'form']),\n  error: state.userPage.getIn(['User', 'error']),\n  errorId: state.auth.getIn(['register', 'errorId']),\n  result: state.userPage.get('result'),\n  userPage: state.userPage,\n  password: state.userPage.getIn(['User', 'form', 'password']),\n  popupDisplay: state.post.get('popupDisplay')\n}), dispatch => ({\n  UserPageActions: bindActionCreators(userPageActions, dispatch),\n  UserActions: bindActionCreators(userActions, dispatch),\n  AuthActions: bindActionCreators(authActions, dispatch),\n  PostActions: bindActionCreators(postActions, dispatch)\n}))(UserModify);","map":{"version":3,"sources":["C:/Users/user/fronttimeline/src/containers/User/UserModify.js"],"names":["React","Component","AuthContent","InputWithLabel","AuthButton","AuthError","Label","bindActionCreators","connect","userPageActions","userActions","authActions","postActions","storage","setError","validate","checkEmailExists","checkPhoneExists","inputStyle","setAuthActions","setPassword","Popup","UserModify","checkIfUserPassed","username","props","get","window","location","href","remove","initialModifyInfo","UserPageActions","checkUserAndGetUser","user","result","toJS","setUserData","e","console","log","replace","checkedChange","target","checked","name","value","changeInput","form","defaultNullChange","handleChange","password","validation","indexOf","handleLocalRegister","error","PostActions","email","id","passwordConfirm","phone","comment","address","gender","birthday","modifyUserInfo","setPopupDisplay","response","status","handlePopupOk","history","push","componentDidMount","AuthActions","componentWillUnmount","initializeForm","render","errorId","popupDisplay","includes","Number","state","userPage","getIn","auth","post","dispatch","UserActions"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,SAAQC,WAAR,EAAoBC,cAApB,EAAmCC,UAAnC,EAA8CC,SAA9C,EAAwDC,KAAxD,QAAoE,uBAApE;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,OAAO,KAAKC,eAAZ,MAAiC,8BAAjC;AACA,OAAO,KAAKC,WAAZ,MAA6B,0BAA7B;AACA,OAAO,KAAKC,WAAZ,MAA6B,0BAA7B;AACA,OAAO,KAAKC,WAAZ,MAA6B,0BAA7B;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,SAAQC,QAAR,EAAiBC,QAAjB,EAA0BC,gBAA1B,EAA2CC,gBAA3C,EAA4DC,UAA5D,EACKC,cADL,EACoBC,WADpB,QACsC,4BADtC;AAEI,SAAQC,KAAR,QAAoB,wBAApB;;AAEJ,MAAMC,UAAN,SAAyBrB,SAAzB,CAAkC;AAAA;AAAA;;AAAA,SAE9BsB,iBAF8B,GAEV,MAAM;AAAA,YAChBC,QADgB,GACJ,KAAKC,KADD,CAChBD,QADgB;AAEtB,UAAG,CAACX,OAAO,CAACa,GAAR,CAAY,QAAZ,CAAJ,EAA2BC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,OAAOL,QAAP,GAAiB,WAAxC,CAA3B,KACKX,OAAO,CAACiB,MAAR,CAAe,QAAf;AACR,KAN6B;;AAAA,SAQ9BC,iBAR8B,GAQV,YAAW;AAAA,0BACO,KAAKN,KADZ;AAAA,YACrBD,QADqB,eACrBA,QADqB;AAAA,YACZQ,eADY,eACZA,eADY;;AAE3B,UAAG;AACH,cAAMA,eAAe,CAACC,mBAAhB,EAAN;AACA,cAAMC,IAAI,GAAG,KAAKT,KAAL,CAAWU,MAAX,CAAkBC,IAAlB,EAAb;AACAJ,QAAAA,eAAe,CAACK,WAAhB,CAA4BH,IAA5B;AAEC,OALD,CAMA,OAAMI,CAAN,EAAQ;AACJC,QAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACAX,QAAAA,MAAM,CAACC,QAAP,CAAgBa,OAAhB,CAAwB,OAAOjB,QAAP,GAAiB,WAAzC;AACH;AACJ,KApB6B;;AAAA,SAiC9BkB,aAjC8B,GAiCbJ,CAAD,IAAM;AAAA,YACXN,eADW,GACQ,KAAKP,KADb,CACXO,eADW;AAAA,gCAEIM,CAAC,CAACK,MAAF,CAASC,OAFb;AAAA,YAEXC,IAFW,qBAEXA,IAFW;AAAA,YAELC,KAFK,qBAELA,KAFK;AAGlBd,MAAAA,eAAe,CAACe,WAAhB,CAA4B;AAC1BF,QAAAA,IAD0B;AAE1BC,QAAAA,KAF0B;AAG1BE,QAAAA,IAAI,EAAE;AAHoB,OAA5B;AAKH,KAzC6B;;AAAA,SA2C9BC,iBA3C8B,GA2CTX,CAAD,IAAM;AAAA,YACfN,eADe,GACI,KAAKP,KADT,CACfO,eADe;AAAA,wBAEAM,CAAC,CAACK,MAFF;AAAA,YAEfE,IAFe,aAEfA,IAFe;AAAA,YAETC,KAFS,aAETA,KAFS;AAGtBd,MAAAA,eAAe,CAACe,WAAhB,CAA4B;AAC1BF,QAAAA,IAD0B;AAE1BC,QAAAA,KAF0B;AAG1BE,QAAAA,IAAI,EAAE;AAHoB,OAA5B;AAKH,KAnD6B;;AAAA,SAoD9BE,YApD8B,GAoDdZ,CAAD,IAAM;AAAA,YACdN,eADc,GACK,KAAKP,KADV,CACdO,eADc;AAAA,yBAECM,CAAC,CAACK,MAFH;AAAA,YAEdE,IAFc,cAEdA,IAFc;AAAA,YAERC,KAFQ,cAERA,KAFQ;AAGrBd,MAAAA,eAAe,CAACe,WAAhB,CAA4B;AAC1BF,QAAAA,IAD0B;AAE1BC,QAAAA,KAF0B;AAG1BE,QAAAA,IAAI,EAAE;AAHoB,OAA5B;AAKA5B,MAAAA,WAAW,CAAC,KAAKK,KAAL,CAAW0B,QAAZ,CAAX;AACA,YAAMC,UAAU,GAAGrC,QAAQ,CAAC8B,IAAD,CAAR,CAAeC,KAAf,CAAnB;AACA,UAAGD,IAAI,CAACQ,OAAL,CAAa,UAAb,IAA2B,CAAC,CAA5B,IAAiC,CAACD,UAArC,EAAiD;AACjD,UAAIP,IAAI,CAACQ,OAAL,CAAa,OAAb,IAAwB,CAAC,CAA7B,EACIrC,gBAAgB,CAAC8B,KAAD,CAAhB,CADJ,KAEM,IAAGD,IAAI,CAACQ,OAAL,CAAa,OAAb,IAAwB,CAAC,CAA5B,EACFpC,gBAAgB,CAAC6B,KAAD,CAAhB;AACP,KAnEiC;;AAAA,SAoElCQ,mBApEkC,GAoEZ,YAAY;AAAA,2BACoB,KAAK7B,KADzB;AAAA,YACxBuB,IADwB,gBACxBA,IADwB;AAAA,YAClBhB,eADkB,gBAClBA,eADkB;AAAA,YACDuB,KADC,gBACDA,KADC;AAAA,YACKC,WADL,gBACKA,WADL;;AAAA,yBAE4DR,IAAI,CAACZ,IAAL,EAF5D;AAAA,YAEvBqB,KAFuB,cAEvBA,KAFuB;AAAA,YAEhBC,EAFgB,cAEhBA,EAFgB;AAAA,YAEbP,QAFa,cAEbA,QAFa;AAAA,YAEHQ,eAFG,cAEHA,eAFG;AAAA,YAEcC,KAFd,cAEcA,KAFd;AAAA,YAEoBf,IAFpB,cAEoBA,IAFpB;AAAA,YAEyBgB,OAFzB,cAEyBA,OAFzB;AAAA,YAEiCC,OAFjC,cAEiCA,OAFjC;AAAA,YAEyCC,MAFzC,cAEyCA,MAFzC;AAAA,YAEgDC,QAFhD,cAEgDA,QAFhD;;AAI9B,UAAGT,KAAH,EAAU,OAJoB,CAIZ;;AAClB,UAAG,CAACxC,QAAQ,CAAC,OAAD,CAAR,CAAkB0C,KAAlB,CAAD,IACA,CAAC1C,QAAQ,CAAC,UAAD,CAAR,CAAqBoC,QAArB,CADD,IAEA,CAACpC,QAAQ,CAAC,iBAAD,CAAR,CAA4B4C,eAA5B,CAFD,IAGA,CAAC5C,QAAQ,CAAC,MAAD,CAAR,CAAiB8B,IAAjB,CAHD,IAIA,CAAC9B,QAAQ,CAAC,SAAD,CAAR,CAAoB8C,OAApB,CAJD,IAKA,CAAC9C,QAAQ,CAAC,OAAD,CAAR,CAAkB6C,KAAlB,CALD,IAMA,CAAC7C,QAAQ,CAAC,QAAD,CAAR,CAAmBgD,MAAnB,CANJ,EAOC;AACG;AACA;AACH;;AAED,UAAG;AACC,cAAM/B,eAAe,CAACiC,cAAhB,CAA+B;AACjCR,UAAAA,KADiC;AAC3BC,UAAAA,EAD2B;AACxBP,UAAAA,QADwB;AACfN,UAAAA,IADe;AACVgB,UAAAA,OADU;AACFD,UAAAA,KADE;AACIE,UAAAA,OADJ;AACYC,UAAAA,MADZ;AACmBC,UAAAA;AADnB,SAA/B,CAAN;AAGAnD,QAAAA,OAAO,CAACiB,MAAR,CAAe,QAAf;AACA0B,QAAAA,WAAW,CAACU,eAAZ,CAA4B,OAA5B;AACC,OANL,CAMM,OAAM5B,CAAN,EAAQ;AACN,YAAGA,CAAC,CAAC6B,QAAF,CAAWC,MAAX,KAAsB,GAAzB,EACItD,QAAQ,CAAC,qBAAD,EAAuB,MAAvB,CAAR;AACR,YAAGwB,CAAC,CAAC6B,QAAF,CAAWC,MAAX,KAAsB,GAAzB,EACQtD,QAAQ,CAAC,mCAAD,EAAqC,MAArC,CAAR;AACX;AACA,KAjG6B;;AAAA,SAkG9BuD,aAlG8B,GAkGd,MAAM;AAAA,2BACW,KAAK5C,KADhB;AAAA,YACZ+B,WADY,gBACZA,WADY;AAAA,YACAc,OADA,gBACAA,OADA;AAElBd,MAAAA,WAAW,CAACU,eAAZ,CAA4B,MAA5B;AACAI,MAAAA,OAAO,CAACC,IAAR,CAAa,GAAb;AACH,KAtG6B;AAAA;;AAsB9BC,EAAAA,iBAAiB,GAAE;AACf,SAAKjD,iBAAL;AACA,SAAKQ,iBAAL;AACAZ,IAAAA,cAAc,CAAC,KAAKM,KAAL,CAAWgD,WAAZ,CAAd;AACH;;AACDC,EAAAA,oBAAoB,GAAE;AAAA,UACX1C,eADW,GACQ,KAAKP,KADb,CACXO,eADW;AAElBA,IAAAA,eAAe,CAAC2C,cAAhB,CAA+B,MAA/B;AAEH;;AAwEDC,EAAAA,MAAM,GAAE;AAAA,yBACsC,KAAKnD,KAD3C;AAAA,UACG8B,KADH,gBACGA,KADH;AAAA,UACSP,IADT,gBACSA,IADT;AAAA,UACc6B,OADd,gBACcA,OADd;AAAA,UACsBC,YADtB,gBACsBA,YADtB;;AAAA,wBAEkF9B,IAAI,CAACZ,IAAL,EAFlF;AAAA,UAEGsB,EAFH,eAEGA,EAFH;AAAA,UAEMP,QAFN,eAEMA,QAFN;AAAA,UAEeQ,eAFf,eAEeA,eAFf;AAAA,UAE+BF,KAF/B,eAE+BA,KAF/B;AAAA,UAEqCZ,IAFrC,eAEqCA,IAFrC;AAAA,UAE0Ce,KAF1C,eAE0CA,KAF1C;AAAA,UAEgDI,QAFhD,eAEgDA,QAFhD;AAAA,UAEyDH,OAFzD,eAEyDA,OAFzD;AAAA,UAEiEC,OAFjE,eAEiEA,OAFjE;AAAA,UAEyEC,MAFzE,eAEyEA,MAFzE;;AAAA,UAGGb,YAHH,GAGqF,IAHrF,CAGGA,YAHH;AAAA,UAGgBI,mBAHhB,GAGqF,IAHrF,CAGgBA,mBAHhB;AAAA,UAGoCL,iBAHpC,GAGqF,IAHrF,CAGoCA,iBAHpC;AAAA,UAGsDP,aAHtD,GAGqF,IAHrF,CAGsDA,aAHtD;AAAA,UAGoE2B,aAHpE,GAGqF,IAHrF,CAGoEA,aAHpE;AAIJ9B,IAAAA,OAAO,CAACC,GAAR,CAAYuB,MAAZ;AACQ,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACJ,oBAAC,WAAD;AAAa,MAAA,KAAK,EAAC,SAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,cAAD;AAAgB,MAAA,KAAK,EAAG,oBAAxB;AAA8B,MAAA,IAAI,EAAC,IAAnC;AAAwC,MAAA,WAAW,EAAC,oBAApD;AACA,MAAA,KAAK,EAAIL,EADT;AAEA,MAAA,QAAQ,MAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,EAIC,CAACA,EAAE,CAACqB,QAAH,CAAY,OAAZ,CAAD,IAAyB,oBAAC,cAAD;AAAgB,MAAA,KAAK,EAAG,0BAAxB;AAA+B,MAAA,IAAI,EAAC,UAApC;AAA+C,MAAA,WAAW,EAAC,0BAA3D;AAC1B,MAAA,IAAI,EAAC,UADqB;AAE1B,MAAA,KAAK,EAAE5B,QAFmB;AAET,MAAA,QAAQ,EAAED,YAFD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJ1B,EAUI2B,OAAO,KAAK,UAAZ,IAAyBtB,KAAzB,IAAkC,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYA,KAAZ,CAVtC,EAaC,CAACG,EAAE,CAACqB,QAAH,CAAY,OAAZ,CAAD,IAAyB,oBAAC,cAAD;AAAgB,MAAA,KAAK,EAAG,uCAAxB;AAAkC,MAAA,IAAI,EAAC,iBAAvC;AAAyD,MAAA,WAAW,EAAC,wCAArE;AAC1B,MAAA,IAAI,EAAC,UADqB;AAE1B,MAAA,KAAK,EAAEpB,eAFmB;AAEF,MAAA,QAAQ,EAAET,YAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAb1B,EAmBI2B,OAAO,KAAK,iBAAZ,IAAgCtB,KAAhC,IAAyC,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYA,KAAZ,CAnB7C,EAsBA,oBAAC,cAAD;AAAgB,MAAA,KAAK,EAAG,0BAAxB;AAA+B,MAAA,IAAI,EAAC,UAApC;AACA,MAAA,IAAI,EAAC,MADL;AAEA,MAAA,KAAK,EAAIS,QAFT;AAEmB,MAAA,QAAQ,EAAEf,iBAF7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtBA,EA2BI4B,OAAO,KAAK,UAAZ,IAAyBtB,KAAzB,IAAkC,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYA,KAAZ,CA3BtC,EA6BA,oBAAC,cAAD;AAAgB,MAAA,KAAK,EAAG,oBAAxB;AAA8B,MAAA,IAAI,EAAC,OAAnC;AAA2C,MAAA,WAAW,EAAC,oBAAvD;AACA,MAAA,IAAI,EAAC,OADL;AAEA,MAAA,YAAY,EAAIE,KAFhB;AAGA,MAAA,QAAQ,EAAEP,YAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA7BA,EAkCI2B,OAAO,KAAK,OAAZ,IAAsBtB,KAAtB,IAA+B,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYA,KAAZ,CAlCnC,EAoCA,oBAAC,cAAD;AAAgB,MAAA,KAAK,EAAG,iCAAxB;AAAiC,MAAA,IAAI,EAAC,OAAtC;AAA8C,MAAA,WAAW,EAAC,eAA1D;AACA,MAAA,YAAY,EAAEK,KADd;AAEA,MAAA,QAAQ,EAAEV,YAFV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApCA,EAwCI2B,OAAO,KAAK,OAAZ,IAAsBtB,KAAtB,IAA+B,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYA,KAAZ,CAxCnC,EA0CA,oBAAC,cAAD;AAAgB,MAAA,KAAK,EAAG,cAAxB;AAA6B,MAAA,IAAI,EAAC,MAAlC;AAAyC,MAAA,WAAW,EAAC,cAArD;AACA,MAAA,YAAY,EAAIV,IADhB;AACsB,MAAA,QAAQ,EAAEK,YADhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA1CA,EA6CI2B,OAAO,KAAK,MAAZ,IAAqBtB,KAArB,IAA8B,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYA,KAAZ,CA7ClC,EA+CA,oBAAC,cAAD;AAAgB,MAAA,KAAK,EAAG,oBAAxB;AAA8B,MAAA,IAAI,EAAC,SAAnC;AAA6C,MAAA,WAAW,EAAC,iCAAzD;AACA,MAAA,YAAY,EAAIM,OADhB;AACyB,MAAA,QAAQ,EAAEX,YADnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA/CA,OAgDoD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAhDpD,EAkDI2B,OAAO,KAAK,SAAZ,IAAwBtB,KAAxB,IAAiC,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYA,KAAZ,CAlDrC,EAoDA,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAG,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MApDA,EAsDIsB,OAAO,KAAK,QAAZ,IAAuBtB,KAAvB,IAAgC,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYA,KAAZ,CAtDpC,EAwDA;AAAO,MAAA,KAAK,EAAGrC,UAAf;AAA2B,MAAA,IAAI,EAAE,QAAjC;AAA0C,MAAA,IAAI,EAAC,OAA/C;AAAuD,MAAA,KAAK,EAAI8D,MAAM,CAAC,GAAD,CAAtE;AAA8E,MAAA,QAAQ,EAAEtC,aAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAxDA,kBAyDA;AAAO,MAAA,KAAK,EAAGxB,UAAf;AAA2B,MAAA,IAAI,EAAC,QAAhC;AAAyC,MAAA,IAAI,EAAC,OAA9C;AAAsD,MAAA,KAAK,EAAI8D,MAAM,CAAC,GAAD,CAArE;AAA8E,MAAA,QAAQ,EAAEtC,aAAxF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAzDA,kBA0DA;AAAO,MAAA,KAAK,EAAGxB,UAAf;AAA2B,MAAA,IAAI,EAAC,QAAhC;AAAyC,MAAA,IAAI,EAAC,OAA9C;AAAsD,MAAA,KAAK,EAAI8D,MAAM,CAAC,GAAD,CAArE;AAA6E,MAAA,QAAQ,EAAEtC,aAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA1DA,YA2DA,oBAAC,cAAD;AAAgB,MAAA,KAAK,EAAE,cAAvB;AAA4B,MAAA,IAAI,EAAE,SAAlC;AAA4C,MAAA,WAAW,EAAC,cAAxD;AAA6D,MAAA,YAAY,EAAIoB,OAA7E;AAAsF,MAAA,QAAQ,EAAEb,iBAAhG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA3DA,EA6DI4B,OAAO,KAAK,SAAZ,IAAwBtB,KAAxB,IAAiC,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYA,KAAZ,CA7DrC,EA+DA,oBAAC,UAAD;AAAY,MAAA,OAAO,EAAED,mBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBA/DA,EAiEIuB,OAAO,KAAK,MAAZ,IAAqBtB,KAArB,IAA8B,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYA,KAAZ,CAjElC,CADI,EAqEJ,oBAAC,KAAD;AAAO,MAAA,aAAa,EAAIc,aAAxB;AAAuC,MAAA,KAAK,EAAE,KAA9C;AAAqD,MAAA,GAAG,EAAI,OAA5D;AAAqE,MAAA,OAAO,EAAES,YAA9E;AAA4F,MAAA,IAAI,EAAE,eAAlG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MArEI,CADJ;AAyEP;;AArLyB;;AAwLlC,eAAetE,OAAO,CACjByE,KAAD,KAAY;AACRjC,EAAAA,IAAI,EAAEiC,KAAK,CAACC,QAAN,CAAeC,KAAf,CAAqB,CAAC,MAAD,EAAQ,MAAR,CAArB,CADE;AAER5B,EAAAA,KAAK,EAAE0B,KAAK,CAACC,QAAN,CAAeC,KAAf,CAAqB,CAAC,MAAD,EAAQ,OAAR,CAArB,CAFC;AAGRN,EAAAA,OAAO,EAAEI,KAAK,CAACG,IAAN,CAAWD,KAAX,CAAiB,CAAC,UAAD,EAAY,SAAZ,CAAjB,CAHD;AAIRhD,EAAAA,MAAM,EAAE8C,KAAK,CAACC,QAAN,CAAexD,GAAf,CAAmB,QAAnB,CAJA;AAKRwD,EAAAA,QAAQ,EAAGD,KAAK,CAACC,QALT;AAMR/B,EAAAA,QAAQ,EAAG8B,KAAK,CAACC,QAAN,CAAeC,KAAf,CAAqB,CAAC,MAAD,EAAQ,MAAR,EAAe,UAAf,CAArB,CANH;AAORL,EAAAA,YAAY,EAAGG,KAAK,CAACI,IAAN,CAAW3D,GAAX,CAAe,cAAf;AAPP,CAAZ,CADkB,EAUjB4D,QAAD,KAAa;AACTtD,EAAAA,eAAe,EAAGzB,kBAAkB,CAACE,eAAD,EAAiB6E,QAAjB,CAD3B;AAETC,EAAAA,WAAW,EAAGhF,kBAAkB,CAACG,WAAD,EAAc4E,QAAd,CAFvB;AAGTb,EAAAA,WAAW,EAAElE,kBAAkB,CAACI,WAAD,EAAa2E,QAAb,CAHtB;AAIT9B,EAAAA,WAAW,EAAGjD,kBAAkB,CAACK,WAAD,EAAa0E,QAAb;AAJvB,CAAb,CAVkB,CAAP,CAgBbhE,UAhBa,CAAf","sourcesContent":["import React, {Component} from 'react';\r\nimport {AuthContent,InputWithLabel,AuthButton,AuthError,Label} from '../../components/Auth';\r\nimport { bindActionCreators } from 'redux';\r\nimport {connect} from 'react-redux';\r\nimport * as userPageActions from '../../redux/modules/userPage';\r\nimport * as userActions from '../../redux/modules/user';\r\nimport * as authActions from '../../redux/modules/auth';\r\nimport * as postActions from '../../redux/modules/post';\r\nimport storage from '../..//lib/storage';\r\nimport {setError,validate,checkEmailExists,checkPhoneExists,inputStyle\r\n    ,setAuthActions,setPassword} from '../Function/ValidateModule';\r\n    import {Popup} from '../../components/Popup';\r\n\r\nclass UserModify extends Component{        \r\n\r\n    checkIfUserPassed = () => {\r\n        const{username} = this.props;\r\n        if(!storage.get('passed')) window.location.href = '/@' + username+ \"/password\";\r\n        else storage.remove('passed');\r\n    }\r\n    \r\n    initialModifyInfo = async() => {\r\n        const{username,UserPageActions} = this.props;\r\n        try{\r\n        await UserPageActions.checkUserAndGetUser();\r\n        const user = this.props.result.toJS();\r\n        UserPageActions.setUserData(user);\r\n        \r\n        }\r\n        catch(e){\r\n            console.log(e);\r\n            window.location.replace('/@' + username+ \"/password\");\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.checkIfUserPassed();\r\n        this.initialModifyInfo();\r\n        setAuthActions(this.props.AuthActions);\r\n    }\r\n    componentWillUnmount(){\r\n        const {UserPageActions} = this.props;\r\n        UserPageActions.initializeForm('User');\r\n        \r\n    }\r\n\r\n    checkedChange = (e) =>{\r\n        const {UserPageActions} = this.props;\r\n        const {name, value} = e.target.checked;\r\n        UserPageActions.changeInput({\r\n          name,\r\n          value,\r\n          form: 'User'  \r\n        });\r\n    }\r\n\r\n    defaultNullChange = (e) =>{\r\n        const {UserPageActions} = this.props;\r\n        const {name, value} = e.target;\r\n        UserPageActions.changeInput({\r\n          name,\r\n          value,\r\n          form: 'User'  \r\n        });\r\n    }\r\n    handleChange = (e) =>{\r\n    const {UserPageActions} = this.props;\r\n    const {name, value} = e.target;\r\n    UserPageActions.changeInput({\r\n      name,\r\n      value,\r\n      form: 'User'  \r\n    });\r\n    setPassword(this.props.password);\r\n    const validation = validate[name](value);\r\n    if(name.indexOf('password') > -1 || !validation) return;\r\n    if( name.indexOf('email') > -1)\r\n        checkEmailExists(value);\r\n     else if(name.indexOf('phone') > -1) \r\n        checkPhoneExists(value);\r\n}\r\nhandleLocalRegister = async () => {\r\n    const{form, UserPageActions, error,PostActions} = this.props;\r\n    const {email, id,password, passwordConfirm, phone,name,comment,address,gender,birthday} = form.toJS();\r\n\r\n    if(error) return; //현재 에러 있는 상태라면 진행 x\r\n    if(!validate['email'](email)\r\n    || !validate['password'](password)\r\n    || !validate['passwordConfirm'](passwordConfirm)\r\n    || !validate['name'](name)\r\n    || !validate['comment'](comment)\r\n    || !validate['phone'](phone)\r\n    || !validate['gender'](gender)\r\n    ){\r\n        //하나라도 실패하면 진행 하지 않음\r\n        return;\r\n    }\r\n    \r\n    try{\r\n        await UserPageActions.modifyUserInfo({\r\n            email,id,password,name,comment,phone,address,gender,birthday\r\n        });\r\n        storage.remove('passed');\r\n        PostActions.setPopupDisplay('block');\r\n        } catch(e){\r\n            if(e.response.status === 411)\r\n                setError('조건에 맞는 데이터를 입력해주세요.','main');\r\n        if(e.response.status === 409)\r\n                setError('다른 회원과 일치하는 데이터가 있습니다. 다시 입력해주세요.','main');\r\n    }\r\n    }\r\n    handlePopupOk = () => {\r\n        const{PostActions,history} = this.props;\r\n        PostActions.setPopupDisplay('none');\r\n        history.push('/');\r\n    }\r\n    render(){\r\n        const {error,form,errorId,popupDisplay} = this.props\r\n        const {id,password,passwordConfirm,email,name,phone,birthday,comment,address,gender} =form.toJS();\r\n        const {handleChange,handleLocalRegister,defaultNullChange,checkedChange,handlePopupOk} = this; \r\n        console.log(gender);\r\n                return(\r\n                    <div>\r\n                <AuthContent title='MY PAGE'>\r\n                <InputWithLabel label = \"아이디\" name=\"id\" placeholder=\"아이디\"\r\n                value = {id}\r\n                disabled/>\r\n               { !id.includes('Kakao') && <InputWithLabel label = \"비밀번호\" name=\"password\" placeholder=\"비밀번호\"\r\n                type=\"password\"\r\n                value={password} onChange={handleChange}\r\n                />\r\n               }\r\n                {\r\n                    errorId === 'password' &&error && <AuthError>{error}</AuthError>\r\n                }\r\n              \r\n               { !id.includes('Kakao') && <InputWithLabel label = \"비밀번호 확인\" name=\"passwordConfirm\" placeholder=\"다시 한번 입력\"\r\n                type=\"password\"\r\n                value={passwordConfirm} onChange={handleChange}\r\n                />\r\n            }\r\n                {\r\n                    errorId === 'passwordConfirm' &&error && <AuthError>{error}</AuthError>\r\n                } \r\n            \r\n                <InputWithLabel label = \"생년월일\" name=\"birthday\" \r\n                type=\"date\" \r\n                value = {birthday} onChange={defaultNullChange}\r\n                />\r\n                {\r\n                    errorId === 'birthday' &&error && <AuthError>{error}</AuthError>\r\n                } \r\n                <InputWithLabel label = \"이메일\" name=\"email\" placeholder=\"timeline@naver.com\" \r\n                type=\"email\"\r\n                defaultValue = {email}\r\n                onChange={handleChange}/>\r\n                {\r\n                    errorId === 'email' &&error && <AuthError>{error}</AuthError>\r\n                } \r\n                <InputWithLabel label = \"핸드폰 번호\" name=\"phone\" placeholder=\"010-1234-1234\" \r\n                defaultValue={phone}\r\n                onChange={handleChange}/>\r\n                {\r\n                    errorId === 'phone' &&error && <AuthError>{error}</AuthError>\r\n                } \r\n                <InputWithLabel label = \"이름\" name=\"name\" placeholder=\"이름\" \r\n                defaultValue = {name} onChange={handleChange}/>\r\n                {\r\n                    errorId === 'name' &&error && <AuthError>{error}</AuthError>\r\n                } \r\n                <InputWithLabel label = \"코멘트\" name=\"comment\" placeholder=\"반갑습니다.\"\r\n                defaultValue = {comment} onChange={handleChange} /> <br/>\r\n                {\r\n                    errorId === 'comment' &&error && <AuthError>{error}</AuthError>\r\n                } \r\n                <Label label = \"성별\"></Label>\r\n                {\r\n                    errorId === 'gender' &&error && <AuthError>{error}</AuthError>\r\n                } \r\n                <input style ={inputStyle} name= \"gender\" type=\"radio\" value = {Number('0')}  onChange={checkedChange} />여자\r\n                <input style ={inputStyle} name=\"gender\" type=\"radio\" value = {Number('1')}   onChange={checkedChange}/>남자\r\n                <input style ={inputStyle} name=\"gender\" type=\"radio\" value = {Number('2')}  onChange={checkedChange} />others\r\n                <InputWithLabel label =\"주소\" name =\"address\" placeholder=\"서울\" defaultValue = {address} onChange={defaultNullChange} />\r\n                {\r\n                    errorId === 'address' &&error && <AuthError>{error}</AuthError>\r\n                }              \r\n                <AuthButton onClick={handleLocalRegister}>확인</AuthButton>\r\n                {\r\n                    errorId === 'main' &&error && <AuthError>{error}</AuthError>\r\n                }  \r\n                </AuthContent>\r\n                <Popup handlePopupOk = {handlePopupOk} right={'20%'} top = {'100px'} display={popupDisplay} text={'회원가입이 완료었습니다.'} />\r\n                </div>\r\n            );\r\n        }\r\n}\r\n\r\nexport default connect(\r\n    (state) => ({\r\n        form: state.userPage.getIn(['User','form']),\r\n        error: state.userPage.getIn(['User','error']),\r\n        errorId: state.auth.getIn(['register','errorId']),\r\n        result: state.userPage.get('result'),\r\n        userPage : state.userPage,\r\n        password : state.userPage.getIn(['User','form','password']),\r\n        popupDisplay : state.post.get('popupDisplay')\r\n    }),\r\n    (dispatch)=>({\r\n        UserPageActions : bindActionCreators(userPageActions,dispatch),\r\n        UserActions : bindActionCreators(userActions, dispatch),\r\n        AuthActions: bindActionCreators(authActions,dispatch),\r\n        PostActions : bindActionCreators(postActions,dispatch)\r\n    })\r\n)(UserModify);"]},"metadata":{},"sourceType":"module"}