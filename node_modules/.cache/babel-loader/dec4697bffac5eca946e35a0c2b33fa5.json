{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _classCallCheck from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{AuthContent,InputWithLabel,AuthButton,RightAlignedLink,AuthError}from'../../components/Auth';import{connect}from'react-redux';import{bindActionCreators}from'redux';import*as authActions from'../../redux/modules/auth';import*as userActions from'../../redux/modules/user';import storage from'../../lib/storage';import queryString from'query-string';var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);function Login(){var _getPrototypeOf2;var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Login)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.handleChange=function(e){var AuthActions=_this.props.AuthActions;var _e$target=e.target,name=_e$target.name,value=_e$target.value;AuthActions.changeInput({name:name,value:value,form:'login'});};_this.setError=function(message){var AuthActions=_this.props.AuthActions;AuthActions.setError({form:'login',message:message});return false;};_this.handleLocalLogin=function _callee(){var _this$props,form,AuthActions,UserActions,history,_form$toJS,id,password,loggedInfo;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,form=_this$props.form,AuthActions=_this$props.AuthActions,UserActions=_this$props.UserActions,history=_this$props.history;_form$toJS=form.toJS(),id=_form$toJS.id,password=_form$toJS.password;_context.prev=2;_context.next=5;return _regeneratorRuntime.awrap(AuthActions.localLogin({id:id,password:password}));case 5:loggedInfo=_this.props.result.toJS();UserActions.setLoggedInfo(loggedInfo);storage.set('loggedInfo',loggedInfo);window.location.replace('/');_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);_this.setError('잘못된 계정정보입니다.');case 14:case\"end\":return _context.stop();}}},null,null,[[2,11]]);};_this.enterLogin=function(){if(window.event.keyCode===13)_this.handleLocalLogin();};return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function componentDidMount(){var location=this.props.location;var query=queryString.parse(location.search);if(query.expired!==undefined){this.setError('로그인 후 이용바랍니다.');}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){var AuthActions=this.props.AuthActions;AuthActions.initializeForm('login');}},{key:\"render\",value:function render(){var _this$props$form$toJS=this.props.form.toJS(),id=_this$props$form$toJS.id,password=_this$props$form$toJS.password;// form 에서 id 과 password 값을 읽어옴\nvar handleChange=this.handleChange,handleLocalLogin=this.handleLocalLogin,enterLogin=this.enterLogin;var error=this.props.error;return React.createElement(AuthContent,{top:'1px solid rgba(0, 0, 0, 0.1)',title:\"SIGN IN\"},React.createElement(InputWithLabel,{enter:enterLogin,label:\"\\uC544\\uC774\\uB514\",name:\"id\",placeholder:\"\\uC544\\uC774\\uB514\",value:id,onChange:handleChange}),React.createElement(InputWithLabel,{label:\"\\uBE44\\uBC00\\uBC88\\uD638\",name:\"password\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\",type:\"password\",value:password,onChange:handleChange,enter:enterLogin}),error&&React.createElement(AuthError,null,error),React.createElement(AuthButton,{onClick:handleLocalLogin},\"\\uB85C\\uADF8\\uC778\"),React.createElement(RightAlignedLink,{to:\"/auth/register\"},\"\\uD68C\\uC6D0\\uAC00\\uC785\"));}}]);return Login;}(Component);export default connect(function(state){return{form:state.auth.getIn(['login','form']),error:state.auth.getIn(['login','error']),result:state.auth.get('result'),user:state.user};},function(dispatch){return{AuthActions:bindActionCreators(authActions,dispatch),UserActions:bindActionCreators(userActions,dispatch)};})(Login);","map":{"version":3,"sources":["C:/Users/user/fronttimeline/src/containers/Auth/Login.js"],"names":["React","Component","AuthContent","InputWithLabel","AuthButton","RightAlignedLink","AuthError","connect","bindActionCreators","authActions","userActions","storage","queryString","Login","handleChange","e","AuthActions","props","target","name","value","changeInput","form","setError","message","handleLocalLogin","UserActions","history","toJS","id","password","localLogin","loggedInfo","result","setLoggedInfo","set","window","location","replace","enterLogin","event","keyCode","query","parse","search","expired","undefined","initializeForm","error","state","auth","getIn","get","user","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { AuthContent, InputWithLabel, AuthButton, RightAlignedLink, AuthError } from '../../components/Auth';\r\nimport { connect } from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport * as authActions from '../../redux/modules/auth';\r\nimport * as userActions from '../../redux/modules/user';\r\nimport storage from '../../lib/storage';\r\nimport queryString from 'query-string';\r\n\r\nclass Login extends Component {\r\n\r\n    componentDidMount(){\r\n        const{location} = this.props;\r\n        const query = queryString.parse(location.search);\r\n\r\n        if(query.expired !== undefined){\r\n            this.setError('로그인 후 이용바랍니다.')\r\n        }\r\n    }\r\n\r\n    handleChange = (e) => {\r\n        const { AuthActions } = this.props;\r\n        const { name, value } = e.target;\r\n\r\n        AuthActions.changeInput({\r\n            name,\r\n            value,\r\n            form: 'login'\r\n        });\r\n    }\r\n    \r\n    componentWillUnmount(){\r\n        const {AuthActions} = this.props;\r\n        AuthActions.initializeForm('login');\r\n    }\r\n\r\n    setError = (message) => {\r\n        const {AuthActions} = this.props;\r\n        AuthActions.setError({\r\n            form : 'login',\r\n            message\r\n        });\r\n        return false;\r\n    }\r\n\r\n    handleLocalLogin = async () => {\r\n        const {form, AuthActions, UserActions,history} = this.props;\r\n        const {id,password} = form.toJS();\r\n        try{\r\n            await AuthActions.localLogin({id, password});\r\n            const loggedInfo = this.props.result.toJS();\r\n\r\n            UserActions.setLoggedInfo(loggedInfo);\r\n            storage.set('loggedInfo', loggedInfo);\r\n            window.location.replace('/');\r\n            \r\n        \r\n        } catch(e){\r\n            this.setError('잘못된 계정정보입니다.');\r\n        }\r\n     }\r\n     enterLogin = () => {\r\n        if(window.event.keyCode === 13)\r\n          this.handleLocalLogin();\r\n    }\r\n    render() {\r\n        const { id, password } = this.props.form.toJS(); // form 에서 id 과 password 값을 읽어옴\r\n        const { handleChange,handleLocalLogin,enterLogin } = this;\r\n        const {error} = this.props;\r\n\r\n        return (\r\n            <AuthContent top = {'1px solid rgba(0, 0, 0, 0.1)'}  title=\"SIGN IN\">\r\n                \r\n                <InputWithLabel \r\n                enter = {enterLogin}\r\n                    label=\"아이디\" \r\n                    name=\"id\" \r\n                    placeholder=\"아이디\" \r\n                    value={id} \r\n                    onChange={handleChange}\r\n                />\r\n                <InputWithLabel \r\n                    label=\"비밀번호\" \r\n                    name=\"password\" \r\n                    placeholder=\"비밀번호\" \r\n                    type=\"password\" \r\n                    value={password} \r\n                    onChange={handleChange}\r\n                    enter = {enterLogin}\r\n                />\r\n                {\r\n                    error && <AuthError>{error}</AuthError>\r\n                }\r\n                <AuthButton onClick={handleLocalLogin} >로그인</AuthButton>\r\n                <RightAlignedLink to=\"/auth/register\">회원가입</RightAlignedLink>\r\n            </AuthContent>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    (state) => ({\r\n        form: state.auth.getIn(['login', 'form']),\r\n        error: state.auth.getIn(['login', 'error']),\r\n        result : state.auth.get('result'),\r\n        user: state.user\r\n    }),\r\n    (dispatch) => ({\r\n        AuthActions: bindActionCreators(authActions, dispatch),\r\n        UserActions: bindActionCreators(userActions,dispatch)\r\n    })\r\n)(Login);"]},"metadata":{},"sourceType":"module"}