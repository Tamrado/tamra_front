{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\fronttimeline\\\\src\\\\containers\\\\Auth\\\\KakaoLogin.js\";\nimport React, { Component } from 'react';\nimport { KakaoLoginButton } from '../../components/Auth';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as authActions from '../../redux/modules/auth';\nimport * as userActions from '../../redux/modules/user';\nimport storage from '../../lib/storage';\n\nclass KakaoLogin extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.responseKakao = async res => {\n      const profile = res.profile,\n            response = res.response;\n      const _this$props = this.props,\n            AuthActions = _this$props.AuthActions,\n            history = _this$props.history;\n      const access_token = response.access_token,\n            refresh_token = response.refresh_token;\n      const id = profile.id,\n            _profile$kakao_accoun = profile.kakao_account,\n            email = _profile$kakao_accoun.email,\n            _profile$kakao_accoun2 = _profile$kakao_accoun.profile,\n            nickname = _profile$kakao_accoun2.nickname,\n            profile_image_url = _profile$kakao_accoun2.profile_image_url;\n\n      try {\n        await AuthActions.kakaoLogin({\n          accesstoken: access_token,\n          refreshtoken: refresh_token,\n          uid: id,\n          nickname: nickname,\n          thumbnail: profile_image_url,\n          email: email\n        });\n\n        if (this.props.result.toJS() === null) {\n          history.replace(`/auth/kakao/Register/${id}`);\n          storage.set('kakaologin', true);\n        } else {\n          history.replace('/');\n          storage.set('');\n        }\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    this.responseFail = error => {\n      console.log(error);\n    };\n  }\n\n  render() {\n    const responseKakao = this.responseKakao,\n          responseFail = this.responseFail;\n    return React.createElement(KakaoLoginButton, {\n      responseKakao: responseKakao,\n      responseFail: responseFail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default connect(state => ({\n  form: state.auth.getIn(['login', 'form']),\n  error: state.auth.getIn(['login', 'error']),\n  result: state.auth.get('result'),\n  user: state.user\n}), dispatch => ({\n  AuthActions: bindActionCreators(authActions, dispatch),\n  UserActions: bindActionCreators(userActions, dispatch)\n}))(KakaoLogin);","map":{"version":3,"sources":["C:/Users/user/fronttimeline/src/containers/Auth/KakaoLogin.js"],"names":["React","Component","KakaoLoginButton","connect","bindActionCreators","authActions","userActions","storage","KakaoLogin","responseKakao","res","profile","response","props","AuthActions","history","access_token","refresh_token","id","kakao_account","email","nickname","profile_image_url","kakaoLogin","accesstoken","refreshtoken","uid","thumbnail","result","toJS","replace","set","e","console","log","responseFail","error","render","state","form","auth","getIn","get","user","dispatch","UserActions"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { KakaoLoginButton } from '../../components/Auth';\r\nimport { connect } from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport * as authActions from '../../redux/modules/auth';\r\nimport * as userActions from '../../redux/modules/user';\r\nimport storage from '../../lib/storage';\r\n\r\nclass KakaoLogin extends Component{\r\n    \r\n    responseKakao = async(res) =>{\r\n        const { profile,response } = res;\r\n        const {AuthActions,history} = this.props;\r\n        \r\n        const{\r\n            access_token,\r\n            refresh_token\r\n        } = response;\r\n    const {\r\n      id,\r\n      kakao_account: {\r\n          email,\r\n        profile: { nickname, profile_image_url}\r\n      }\r\n    } = profile;\r\n\r\n    try{\r\n    await AuthActions.kakaoLogin({\r\n        accesstoken:access_token,\r\n        refreshtoken : refresh_token,\r\n        uid : id,\r\n        nickname : nickname,\r\n        thumbnail : profile_image_url,\r\n        email : email\r\n    });\r\n    if(this.props.result.toJS() === null){\r\n        history.replace(`/auth/kakao/Register/${id}`);\r\n        storage.set('kakaologin',true);\r\n    }\r\n    else{\r\n        history.replace('/');\r\n        storage.set('')\r\n    }\r\n    }catch(e){\r\n        console.log(e);\r\n    }   \r\n    \r\n    }\r\n    responseFail = (error) =>{\r\n        console.log(error);\r\n    }\r\n\r\nrender(){\r\n    const {responseKakao,responseFail} = this;\r\n    return(\r\n        <KakaoLoginButton responseKakao={responseKakao} responseFail={responseFail}/>\r\n    );\r\n}\r\n}\r\nexport default connect(\r\n    (state) => ({\r\n        form: state.auth.getIn(['login', 'form']),\r\n        error: state.auth.getIn(['login', 'error']),\r\n        result : state.auth.get('result'),\r\n        user: state.user\r\n    }),\r\n    (dispatch) => ({\r\n        AuthActions: bindActionCreators(authActions, dispatch),\r\n        UserActions: bindActionCreators(userActions,dispatch)\r\n    })\r\n)(KakaoLogin);"]},"metadata":{},"sourceType":"module"}