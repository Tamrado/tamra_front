{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _classCallCheck from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{KakaoLoginButton}from'../../components/Auth';import{connect}from'react-redux';import{bindActionCreators}from'redux';import*as authActions from'../../redux/modules/auth';import*as userActions from'../../redux/modules/user';import storage from'../../lib/storage';var KakaoLogin=/*#__PURE__*/function(_Component){_inherits(KakaoLogin,_Component);function KakaoLogin(){var _getPrototypeOf2;var _this;_classCallCheck(this,KakaoLogin);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(KakaoLogin)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.responseKakao=function _callee(res){var profile,response,_this$props,AuthActions,history,access_token,refresh_token,id,_profile$kakao_accoun,email,_profile$kakao_accoun2,nickname,profile_image_url;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:profile=res.profile,response=res.response;console.log(res);_this$props=_this.props,AuthActions=_this$props.AuthActions,history=_this$props.history;access_token=response.access_token,refresh_token=response.refresh_token;id=profile.id,_profile$kakao_accoun=profile.kakao_account,email=_profile$kakao_accoun.email,_profile$kakao_accoun2=_profile$kakao_accoun.profile,nickname=_profile$kakao_accoun2.nickname,profile_image_url=_profile$kakao_accoun2.profile_image_url;_context.prev=5;_context.next=8;return _regeneratorRuntime.awrap(AuthActions.kakaoLogin({accesstoken:access_token,refreshtoken:refresh_token,uid:id,nickname:nickname,thumbnail:profile_image_url,email:email}));case 8:if(_this.props.result.toJS()===null){storage.set('kakaologin',true);history.replace(\"/auth/kakao/Register/\".concat(id));}else{storage.set('loggedInfo',_this.props.result.toJS());window.location.replace('/');}_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](5);console.log(_context.t0);case 14:case\"end\":return _context.stop();}}},null,null,[[5,11]]);};_this.responseFail=function(error){console.log(error);};return _this;}_createClass(KakaoLogin,[{key:\"render\",value:function render(){var responseKakao=this.responseKakao,responseFail=this.responseFail;return React.createElement(KakaoLoginButton,{responseKakao:responseKakao,responseFail:responseFail});}}]);return KakaoLogin;}(Component);export default connect(function(state){return{form:state.auth.getIn(['login','form']),error:state.auth.getIn(['login','error']),result:state.auth.get('result'),user:state.user};},function(dispatch){return{AuthActions:bindActionCreators(authActions,dispatch),UserActions:bindActionCreators(userActions,dispatch)};})(KakaoLogin);","map":{"version":3,"sources":["C:/Users/user/fronttimeline/src/containers/Auth/KakaoLogin.js"],"names":["React","Component","KakaoLoginButton","connect","bindActionCreators","authActions","userActions","storage","KakaoLogin","responseKakao","res","profile","response","console","log","props","AuthActions","history","access_token","refresh_token","id","kakao_account","email","nickname","profile_image_url","kakaoLogin","accesstoken","refreshtoken","uid","thumbnail","result","toJS","set","replace","window","location","responseFail","error","state","form","auth","getIn","get","user","dispatch","UserActions"],"mappings":"i6BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,gBAAT,KAAiC,uBAAjC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAAQC,kBAAR,KAAiC,OAAjC,CACA,MAAO,GAAKC,CAAAA,WAAZ,KAA6B,0BAA7B,CACA,MAAO,GAAKC,CAAAA,WAAZ,KAA6B,0BAA7B,CACA,MAAOC,CAAAA,OAAP,KAAoB,mBAApB,C,GAEMC,CAAAA,U,+YAEFC,a,CAAgB,iBAAMC,GAAN,oRACJC,OADI,CACiBD,GADjB,CACJC,OADI,CACIC,QADJ,CACiBF,GADjB,CACIE,QADJ,CAEZC,OAAO,CAACC,GAAR,CAAYJ,GAAZ,EAFY,YAGkB,MAAKK,KAHvB,CAGLC,WAHK,aAGLA,WAHK,CAGOC,OAHP,aAGOA,OAHP,CAMRC,YANQ,CAQRN,QARQ,CAMRM,YANQ,CAORC,aAPQ,CAQRP,QARQ,CAORO,aAPQ,CAUdC,EAVc,CAeZT,OAfY,CAUdS,EAVc,uBAeZT,OAfY,CAWdU,aAXc,CAYVC,KAZU,uBAYVA,KAZU,8CAaZX,OAbY,CAaDY,QAbC,wBAaDA,QAbC,CAaSC,iBAbT,wBAaSA,iBAbT,kEAkBVR,WAAW,CAACS,UAAZ,CAAuB,CACzBC,WAAW,CAACR,YADa,CAEzBS,YAAY,CAAGR,aAFU,CAGzBS,GAAG,CAAGR,EAHmB,CAIzBG,QAAQ,CAAGA,QAJc,CAKzBM,SAAS,CAAGL,iBALa,CAMzBF,KAAK,CAAGA,KANiB,CAAvB,CAlBU,SA0BhB,GAAG,MAAKP,KAAL,CAAWe,MAAX,CAAkBC,IAAlB,KAA6B,IAAhC,CAAqC,CACjCxB,OAAO,CAACyB,GAAR,CAAY,YAAZ,CAAyB,IAAzB,EACAf,OAAO,CAACgB,OAAR,gCAAwCb,EAAxC,GACH,CAHD,IAII,CACAb,OAAO,CAACyB,GAAR,CAAY,YAAZ,CAAyB,MAAKjB,KAAL,CAAWe,MAAX,CAAkBC,IAAlB,EAAzB,EACAG,MAAM,CAACC,QAAP,CAAgBF,OAAhB,CAAwB,GAAxB,EACH,CAjCe,iFAmCZpB,OAAO,CAACC,GAAR,cAnCY,kE,OAuChBsB,Y,CAAe,SAACC,KAAD,CAAU,CACrBxB,OAAO,CAACC,GAAR,CAAYuB,KAAZ,EACH,C,6EAEG,IACG5B,CAAAA,aADH,CACiC,IADjC,CACGA,aADH,CACiB2B,YADjB,CACiC,IADjC,CACiBA,YADjB,CAEJ,MACI,qBAAC,gBAAD,EAAkB,aAAa,CAAE3B,aAAjC,CAAgD,YAAY,CAAE2B,YAA9D,EADJ,CAGH,C,wBAlDwBnC,S,EAoDzB,cAAeE,CAAAA,OAAO,CAClB,SAACmC,KAAD,QAAY,CACRC,IAAI,CAAED,KAAK,CAACE,IAAN,CAAWC,KAAX,CAAiB,CAAC,OAAD,CAAU,MAAV,CAAjB,CADE,CAERJ,KAAK,CAAEC,KAAK,CAACE,IAAN,CAAWC,KAAX,CAAiB,CAAC,OAAD,CAAU,OAAV,CAAjB,CAFC,CAGRX,MAAM,CAAGQ,KAAK,CAACE,IAAN,CAAWE,GAAX,CAAe,QAAf,CAHD,CAIRC,IAAI,CAAEL,KAAK,CAACK,IAJJ,CAAZ,EADkB,CAOlB,SAACC,QAAD,QAAe,CACX5B,WAAW,CAAEZ,kBAAkB,CAACC,WAAD,CAAcuC,QAAd,CADpB,CAEXC,WAAW,CAAEzC,kBAAkB,CAACE,WAAD,CAAasC,QAAb,CAFpB,CAAf,EAPkB,CAAP,CAWbpC,UAXa,CAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport { KakaoLoginButton } from '../../components/Auth';\r\nimport { connect } from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport * as authActions from '../../redux/modules/auth';\r\nimport * as userActions from '../../redux/modules/user';\r\nimport storage from '../../lib/storage';\r\n\r\nclass KakaoLogin extends Component{\r\n    \r\n    responseKakao = async(res) =>{\r\n        const { profile,response } = res;\r\n        console.log(res);\r\n        const {AuthActions,history} = this.props;\r\n        \r\n        const{\r\n            access_token,\r\n            refresh_token\r\n        } = response;\r\n    const {\r\n      id,\r\n      kakao_account: {\r\n          email,\r\n        profile: { nickname, profile_image_url}\r\n      }\r\n    } = profile;\r\n\r\n    try{\r\n    await AuthActions.kakaoLogin({\r\n        accesstoken:access_token,\r\n        refreshtoken : refresh_token,\r\n        uid : id,\r\n        nickname : nickname,\r\n        thumbnail : profile_image_url,\r\n        email : email\r\n    });\r\n    if(this.props.result.toJS() === null){\r\n        storage.set('kakaologin',true);\r\n        history.replace(`/auth/kakao/Register/${id}`);\r\n    }\r\n    else{\r\n        storage.set('loggedInfo',this.props.result.toJS());\r\n        window.location.replace('/');\r\n    }\r\n    }catch(e){\r\n        console.log(e);\r\n    }   \r\n    \r\n    }\r\n    responseFail = (error) =>{\r\n        console.log(error);\r\n    }\r\n\r\nrender(){\r\n    const {responseKakao,responseFail} = this;\r\n    return(\r\n        <KakaoLoginButton responseKakao={responseKakao} responseFail={responseFail}/>\r\n    );\r\n}\r\n}\r\nexport default connect(\r\n    (state) => ({\r\n        form: state.auth.getIn(['login', 'form']),\r\n        error: state.auth.getIn(['login', 'error']),\r\n        result : state.auth.get('result'),\r\n        user: state.user\r\n    }),\r\n    (dispatch) => ({\r\n        AuthActions: bindActionCreators(authActions, dispatch),\r\n        UserActions: bindActionCreators(userActions,dispatch)\r\n    })\r\n)(KakaoLogin);"]},"metadata":{},"sourceType":"module"}