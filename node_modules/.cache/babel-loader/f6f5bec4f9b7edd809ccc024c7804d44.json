{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _classCallCheck from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{connect}from'react-redux';import{bindActionCreators}from'redux';import PageWrapper from'../../components/PageWrapper';import{FeedList}from'../../components/Timeline';import{PostPopup,Popup}from'../../components/Popup';import*as friendActions from'../../redux/modules/friend';import*as timelineActions from'../../redux/modules/timeline';import*as likeActions from'../../redux/modules/like';import*as baseActions from'../../redux/modules/base';import*as postActions from'../../redux/modules/post';import storage from'../../lib/storage';import*as commentActions from'../../redux/modules/comment';import*as userPageActions from'../../redux/modules/userPage';var TimelineContainer=/*#__PURE__*/function(_Component){_inherits(TimelineContainer,_Component);function TimelineContainer(){var _getPrototypeOf2;var _this;_classCallCheck(this,TimelineContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TimelineContainer)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.handleScroll=function _callee(e){var scrollTop,_window,innerHeight,scrollHeight;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:scrollTop=e.srcElement.scrollingElement.scrollTop;_window=window,innerHeight=_window.innerHeight;scrollHeight=document.body.scrollHeight;if(!(scrollTop+innerHeight>scrollHeight&&_this.props.isTruePost)){_context.next=7;break;}_this.getFeedList();_context.next=7;return _regeneratorRuntime.awrap(_this.props.TimelineActions.addPage());case 7:case\"end\":return _context.stop();}}});};_this.getFeedList=function _callee2(){var _this$props,TimelineActions,page,isTruePost,userid,username;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props=_this.props,TimelineActions=_this$props.TimelineActions,page=_this$props.page,isTruePost=_this$props.isTruePost,userid=_this$props.userid;username=userid.substr(1);if(!isTruePost){_context2.next=12;break;}_context2.prev=3;_context2.next=6;return _regeneratorRuntime.awrap(TimelineActions.getTimelineInformation(username,page));case 6:_context2.next=12;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](3);_context2.next=12;return _regeneratorRuntime.awrap(TimelineActions.setFalsePost());case 12:case\"end\":return _context2.stop();}}},null,null,[[3,8]]);};_this.overHashTag=function(e){var TimelineActions=_this.props.TimelineActions;TimelineActions.setHashDisplay('block');TimelineActions.setKey(e.target.id);};_this.outHashTag=function(){var TimelineActions=_this.props.TimelineActions;TimelineActions.setHashDisplay('none');};_this.handleTimeline=function _callee3(){var _this$props2,TimelineActions,FriendActions,userid,id,_storage$get,username,result;return _regeneratorRuntime.async(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this$props2=_this.props,TimelineActions=_this$props2.TimelineActions,FriendActions=_this$props2.FriendActions,userid=_this$props2.userid;id=userid.substr(1);_storage$get=storage.get('loggedInfo'),username=_storage$get.username;if(username===id)TimelineActions.setFollowDisplay('none');else TimelineActions.setFollowDisplay('block');_context3.prev=4;_context3.next=7;return _regeneratorRuntime.awrap(FriendActions.getOtherInfoNum(id));case 7:_context3.next=9;return _regeneratorRuntime.awrap(TimelineActions.getTimelinePostNum(id));case 9:_context3.next=11;return _regeneratorRuntime.awrap(FriendActions.notifyIsFollowUser(id));case 11:_context3.next=16;break;case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](4);console.log(_context3.t0);case 16:result=_this.props.result;TimelineActions.setComment(result.comment);TimelineActions.setThumbnail(result.thumbnail);TimelineActions.setUsername(result.username);TimelineActions.setNickname(result.nickname);case 21:case\"end\":return _context3.stop();}}},null,null,[[4,13]]);};_this.setTime=function _callee5(){var _this$props3,data,TimelineActions;return _regeneratorRuntime.async(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_this$props3=_this.props,data=_this$props3.data,TimelineActions=_this$props3.TimelineActions;_context5.next=3;return _regeneratorRuntime.awrap(Promise.all(data.map(function _callee4(feed,index){var time,timestring;return _regeneratorRuntime.async(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:time=feed.get('timestamp');timestring=_this.dateTimeToFormatted(time);_context4.next=4;return _regeneratorRuntime.awrap(TimelineActions.setTimelineTime({timestring:timestring,index:index}));case 4:case\"end\":return _context4.stop();}}});})));case 3:case\"end\":return _context5.stop();}}});};_this.setCommentTime=function _callee7(id){var _this$props4,data,TimelineActions,index,comments;return _regeneratorRuntime.async(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_this$props4=_this.props,data=_this$props4.data,TimelineActions=_this$props4.TimelineActions;index=data.findIndex(function(item){return item.get('postId')===parseInt(id);});comments=data.getIn([index,'commentList']);_context7.next=5;return _regeneratorRuntime.awrap(Promise.all(comments.map(function _callee6(comment,commentIndex){var time,timestring;return _regeneratorRuntime.async(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:time=comment.timestamp;timestring=_this.dateTimeToFormatted(time);_context6.next=4;return _regeneratorRuntime.awrap(TimelineActions.setTimelineCommentTime({timestring:timestring,index:index,commentIndex:commentIndex}));case 4:case\"end\":return _context6.stop();}}});})));case 5:case\"end\":return _context7.stop();}}});};_this.dateTimeToFormatted=function(dt){var min=60*1000;var c=new Date();var d=new Date(dt);var minsAgo=Math.floor((c-d)/min);var result={'raw':d.getFullYear()+'-'+(d.getMonth()+1>9?'':'0')+(d.getMonth()+1)+'-'+(d.getDate()>9?'':'0')+d.getDate()+' '+(d.getHours()>9?'':'0')+d.getHours()+':'+(d.getMinutes()>9?'':'0')+d.getMinutes()+':'+(d.getSeconds()>9?'':'0')+d.getSeconds(),'month':d.getFullYear()+'-'+(d.getMonth()+1>9?'':'0')+(d.getMonth()+1)+'-'+(d.getDate()>9?'':'0')+d.getDate(),'formatted':''};if(minsAgo<60){// 1시간 내\nresult.formatted=minsAgo+'분 전';}else if(minsAgo<60*24){// 하루 내\nresult.formatted=Math.floor(minsAgo/60)+'시간 전';}else if(minsAgo<60*24*30){// 하루 이상\nresult.formatted=Math.floor(minsAgo/60/24)+'일 전';}else{result.formatted=result.month;}return result.formatted;};_this.componentDidMount=function _callee8(){var _assertThisInitialize,handleTimeline;return _regeneratorRuntime.async(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_assertThisInitialize=_assertThisInitialized(_this),handleTimeline=_assertThisInitialize.handleTimeline;window.addEventListener(\"scroll\",_this.handleScroll);_context8.next=4;return _regeneratorRuntime.awrap(_this.getFeedList());case 4:_context8.next=6;return _regeneratorRuntime.awrap(_this.props.TimelineActions.addPage());case 6:_context8.next=8;return _regeneratorRuntime.awrap(handleTimeline());case 8:case\"end\":return _context8.stop();}}});};_this.handleFollowClick=function _callee9(){var _this$props5,FriendActions,isfollow,userid,id;return _regeneratorRuntime.async(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_this$props5=_this.props,FriendActions=_this$props5.FriendActions,isfollow=_this$props5.isfollow,userid=_this$props5.userid;id=userid.substr(1);if(!(isfollow==='팔로우')){_context9.next=7;break;}_context9.next=5;return _regeneratorRuntime.awrap(FriendActions.follow(id));case 5:_context9.next=9;break;case 7:_context9.next=9;return _regeneratorRuntime.awrap(FriendActions.unfollow({'friendId':id}));case 9:_context9.next=11;return _regeneratorRuntime.awrap(FriendActions.getOtherInfoNum(id));case 11:case\"end\":return _context9.stop();}}});};_this.handleLikeClick=function _callee10(e){var _this$props6,LikeActions,TimelineActions,id,totalNum;return _regeneratorRuntime.async(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_this$props6=_this.props,LikeActions=_this$props6.LikeActions,TimelineActions=_this$props6.TimelineActions;id=e.target.id;_context10.next=4;return _regeneratorRuntime.awrap(TimelineActions.setLikeKey(id));case 4:_context10.next=6;return _regeneratorRuntime.awrap(LikeActions.clickLike(id));case 6:_context10.next=8;return _regeneratorRuntime.awrap(TimelineActions.setTimelineLike('none'));case 8:_context10.prev=8;_context10.next=11;return _regeneratorRuntime.awrap(LikeActions.getLikeAndUserList(id,1));case 11:_context10.next=15;break;case 13:_context10.prev=13;_context10.t0=_context10[\"catch\"](8);case 15:totalNum=_this.props.totalNum;_context10.next=18;return _regeneratorRuntime.awrap(TimelineActions.setTimelineLikeNum(totalNum));case 18:case\"end\":return _context10.stop();}}},null,null,[[8,13]]);};_this.handleCancelClick=function _callee11(e){var _this$props7,LikeActions,TimelineActions,id,totalNum;return _regeneratorRuntime.async(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_this$props7=_this.props,LikeActions=_this$props7.LikeActions,TimelineActions=_this$props7.TimelineActions;id=e.target.id;_context11.next=4;return _regeneratorRuntime.awrap(TimelineActions.setLikeKey(id));case 4:_context11.next=6;return _regeneratorRuntime.awrap(LikeActions.cancelLike(id));case 6:_context11.next=8;return _regeneratorRuntime.awrap(TimelineActions.setTimelineLike('block'));case 8:_context11.prev=8;_context11.next=11;return _regeneratorRuntime.awrap(LikeActions.getLikeAndUserList(id,1));case 11:_context11.next=15;break;case 13:_context11.prev=13;_context11.t0=_context11[\"catch\"](8);case 15:totalNum=_this.props.totalNum;_context11.next=18;return _regeneratorRuntime.awrap(TimelineActions.setTimelineLikeNum(totalNum));case 18:case\"end\":return _context11.stop();}}},null,null,[[8,13]]);};_this.handleComment=function _callee12(e){var _this$props8,CommentActions,TimelineActions,data,id,category,commentdisplay,index,page,_this$props9,commentList,lastComment;return _regeneratorRuntime.async(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_this$props8=_this.props,CommentActions=_this$props8.CommentActions,TimelineActions=_this$props8.TimelineActions,data=_this$props8.data;id=e.target.id;category=e.target.dataset.category;_context12.next=5;return _regeneratorRuntime.awrap(TimelineActions.setCommentCategory(category));case 5:_context12.next=7;return _regeneratorRuntime.awrap(TimelineActions.setTimelineCommentDisplay(id));case 7:commentdisplay=_this.props.commentdisplay;if(!(commentdisplay==='block')){_context12.next=25;break;}index=data.findIndex(function(item){return item.get('postId')===parseInt(id);});page=data.getIn([index,'commentPage']);_context12.next=13;return _regeneratorRuntime.awrap(CommentActions.showPostCommentList(id,page));case 13:_context12.next=15;return _regeneratorRuntime.awrap(TimelineActions.setTimelineCommentPage(id));case 15:_this$props9=_this.props,commentList=_this$props9.commentList,lastComment=_this$props9.lastComment;if(!lastComment){_context12.next=21;break;}_context12.next=19;return _regeneratorRuntime.awrap(TimelineActions.setTimelineCommentList({'commentId':id,'commentList':commentList,'trueComment':false}));case 19:_context12.next=23;break;case 21:_context12.next=23;return _regeneratorRuntime.awrap(TimelineActions.setTimelineCommentList({'commentId':id,'commentList':commentList,'trueComment':true}));case 23:_context12.next=25;return _regeneratorRuntime.awrap(_this.setCommentTime(id));case 25:case\"end\":return _context12.stop();}}});};_this.handleCommentAdd=function _callee13(e){var id,_this$props10,TimelineActions,CommentActions,data,index,page,_this$props11,commentList,lastComment;return _regeneratorRuntime.async(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:id=e.target.id;_this$props10=_this.props,TimelineActions=_this$props10.TimelineActions,CommentActions=_this$props10.CommentActions,data=_this$props10.data;index=data.findIndex(function(item){return item.get('postId')===parseInt(id);});if(!data.getIn([index,'trueComment'])){_context13.next=25;break;}page=data.getIn([index,'commentPage']);_context13.prev=5;_context13.next=8;return _regeneratorRuntime.awrap(CommentActions.showPostCommentList(id,page));case 8:_context13.next=10;return _regeneratorRuntime.awrap(TimelineActions.setTimelineCommentPage(id));case 10:_this$props11=_this.props,commentList=_this$props11.commentList,lastComment=_this$props11.lastComment;if(!lastComment){_context13.next=16;break;}_context13.next=14;return _regeneratorRuntime.awrap(TimelineActions.setTimelineCommentList({'commentId':id,'commentList':commentList,'trueComment':false}));case 14:_context13.next=18;break;case 16:_context13.next=18;return _regeneratorRuntime.awrap(TimelineActions.setTimelineCommentList({'commentId':id,'commentList':commentList,'trueComment':true}));case 18:_context13.next=20;return _regeneratorRuntime.awrap(_this.setCommentTime(id));case 20:_context13.next=25;break;case 22:_context13.prev=22;_context13.t0=_context13[\"catch\"](5);TimelineActions.setTimelineCommentFalse(id);case 25:case\"end\":return _context13.stop();}}},null,null,[[5,22]]);};_this.enterComment=function _callee14(e){var _this$props12,CommentActions,TimelineActions,_e$target,innerText,id,content,i,commentNum;return _regeneratorRuntime.async(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:if(!(window.event.keyCode===13)){_context14.next=20;break;}_this$props12=_this.props,CommentActions=_this$props12.CommentActions,TimelineActions=_this$props12.TimelineActions;_e$target=e.target,innerText=_e$target.innerText,id=_e$target.id;console.log(id);content=innerText;content=content.replace(/\\r/g,\"\");content=content.replace(/\\n/g,\"\");_context14.next=9;return _regeneratorRuntime.awrap(CommentActions.writeComment({id:id,content:content}));case 9:_context14.next=11;return _regeneratorRuntime.awrap(CommentActions.showPostCommentList(id,1));case 11:_this.renewComment(id);for(i=0;i<document.getElementsByName('^^comment').length;i++){if(parseInt(document.getElementsByName('^^comment')[i].id)===parseInt(id)){document.getElementsByName('^^comment')[i].textContent='';document.getElementsByName('^^comment')[i].blur();}}_context14.next=15;return _regeneratorRuntime.awrap(CommentActions.getCommentNum(id));case 15:commentNum=_this.props.commentNum;_context14.next=18;return _regeneratorRuntime.awrap(TimelineActions.setTimelineCommentNum({'commentNum':commentNum,'commentId':id}));case 18:_context14.next=20;return _regeneratorRuntime.awrap(_this.setCommentTime(id));case 20:case\"end\":return _context14.stop();}}});};_this.renewComment=function(id){return setTimeout(function _callee15(){var _this$props13,presentComment,TimelineActions;return _regeneratorRuntime.async(function _callee15$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_this$props13=_this.props,presentComment=_this$props13.presentComment,TimelineActions=_this$props13.TimelineActions;_context15.next=3;return _regeneratorRuntime.awrap(TimelineActions.renewTimelineComment({'commentId':id,'presentComment':presentComment}));case 3:_context15.next=5;return _regeneratorRuntime.awrap(_this.setCommentTime(id));case 5:case\"end\":return _context15.stop();}}});},2000);};_this.handleMenu=function(e){var _this$props14=_this.props,data=_this$props14.data,TimelineActions=_this$props14.TimelineActions,BaseActions=_this$props14.BaseActions;var id=e.target.id;var index=data.findIndex(function(item){return item.get('postId')===parseInt(id);});if(data.getIn([index,'modifyVisible'])==='block')return;if(data.getIn([index,'menuVisible'])==='none'){TimelineActions.setShowMenuVisible({'index':index,'visible':'none'});BaseActions.setFollowMenuVisible('none');BaseActions.setAlarmMenuVisible('none');BaseActions.setUserMenuVisibility('none');TimelineActions.setMenuVisible({'index':index,'visible':'block'});}else{TimelineActions.setMenuVisible({'index':index,'visible':'none'});}};_this.modifyClick=function _callee16(e){var id,_this$props15,data,TimelineActions,PostActions,index;return _regeneratorRuntime.async(function _callee16$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:id=e.target.id;_this$props15=_this.props,data=_this$props15.data,TimelineActions=_this$props15.TimelineActions,PostActions=_this$props15.PostActions;index=data.findIndex(function(item){return item.get('postId')===parseInt(id);});_context16.next=5;return _regeneratorRuntime.awrap(TimelineActions.setMenuVisible({'index':index,'visible':'none'}));case 5:_context16.next=7;return _regeneratorRuntime.awrap(TimelineActions.setModifyVisible({'index':index,'visible':'inline-block'}));case 7:case\"end\":return _context16.stop();}}});};_this.get=function(type){return{'modify':'수정하시겠습니까?','delete':'삭제하시겠습니까?'}[type];};_this.buttonClick=function(e){var _this$props16=_this.props,PostActions=_this$props16.PostActions,TimelineActions=_this$props16.TimelineActions,data=_this$props16.data;var id=e.target.id;var category=e.target.dataset.category;var index=data.findIndex(function(item){return item.get('postId')===parseInt(id);});TimelineActions.setMenuVisible({'index':index,'visible':'none'});PostActions.setPopupId(id);PostActions.setPostPopupDisplay('block');PostActions.setPopupCategory(category);PostActions.setPopupText(_this.get(category));};_this.deleteClick=function _callee17(){var _this$props17,PostActions,TimelineActions,data,userid,popupId,index,userId;return _regeneratorRuntime.async(function _callee17$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:_this$props17=_this.props,PostActions=_this$props17.PostActions,TimelineActions=_this$props17.TimelineActions,data=_this$props17.data,userid=_this$props17.userid,popupId=_this$props17.popupId;index=data.findIndex(function(item){return item.get('postId')===parseInt(popupId);});userId=userid.substr(1);_context17.prev=3;_context17.next=6;return _regeneratorRuntime.awrap(PostActions.deleteFeed(popupId));case 6:_context17.next=8;return _regeneratorRuntime.awrap(TimelineActions.deleteFeed(index));case 8:_context17.next=10;return _regeneratorRuntime.awrap(TimelineActions.getTimelinePostNum(userId));case 10:_context17.next=15;break;case 12:_context17.prev=12;_context17.t0=_context17[\"catch\"](3);console.log(_context17.t0);case 15:case\"end\":return _context17.stop();}}},null,null,[[3,12]]);};_this.handleImageChange=function _callee18(e){var UserPageActions,file,formdata,userResult;return _regeneratorRuntime.async(function _callee18$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:e.preventDefault();UserPageActions=_this.props.UserPageActions;file=e.target.files[0];formdata=new FormData();formdata.set('file',file);_context18.next=7;return _regeneratorRuntime.awrap(UserPageActions.modifyUserImage(formdata));case 7:userResult=_this.props.userResult;console.log(userResult.toJS());storage.remove('loggedInfo');storage.set('loggedInfo',userResult.toJS());window.location.reload();case 12:case\"end\":return _context18.stop();}}});};_this.handleImage=function(e){var id=e.target.id;var imageid=e.target.dataset.imageid;_this.props.history.push(\"/feed/@:\".concat(id,\"/image/:\").concat(imageid));};_this.unavailableModify=function(index,id){var _this$props18=_this.props,TimelineActions=_this$props18.TimelineActions,data=_this$props18.data;for(var i=0;i<document.getElementsByName('^^content').length;i++){if(parseInt(document.getElementsByName('^^content')[i].id)===parseInt(id)){document.getElementsByName('^^content')[i].textContent=data.getIn([index,'content']);document.getElementsByName('^^content')[i].blur();}}TimelineActions.setModifyVisible({'index':index,'visible':'none'});};_this.handleCancel=function(e){var id=e.target.id;var _this$props19=_this.props,TimelineActions=_this$props19.TimelineActions,data=_this$props19.data,PostActions=_this$props19.PostActions;var index=data.findIndex(function(item){return item.get('postId')===parseInt(id);});_this.unavailableModify(index,id);};_this.handleWrite=function _callee19(){var _this$props20,TimelineActions,data,PostActions,popupId,index,showLevel;return _regeneratorRuntime.async(function _callee19$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:_this$props20=_this.props,TimelineActions=_this$props20.TimelineActions,data=_this$props20.data,PostActions=_this$props20.PostActions,popupId=_this$props20.popupId;index=data.findIndex(function(item){return item.get('postId')===parseInt(popupId);});showLevel=data.getIn([index,'showLevel']);_context19.prev=3;_context19.next=6;return _regeneratorRuntime.awrap(PostActions.modifyFeedInformation({'showLevel':showLevel,'postId':popupId,'content':data.getIn([index,'modifyText'])}));case 6:_context19.next=14;break;case 8:_context19.prev=8;_context19.t0=_context19[\"catch\"](3);if(!(_context19.t0.response.status===409)){_context19.next=14;break;}PostActions.setPopupText('글은 1000자 이하여야 합니다. 다시 입력해주세요.');PostActions.setPopupDisplay('block');return _context19.abrupt(\"return\");case 14:_this.unavailableModify(index,popupId);TimelineActions.setFeedContext({'index':index,'text':data.getIn([index,'modifyText'])});case 16:case\"end\":return _context19.stop();}}},null,null,[[3,8]]);};_this.handleWriteInput=function(e){var _e$target2=e.target,id=_e$target2.id,innerText=_e$target2.innerText;var _this$props21=_this.props,TimelineActions=_this$props21.TimelineActions,data=_this$props21.data,PostActions=_this$props21.PostActions;var index=data.findIndex(function(item){return item.get('postId')===parseInt(id);});TimelineActions.setModifyText({'index':index,'modifyText':innerText});};_this.handleViewChange=function(e){var id=e.target.id;var _this$props22=_this.props,TimelineActions=_this$props22.TimelineActions,data=_this$props22.data,BaseActions=_this$props22.BaseActions;var index=data.findIndex(function(item){return item.get('postId')===parseInt(id);});if(data.getIn([index,'showMenuVisible'])==='none'){TimelineActions.setShowMenuVisible({'index':index,'visible':'block'});BaseActions.setFollowMenuVisible('none');BaseActions.setAlarmMenuVisible('none');BaseActions.setUserMenuVisibility('none');TimelineActions.setMenuVisible({'index':index,'visible':'none'});}else{TimelineActions.setShowMenuVisible({'index':index,'visible':'none'});}};_this.handleShowLevel=function _callee20(e){var id,postid,_this$props23,data,PostActions,TimelineActions,index;return _regeneratorRuntime.async(function _callee20$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:id=e.target.id;postid=e.target.dataset.postid;console.log(postid);_this$props23=_this.props,data=_this$props23.data,PostActions=_this$props23.PostActions,TimelineActions=_this$props23.TimelineActions;index=data.findIndex(function(item){return item.get('postId')===parseInt(postid);});_context20.prev=5;_context20.next=8;return _regeneratorRuntime.awrap(PostActions.modifyFeedInformation({'showLevel':id,'postId':postid,'content':data.getIn([index,'content'])}));case 8:_context20.next=12;break;case 10:_context20.prev=10;_context20.t0=_context20[\"catch\"](5);case 12:TimelineActions.setFeedShowlevel({'index':index,'showLevel':id});TimelineActions.setShowMenuVisible({'index':index,'visible':'none'});case 14:case\"end\":return _context20.stop();}}},null,null,[[5,10]]);};_this.handleOk=function(){var _this$props24=_this.props,popupCategory=_this$props24.popupCategory,PostActions=_this$props24.PostActions;PostActions.setPostPopupDisplay('none');if(popupCategory==='modify')_this.handleWrite();if(popupCategory==='delete')_this.deleteClick();};_this.handlePopupCancel=function(){var PostActions=_this.props.PostActions;PostActions.setPostPopupDisplay('none');};_this.handlePopupOk=function(){var PostActions=_this.props.PostActions;PostActions.setPopupDisplay('none');};return _this;}_createClass(TimelineContainer,[{key:\"getSnapshotBeforeUpdate\",value:function getSnapshotBeforeUpdate(prevProps,prevState){return prevProps.userid!==this.props.userid||prevProps.data!==this.props.data;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){if(snapshot&&prevProps.userid!==this.props.userid){var handleTimeline=this.handleTimeline;handleTimeline();}else if(snapshot&&prevProps.data!==this.props.data){this.setTime();}}},{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps,nextState){return this.props.data!==nextProps.data||this.props.result!==nextProps.result||this.props.followDisplay!==nextProps.followDisplay||this.props.comment!==nextProps.comment||this.props.username!==nextProps.username||this.props.nickname!==nextProps.nickname||this.props.thumbnail!==nextProps.thumbnail||this.props.hashdisplay!==nextProps.hashdisplay||this.props.postNum!==nextProps.postNum||this.props.popupDisplay!==nextProps.popupDisplay||this.props.postPopupDisplay!==nextProps.postPopupDisplay;}},{key:\"render\",value:function render(){var data=this.props.data;if(!storage.get('loggedInfo')){return null;}var commentThumbnail=storage.get('loggedInfo').thumbnail;var hostUser=storage.get('loggedInfo').username;var _this$props25=this.props,hashdisplay=_this$props25.hashdisplay,keyid=_this$props25.keyid,totalNum=_this$props25.totalNum,postPopupDisplay=_this$props25.postPopupDisplay,popupText=_this$props25.popupText,popupDisplay=_this$props25.popupDisplay;var _this$props26=this.props,followNum=_this$props26.followNum,followerNum=_this$props26.followerNum,thumbnail=_this$props26.thumbnail,comment=_this$props26.comment,username=_this$props26.username,nickname=_this$props26.nickname,postNum=_this$props26.postNum,followDisplay=_this$props26.followDisplay,isfollow=_this$props26.isfollow,commentCategory=_this$props26.commentCategory;var handleFollowClick=this.handleFollowClick,overHashTag=this.overHashTag,outHashTag=this.outHashTag,handleLikeClick=this.handleLikeClick,handleCancelClick=this.handleCancelClick,enterComment=this.enterComment,handleCommentAdd=this.handleCommentAdd,handleComment=this.handleComment,handleMenu=this.handleMenu,handleImageChange=this.handleImageChange,handleImage=this.handleImage,handleCancel=this.handleCancel,modifyClick=this.modifyClick,handlePopupOk=this.handlePopupOk,handleWrite=this.handleWrite,handleWriteInput=this.handleWriteInput,handleViewChange=this.handleViewChange,handleShowLevel=this.handleShowLevel,handleOk=this.handleOk,handlePopupCancel=this.handlePopupCancel,buttonClick=this.buttonClick;return React.createElement(\"div\",null,React.createElement(PageWrapper,null,React.createElement(FeedList,{hostUser:hostUser,commentThumbnail:commentThumbnail,change:handleImageChange,thumbnail:thumbnail,comment:comment,username:username,nickname:nickname,followNum:followNum,followerNum:followerNum,followclick:handleFollowClick,followdisplay:followDisplay,postNum:postNum,isfollow:isfollow,like:handleLikeClick,mainfeed:data,hashdisplay:hashdisplay,hover:overHashTag,handleComment:handleComment,nothover:outHashTag,keyid:keyid,cancel:handleCancelClick,totalNum:totalNum,enterComment:enterComment,handleCommentAdd:handleCommentAdd,commentCategory:commentCategory,handleMenu:handleMenu,modifyClick:modifyClick,deleteClick:buttonClick,handleImage:handleImage,handleCancel:handleCancel,handleWrite:buttonClick,handleWriteInput:handleWriteInput,handleViewChange:handleViewChange,handleShowLevel:handleShowLevel})),React.createElement(PostPopup,{handleOk:handleOk,right:'40%',handleCancel:handlePopupCancel,text:popupText,display:postPopupDisplay}),React.createElement(Popup,{handlePopupOk:handlePopupOk,display:popupDisplay,text:popupText}));}}]);return TimelineContainer;}(Component);export default connect(function(state){return{user:state.user.getIn(['loggedInfo','username']),followNum:state.friend.get('followNum'),result:state.friend.get('result'),followerNum:state.friend.get('followerNum'),thumbnail:state.timeline.get('thumbnail'),comment:state.timeline.get('comment'),username:state.timeline.get('username'),nickname:state.timeline.get('nickname'),postNum:state.timeline.get('postNum'),followDisplay:state.timeline.get('followdisplay'),isfollow:state.friend.get('isFollow'),data:state.timeline.get('mainfeed'),page:state.timeline.get('page'),isTruePost:state.timeline.get('isTruePost'),hashdisplay:state.timeline.get('hashdisplay'),keyid:state.timeline.get('keyid'),totalNum:state.like.get('totalNum'),commentList:state.comment.get('commentList'),commentNum:state.comment.get('commentNum'),commentCategory:state.timeline.get('commentCategory'),commentdisplay:state.timeline.get('commentdisplay'),postId:state.post.get('postId'),presentComment:state.comment.get('presentComment'),lastComment:state.comment.get('lastComment'),userResult:state.userPage.get('result'),postPopupDisplay:state.post.get('postPopupDisplay'),popupText:state.post.get('popupText'),popupId:state.post.get('popupId'),popupDisplay:state.post.get('popupDisplay'),popupCategory:state.post.get('popupCategory')};},function(dispatch){return{FriendActions:bindActionCreators(friendActions,dispatch),TimelineActions:bindActionCreators(timelineActions,dispatch),LikeActions:bindActionCreators(likeActions,dispatch),CommentActions:bindActionCreators(commentActions,dispatch),BaseActions:bindActionCreators(baseActions,dispatch),PostActions:bindActionCreators(postActions,dispatch),UserPageActions:bindActionCreators(userPageActions,dispatch)};})(TimelineContainer);","map":{"version":3,"sources":["C:/Users/user/fronttimeline/src/containers/Timeline/TimelineContainer.js"],"names":["React","Component","connect","bindActionCreators","PageWrapper","FeedList","PostPopup","Popup","friendActions","timelineActions","likeActions","baseActions","postActions","storage","commentActions","userPageActions","TimelineContainer","handleScroll","e","scrollTop","srcElement","scrollingElement","window","innerHeight","scrollHeight","document","body","props","isTruePost","getFeedList","TimelineActions","addPage","page","userid","username","substr","getTimelineInformation","setFalsePost","overHashTag","setHashDisplay","setKey","target","id","outHashTag","handleTimeline","FriendActions","get","setFollowDisplay","getOtherInfoNum","getTimelinePostNum","notifyIsFollowUser","console","log","result","setComment","comment","setThumbnail","thumbnail","setUsername","setNickname","nickname","setTime","data","Promise","all","map","feed","index","time","timestring","dateTimeToFormatted","setTimelineTime","setCommentTime","findIndex","item","parseInt","comments","getIn","commentIndex","timestamp","setTimelineCommentTime","dt","min","c","Date","d","minsAgo","Math","floor","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","formatted","month","componentDidMount","addEventListener","handleFollowClick","isfollow","follow","unfollow","handleLikeClick","LikeActions","setLikeKey","clickLike","setTimelineLike","getLikeAndUserList","totalNum","setTimelineLikeNum","handleCancelClick","cancelLike","handleComment","CommentActions","category","dataset","setCommentCategory","setTimelineCommentDisplay","commentdisplay","showPostCommentList","setTimelineCommentPage","commentList","lastComment","setTimelineCommentList","handleCommentAdd","setTimelineCommentFalse","enterComment","event","keyCode","innerText","content","replace","writeComment","renewComment","i","getElementsByName","length","textContent","blur","getCommentNum","commentNum","setTimelineCommentNum","setTimeout","presentComment","renewTimelineComment","handleMenu","BaseActions","setShowMenuVisible","setFollowMenuVisible","setAlarmMenuVisible","setUserMenuVisibility","setMenuVisible","modifyClick","PostActions","setModifyVisible","type","buttonClick","setPopupId","setPostPopupDisplay","setPopupCategory","setPopupText","deleteClick","popupId","userId","deleteFeed","handleImageChange","preventDefault","UserPageActions","file","files","formdata","FormData","set","modifyUserImage","userResult","toJS","remove","location","reload","handleImage","imageid","history","push","unavailableModify","handleCancel","handleWrite","showLevel","modifyFeedInformation","response","status","setPopupDisplay","setFeedContext","handleWriteInput","setModifyText","handleViewChange","handleShowLevel","postid","setFeedShowlevel","handleOk","popupCategory","handlePopupCancel","handlePopupOk","prevProps","prevState","snapshot","nextProps","nextState","followDisplay","hashdisplay","postNum","popupDisplay","postPopupDisplay","commentThumbnail","hostUser","keyid","popupText","followNum","followerNum","commentCategory","state","user","friend","timeline","like","postId","post","userPage","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport PageWrapper from '../../components/PageWrapper';\r\nimport {FeedList} from '../../components/Timeline';\r\nimport {PostPopup,Popup} from '../../components/Popup';\r\nimport * as friendActions from '../../redux/modules/friend';\r\nimport * as timelineActions from '../../redux/modules/timeline';\r\nimport * as likeActions from '../../redux/modules/like';\r\nimport * as baseActions from '../../redux/modules/base';\r\nimport * as postActions from '../../redux/modules/post';\r\nimport storage from '../../lib/storage';\r\nimport * as commentActions from '../../redux/modules/comment';\r\nimport * as userPageActions from '../../redux/modules/userPage';\r\nclass TimelineContainer extends Component{\r\n    \r\n    handleScroll = async(e) => {\r\n        const scrollTop =e.srcElement.scrollingElement.scrollTop;\r\n        const { innerHeight } = window;\r\n      const { scrollHeight } = document.body;\r\n    \r\n      if (scrollTop+innerHeight >scrollHeight && this.props.isTruePost ) {\r\n         this.getFeedList();\r\n         await this.props.TimelineActions.addPage();\r\n        }\r\n    }\r\n      getFeedList = async() => {\r\n        const{TimelineActions,page,isTruePost,userid} = this.props;\r\n        var username = userid.substr(1);\r\n        if(isTruePost){\r\n            try{\r\n                 await TimelineActions.getTimelineInformation(username,page);\r\n            }catch(e){\r\n                await TimelineActions.setFalsePost();\r\n            }\r\n            \r\n            \r\n        }\r\n    }\r\n    overHashTag = (e) =>{\r\n        const {TimelineActions} = this.props;\r\n        TimelineActions.setHashDisplay('block');\r\n        TimelineActions.setKey(e.target.id);\r\n    }\r\n    outHashTag = () =>{\r\n        const {TimelineActions} = this.props;\r\n        TimelineActions.setHashDisplay('none');\r\n    }\r\n\r\n    handleTimeline =async()=>{\r\n        const {TimelineActions,FriendActions,userid} = this.props;\r\n        var id = userid.substr(1);\r\n        const {username} = storage.get('loggedInfo');\r\n        if(username === id)TimelineActions.setFollowDisplay('none');\r\n        else TimelineActions.setFollowDisplay('block');\r\n        try{\r\n        await FriendActions.getOtherInfoNum(id);\r\n        await TimelineActions.getTimelinePostNum(id);\r\n        await FriendActions.notifyIsFollowUser(id);\r\n        }catch(e){\r\n            console.log(e);\r\n            \r\n        }\r\n        const{result} = this.props;\r\n        TimelineActions.setComment(result.comment);\r\n        TimelineActions.setThumbnail(result.thumbnail);\r\n        TimelineActions.setUsername(result.username);\r\n        TimelineActions.setNickname(result.nickname);\r\n        \r\n\r\n    }\r\n\r\n    setTime = async() => {\r\n        const{data,TimelineActions} = this.props;\r\n                await Promise.all(\r\n                    data.map(\r\n                        async(feed,index) => {\r\n                            let time = feed.get('timestamp');\r\n                            let timestring = this.dateTimeToFormatted(time);\r\n                            await TimelineActions.setTimelineTime({timestring:timestring,index : index});\r\n                        }\r\n                    )\r\n                );\r\n    }\r\n    setCommentTime = async(id) => {\r\n        const{data,TimelineActions} = this.props;\r\n        let index = data.findIndex(item => item.get('postId')===parseInt(id));\r\n        const comments = data.getIn([index,'commentList']);\r\n                await Promise.all(\r\n                    comments.map(\r\n                        async(comment,commentIndex) => {\r\n                            let time = comment.timestamp;\r\n                            let timestring = this.dateTimeToFormatted(time);\r\n                            await TimelineActions.setTimelineCommentTime({timestring:timestring,index : index,commentIndex:commentIndex});\r\n                        }\r\n                    )\r\n                );\r\n    }\r\n    dateTimeToFormatted=(dt)=> {\r\n\t\tconst min = 60 * 1000;\r\n\t\tconst c = new Date();\r\n\t\tvar d = new Date(dt);\r\n\t\tvar minsAgo = Math.floor((c - d) / (min));\r\n\r\n\t\tvar result = {\r\n            'raw': d.getFullYear() + '-' + (d.getMonth() + 1 > 9 ? '' : '0') + (d.getMonth() + 1) \r\n            + '-' + (d.getDate() > 9 ? '' : '0') +  d.getDate() + ' ' + (d.getHours() > 9 ? '' : '0') \r\n            +  d.getHours() + ':' + (d.getMinutes() > 9 ? '' : '0') +  d.getMinutes() + ':'  \r\n            + (d.getSeconds() > 9 ? '' : '0') +  d.getSeconds(),\r\n            'month' : d.getFullYear() + '-' + (d.getMonth() + 1 > 9 ? '' : '0') + (d.getMonth() + 1) \r\n            + '-' + (d.getDate() > 9 ? '' : '0') +  d.getDate(),\r\n\t\t\t'formatted': ''\r\n\t\t};\r\n\r\n\t\tif (minsAgo < 60) { // 1시간 내\r\n\t\t\tresult.formatted = minsAgo + '분 전';\r\n\t\t} else if (minsAgo < 60 * 24) { // 하루 내\r\n\t\t\tresult.formatted = Math.floor(minsAgo / 60) + '시간 전';\r\n\t\t} else if(minsAgo < 60 * 24 * 30) { // 하루 이상\r\n\t\t\tresult.formatted = Math.floor(minsAgo / 60 / 24) + '일 전';\r\n\t\t} else{\r\n            result.formatted = result.month;\r\n        }\r\n\t\treturn result.formatted;\r\n\t};\r\n    getSnapshotBeforeUpdate(prevProps, prevState) {\r\n        return prevProps.userid !== this.props.userid || prevProps.data !== this.props.data;\r\n    }\r\n   componentDidUpdate(prevProps, prevState, snapshot){\r\n        \r\n        if(snapshot && prevProps.userid !== this.props.userid){\r\n        const {handleTimeline} = this;\r\n        handleTimeline();\r\n        }\r\n        else if(snapshot && prevProps.data !== this.props.data){\r\n            this.setTime();\r\n        }\r\n    }\r\n    \r\n    componentDidMount=async()=>{\r\n        const {handleTimeline} = this;\r\n        window.addEventListener(\"scroll\", this.handleScroll);\r\n        await this.getFeedList();\r\n        await this.props.TimelineActions.addPage();\r\n        await handleTimeline();\r\n    }\r\n    handleFollowClick =async()=>{\r\n        const {FriendActions,isfollow,userid} = this.props;\r\n        const id = userid.substr(1);\r\n        if(isfollow === '팔로우')\r\n            await FriendActions.follow(id);\r\n        else\r\n            await FriendActions.unfollow({'friendId': id});\r\n        await FriendActions.getOtherInfoNum(id);\r\n    }\r\n    handleLikeClick = async(e) =>{\r\n        const {LikeActions,TimelineActions} = this.props;\r\n        const id = e.target.id;\r\n        await TimelineActions.setLikeKey(id);\r\n        await LikeActions.clickLike(id);\r\n        await TimelineActions.setTimelineLike('none');\r\n        try{\r\n        await LikeActions.getLikeAndUserList(id,1);\r\n        }catch(e){}\r\n        const {totalNum} = this.props;\r\n        await TimelineActions.setTimelineLikeNum(totalNum);\r\n           \r\n    }\r\n    handleCancelClick =async(e) => {\r\n        const {LikeActions,TimelineActions} = this.props;\r\n        const id = e.target.id;\r\n        await TimelineActions.setLikeKey(id);\r\n        await LikeActions.cancelLike(id);\r\n        await TimelineActions.setTimelineLike('block');\r\n        try{\r\n        await LikeActions.getLikeAndUserList(id,1);\r\n        }catch(e){}\r\n        const {totalNum} = this.props;\r\n        await TimelineActions.setTimelineLikeNum(totalNum);\r\n    }\r\n    handleComment =async(e)=>{\r\n        const {CommentActions,TimelineActions,data} = this.props;\r\n        const {id} = e.target;\r\n        const {category} = e.target.dataset;\r\n        await TimelineActions.setCommentCategory(category);\r\n        await TimelineActions.setTimelineCommentDisplay(id);\r\n        const{commentdisplay} = this.props;\r\n        if(commentdisplay === 'block'){\r\n            let index = data.findIndex(item => item.get('postId')===parseInt(id));\r\n            let page = data.getIn([index,'commentPage']);\r\n            await CommentActions.showPostCommentList(id,page);\r\n            await TimelineActions.setTimelineCommentPage(id);\r\n            const{commentList,lastComment}=this.props;\r\n            if(lastComment)\r\n            await TimelineActions.setTimelineCommentList({'commentId' : id,'commentList':commentList,'trueComment' :false});\r\n            else\r\n            await TimelineActions.setTimelineCommentList({'commentId' : id,'commentList':commentList,'trueComment' :true});\r\n            await this.setCommentTime(id);\r\n        }\r\n    }\r\n    handleCommentAdd = async(e) =>{\r\n        const {id} = e.target;\r\n        const {TimelineActions,CommentActions,data} = this.props;\r\n        const index = data.findIndex(item => item.get('postId') ===parseInt(id));\r\n        if(data.getIn([index,'trueComment'])){\r\n            \r\n            const page = data.getIn([index,'commentPage']);\r\n            try{\r\n                await CommentActions.showPostCommentList(id,page);\r\n                await TimelineActions.setTimelineCommentPage(id);\r\n                const{commentList,lastComment}=this.props;\r\n            if(lastComment)\r\n            await TimelineActions.setTimelineCommentList({'commentId':id,'commentList':commentList,'trueComment' :false});\r\n            else\r\n            await TimelineActions.setTimelineCommentList({'commentId':id,'commentList':commentList,'trueComment' :true});\r\n            await this.setCommentTime(id);\r\n            }catch(e){\r\n                TimelineActions.setTimelineCommentFalse(id);\r\n            }\r\n        } \r\n    }\r\n    enterComment = async(e) =>{\r\n        if(window.event.keyCode === 13){\r\n            const {CommentActions,TimelineActions} = this.props;\r\n            const {innerText,id} = e.target;\r\n            console.log(id);\r\n            var content = innerText;\r\n            content = content.replace(/\\r/g, \"\");\r\n            content = content.replace(/\\n/g, \"\");\r\n            await CommentActions.writeComment({id,content});\r\n            await CommentActions.showPostCommentList(id,1);\r\n            this.renewComment(id);\r\n            for(var i = 0; i < document.getElementsByName('^^comment').length; i++){\r\n                if(parseInt(document.getElementsByName('^^comment')[i].id) === parseInt(id)){\r\n                    document.getElementsByName('^^comment')[i].textContent = '';\r\n                    document.getElementsByName('^^comment')[i].blur();\r\n                }\r\n            }\r\n            await CommentActions.getCommentNum(id);\r\n            var {commentNum} = this.props;\r\n            await TimelineActions.setTimelineCommentNum({'commentNum':commentNum,'commentId':id});\r\n            await this.setCommentTime(id);\r\n            \r\n        }\r\n    }\r\n    renewComment=(id)=>\r\n        setTimeout(async()=>{\r\n            const {presentComment,TimelineActions} = this.props;\r\n            await TimelineActions.renewTimelineComment({'commentId' : id,'presentComment':presentComment});\r\n            await this.setCommentTime(id);\r\n        },2000);\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return this.props.data !== nextProps.data || this.props.result !== nextProps.result || \r\n        this.props.followDisplay !== nextProps.followDisplay || this.props.comment !== nextProps.comment ||\r\n        this.props.username !== nextProps.username || this.props.nickname !== nextProps.nickname || \r\n        this.props.thumbnail !== nextProps.thumbnail || this.props.hashdisplay !== nextProps.hashdisplay\r\n        || this.props.postNum !== nextProps.postNum || this.props.popupDisplay !== nextProps.popupDisplay ||\r\n         this.props.postPopupDisplay !== nextProps.postPopupDisplay;\r\n    }\r\n\r\n    handleMenu = (e) => {\r\n        const {data,TimelineActions,BaseActions} = this.props;\r\n        const {id} = e.target;\r\n        const index = data.findIndex(item => item.get('postId')===parseInt(id));\r\n        if(data.getIn([index,'modifyVisible']) === 'block') return;\r\n        if(data.getIn([index,'menuVisible']) === 'none'){\r\n            TimelineActions.setShowMenuVisible({'index':index, 'visible':'none'});\r\n            BaseActions.setFollowMenuVisible('none');\r\n            BaseActions.setAlarmMenuVisible('none');\r\n            BaseActions.setUserMenuVisibility('none');\r\n            TimelineActions.setMenuVisible({'index':index, 'visible':'block'});\r\n        }\r\n        else{\r\n            TimelineActions.setMenuVisible({'index':index, 'visible':'none'});\r\n        }\r\n        \r\n    }\r\n\r\n    modifyClick = async(e) => {\r\n        const {id} = e.target;\r\n        const {data,TimelineActions,PostActions} = this.props;\r\n        const index = data.findIndex(item => item.get('postId')===parseInt(id));\r\n        \r\n        await TimelineActions.setMenuVisible({'index':index, 'visible':'none'});\r\n        await TimelineActions.setModifyVisible({'index' : index,'visible' : 'inline-block'});\r\n    }\r\n    get = (type) => {\r\n        return {\r\n            'modify' : '수정하시겠습니까?',\r\n            'delete' : '삭제하시겠습니까?'\r\n        }[type];\r\n    }\r\n    buttonClick = (e) => {\r\n        const {PostActions,TimelineActions,data} = this.props;\r\n        const {id} = e.target;\r\n        const {category} = e.target.dataset;\r\n        const index = data.findIndex(item => item.get('postId')===parseInt(id));\r\n        TimelineActions.setMenuVisible({'index':index, 'visible':'none'});\r\n        PostActions.setPopupId(id);\r\n        PostActions.setPostPopupDisplay('block');\r\n        PostActions.setPopupCategory(category);\r\n        PostActions.setPopupText(this.get(category));\r\n    }\r\n    deleteClick = async() => {\r\n        const {PostActions,TimelineActions,data,userid,popupId} = this.props;\r\n        const index = data.findIndex(item => item.get('postId')===parseInt(popupId));\r\n        const userId = userid.substr(1);\r\n        try{\r\n            await PostActions.deleteFeed(popupId);\r\n            await TimelineActions.deleteFeed(index);\r\n            await TimelineActions.getTimelinePostNum(userId);\r\n        }catch(e){\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    handleImageChange = async(e) => {\r\n        e.preventDefault();\r\n        const {UserPageActions} = this.props;\r\n        let file = e.target.files[0];\r\n        var formdata = new FormData();\r\n        formdata.set('file',file);\r\n        await UserPageActions.modifyUserImage(formdata);\r\n        const {userResult} = this.props;\r\n        console.log(userResult.toJS());\r\n        storage.remove('loggedInfo');\r\n        storage.set('loggedInfo',userResult.toJS());\r\n        window.location.reload();\r\n      }\r\n\r\n      handleImage =(e) =>{\r\n        const {id} = e.target;\r\n        const {imageid} = e.target.dataset;\r\n        this.props.history.push(`/feed/@:${id}/image/:${imageid}`);\r\n    }\r\n    unavailableModify =(index,id) => {\r\n        const {TimelineActions,data} = this.props;\r\n        for(var i = 0; i < document.getElementsByName('^^content').length; i++){\r\n            if(parseInt(document.getElementsByName('^^content')[i].id) === parseInt(id)){\r\n                document.getElementsByName('^^content')[i].textContent = data.getIn([index,'content']);\r\n                document.getElementsByName('^^content')[i].blur();\r\n            }\r\n        }\r\n        TimelineActions.setModifyVisible({'index' : index,'visible' : 'none'});\r\n    }\r\n    handleCancel = (e) => {\r\n        const {id} = e.target;\r\n        const {TimelineActions,data,PostActions} = this.props;\r\n        const index = data.findIndex(item => item.get('postId')===parseInt(id));\r\n        this.unavailableModify(index,id);\r\n    }\r\n    handleWrite = async() => {\r\n        const {TimelineActions,data,PostActions,popupId} = this.props;\r\n        const index = data.findIndex(item => item.get('postId')===parseInt(popupId));\r\n        let showLevel = data.getIn([index,'showLevel']);\r\n        try{\r\n        await PostActions.modifyFeedInformation({'showLevel' : showLevel, 'postId' : popupId, 'content' : data.getIn([index,'modifyText'])});\r\n        }catch(e){\r\n            if(e.response.status === 409){\r\n                PostActions.setPopupText('글은 1000자 이하여야 합니다. 다시 입력해주세요.');\r\n                PostActions.setPopupDisplay('block');\r\n                return;\r\n            }\r\n        }\r\n        this.unavailableModify(index,popupId);\r\n        TimelineActions.setFeedContext({'index': index,'text': data.getIn([index,'modifyText'])});\r\n        }\r\n        handleWriteInput = (e) => {\r\n            const {id,innerText} = e.target;\r\n            const {TimelineActions,data,PostActions} = this.props;\r\n            const index = data.findIndex(item => item.get('postId')===parseInt(id));\r\n            TimelineActions.setModifyText({'index' : index, 'modifyText' : innerText});\r\n        }\r\n        \r\n        handleViewChange = (e) => {\r\n            const {id} = e.target;\r\n            const {TimelineActions,data,BaseActions} = this.props;\r\n            const index = data.findIndex(item => item.get('postId')===parseInt(id));\r\n        if(data.getIn([index,'showMenuVisible']) === 'none'){\r\n            TimelineActions.setShowMenuVisible({'index':index, 'visible':'block'});\r\n            BaseActions.setFollowMenuVisible('none');\r\n            BaseActions.setAlarmMenuVisible('none');\r\n            BaseActions.setUserMenuVisibility('none');\r\n            TimelineActions.setMenuVisible({'index':index, 'visible':'none'});\r\n        }\r\n        else{\r\n            TimelineActions.setShowMenuVisible({'index':index, 'visible':'none'});\r\n        }\r\n        }\r\n        handleShowLevel = async(e) => {\r\n            const {id} = e.target;\r\n            const {postid} = e.target.dataset;\r\n            console.log(postid);\r\n            const {data,PostActions,TimelineActions} = this.props;\r\n            const index = data.findIndex(item => item.get('postId')===parseInt(postid));\r\n            try{\r\n            await PostActions.modifyFeedInformation({'showLevel' : id, 'postId' : postid, 'content' : data.getIn([index,'content'])});\r\n            }catch(e){\r\n\r\n            }\r\n            TimelineActions.setFeedShowlevel({'index':index,'showLevel':id});\r\n            TimelineActions.setShowMenuVisible({'index':index, 'visible':'none'});\r\n        }\r\n\r\n        handleOk = () => {\r\n            const {popupCategory,PostActions} = this.props;\r\n            PostActions.setPostPopupDisplay('none');\r\n            if(popupCategory === 'modify')\r\n                this.handleWrite();\r\n\r\n            if(popupCategory === 'delete')\r\n                this.deleteClick();\r\n        }\r\n        handlePopupCancel = () => {\r\n        const {PostActions} = this.props;\r\n        PostActions.setPostPopupDisplay('none');\r\n        }\r\n        handlePopupOk = () => {\r\n            const {PostActions} = this.props;\r\n        PostActions.setPopupDisplay('none');\r\n        }\r\n\r\n    render(){\r\n        \r\n        const {data} = this.props;\r\n        if(!storage.get('loggedInfo')) {\r\n            \r\n            return null;\r\n        }\r\n        const commentThumbnail = storage.get('loggedInfo').thumbnail; \r\n        const hostUser = storage.get('loggedInfo').username;\r\n        const {hashdisplay,keyid,totalNum,postPopupDisplay,popupText,popupDisplay} = this.props;\r\n        const {followNum,followerNum,thumbnail,comment,username,nickname,postNum,followDisplay,isfollow,commentCategory} = this.props;\r\n        const {handleFollowClick,overHashTag,outHashTag,handleLikeClick,handleCancelClick,enterComment,handleCommentAdd\r\n            ,handleComment,handleMenu,handleImageChange,handleImage,handleCancel,modifyClick,handlePopupOk,\r\n        handleWrite,handleWriteInput,handleViewChange,handleShowLevel,handleOk,handlePopupCancel,buttonClick} = this;\r\n        return(\r\n            <div>\r\n            <PageWrapper>\r\n            <FeedList hostUser={hostUser} commentThumbnail = {commentThumbnail} change = {handleImageChange}\r\n            thumbnail = {thumbnail} comment ={comment} username={username} nickname={nickname}\r\n            followNum = {followNum} followerNum = {followerNum}  followclick={handleFollowClick}\r\n             followdisplay ={followDisplay} postNum={postNum} isfollow = {isfollow} like = {handleLikeClick}\r\n             mainfeed={data} hashdisplay = {hashdisplay} hover = {overHashTag} handleComment = {handleComment}\r\n             nothover={outHashTag} keyid = {keyid} cancel = {handleCancelClick} totalNum = {totalNum}\r\n             enterComment = {enterComment} handleCommentAdd={handleCommentAdd} commentCategory={commentCategory}\r\n             handleMenu = {handleMenu} modifyClick={modifyClick} deleteClick = {buttonClick} handleImage={handleImage}\r\n             handleCancel = {handleCancel} handleWrite={buttonClick} handleWriteInput={handleWriteInput} \r\n             handleViewChange = {handleViewChange} handleShowLevel={handleShowLevel}/>\r\n          </PageWrapper>\r\n          <PostPopup handleOk={handleOk} right={'40%'} handleCancel={handlePopupCancel}\r\n             text={popupText} display={postPopupDisplay} />\r\n             <Popup handlePopupOk = {handlePopupOk} display={popupDisplay} text={popupText} />\r\n          </div>\r\n            );\r\n    }\r\n}\r\nexport default connect(\r\n    (state) => ({\r\n        user : state.user.getIn(['loggedInfo','username']),\r\n        followNum : state.friend.get('followNum'),\r\n        result : state.friend.get('result'),\r\n        followerNum : state.friend.get('followerNum'),\r\n        thumbnail : state.timeline.get('thumbnail'),\r\n        comment : state.timeline.get('comment'),\r\n        username : state.timeline.get('username'),\r\n        nickname : state.timeline.get('nickname'),\r\n        postNum : state.timeline.get('postNum'),\r\n        followDisplay : state.timeline.get('followdisplay'),\r\n        isfollow : state.friend.get('isFollow'),\r\n        data : state.timeline.get('mainfeed'),\r\n        page : state.timeline.get('page'),\r\n        isTruePost : state.timeline.get('isTruePost'),\r\n        hashdisplay : state.timeline.get('hashdisplay'),\r\n        keyid : state.timeline.get('keyid'),\r\n        totalNum : state.like.get('totalNum'),\r\n        commentList : state.comment.get('commentList'),\r\n        commentNum : state.comment.get('commentNum'),\r\n        commentCategory : state.timeline.get('commentCategory'),\r\n        commentdisplay : state.timeline.get('commentdisplay'),\r\n        postId : state.post.get('postId'),\r\n        presentComment : state.comment.get('presentComment'),\r\n        lastComment : state.comment.get('lastComment'),\r\n        userResult : state.userPage.get('result'),\r\n        postPopupDisplay : state.post.get('postPopupDisplay'),\r\n        popupText : state.post.get('popupText'),\r\n        popupId : state.post.get('popupId'),\r\n        popupDisplay : state.post.get('popupDisplay'),\r\n        popupCategory : state.post.get('popupCategory')\r\n\r\n    }),\r\n    (dispatch) => ({\r\n        FriendActions: bindActionCreators(friendActions, dispatch),\r\n        TimelineActions : bindActionCreators(timelineActions,dispatch),\r\n        LikeActions : bindActionCreators(likeActions,dispatch),\r\n        CommentActions : bindActionCreators(commentActions,dispatch),\r\n        BaseActions : bindActionCreators(baseActions,dispatch),\r\n        PostActions : bindActionCreators(postActions,dispatch),\r\n        UserPageActions : bindActionCreators(userPageActions,dispatch)\r\n\r\n    })\r\n)(TimelineContainer);"]},"metadata":{},"sourceType":"module"}