{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\fronttimeline\\\\src\\\\containers\\\\Timeline\\\\TimelineContainer.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport PageWrapper from '../../components/PageWrapper';\nimport { FeedList } from '../../components/Timeline';\nimport { PostPopup, Popup } from '../../components/Popup';\nimport * as friendActions from '../../redux/modules/friend';\nimport * as timelineActions from '../../redux/modules/timeline';\nimport * as likeActions from '../../redux/modules/like';\nimport * as baseActions from '../../redux/modules/base';\nimport * as postActions from '../../redux/modules/post';\nimport * as userActions from '../../redux/modules/user';\nimport { setUserActions, handleLogout } from '../Function/SignModule';\nimport { dateTimeToFormatted } from '../Function/dateTimeModule';\nimport storage from '../../lib/storage';\nimport * as commentActions from '../../redux/modules/comment';\nimport * as userPageActions from '../../redux/modules/userPage';\n\nclass TimelineContainer extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleScroll = async e => {\n      const scrollTop = e.srcElement.scrollingElement.scrollTop;\n      const _window = window,\n            innerHeight = _window.innerHeight;\n      const scrollHeight = document.body.scrollHeight;\n\n      if (scrollTop + innerHeight > scrollHeight && this.props.isTruePost) {\n        this.getFeedList();\n        await this.props.TimelineActions.addPage();\n      }\n    };\n\n    this.getFeedList = async () => {\n      const _this$props = this.props,\n            TimelineActions = _this$props.TimelineActions,\n            page = _this$props.page,\n            isTruePost = _this$props.isTruePost,\n            userid = _this$props.userid;\n      var username = userid.substr(1);\n\n      if (isTruePost) {\n        try {\n          await TimelineActions.getTimelineInformation(username, page);\n        } catch (e) {\n          await TimelineActions.setFalsePost();\n        }\n      }\n    };\n\n    this.overHashTag = e => {\n      const TimelineActions = this.props.TimelineActions;\n      TimelineActions.setHashDisplay('block');\n      TimelineActions.setKey(e.target.id);\n    };\n\n    this.outHashTag = () => {\n      const TimelineActions = this.props.TimelineActions;\n      TimelineActions.setHashDisplay('none');\n    };\n\n    this.handleTimeline = async () => {\n      const _this$props2 = this.props,\n            TimelineActions = _this$props2.TimelineActions,\n            FriendActions = _this$props2.FriendActions,\n            userid = _this$props2.userid;\n      var id = userid.substr(1);\n\n      const _storage$get = storage.get('loggedInfo'),\n            username = _storage$get.username;\n\n      if (username === id) TimelineActions.setFollowDisplay('none');else TimelineActions.setFollowDisplay('block');\n\n      try {\n        await FriendActions.getOtherInfoNum(id);\n        await TimelineActions.getTimelinePostNum(id);\n        await FriendActions.notifyIsFollowUser(id);\n      } catch (e) {\n        console.log(e);\n      }\n\n      const result = this.props.result;\n      TimelineActions.setComment(result.comment);\n      TimelineActions.setThumbnail(result.thumbnail);\n      TimelineActions.setUsername(result.username);\n      TimelineActions.setNickname(result.nickname);\n    };\n\n    this.setTime = async () => {\n      const _this$props3 = this.props,\n            data = _this$props3.data,\n            TimelineActions = _this$props3.TimelineActions;\n      await Promise.all(data.map(async (feed, index) => {\n        let time = feed.get('timestamp');\n        let timestring = dateTimeToFormatted(time);\n        await TimelineActions.setTimelineTime({\n          timestring: timestring,\n          index: index\n        });\n      }));\n    };\n\n    this.setCommentTime = async id => {\n      const _this$props4 = this.props,\n            data = _this$props4.data,\n            TimelineActions = _this$props4.TimelineActions;\n      let index = data.findIndex(item => item.get('postId') === parseInt(id));\n      const comments = data.getIn([index, 'commentList']);\n      await Promise.all(comments.map(async (comment, commentIndex) => {\n        let time = comment.timestamp;\n        let timestring = dateTimeToFormatted(time);\n        await TimelineActions.setTimelineCommentTime({\n          timestring: timestring,\n          index: index,\n          commentIndex: commentIndex\n        });\n      }));\n    };\n\n    this.componentDidMount = async () => {\n      const handleTimeline = this.handleTimeline;\n      window.addEventListener(\"scroll\", this.handleScroll);\n      await this.getFeedList();\n      setUserActions(this.props.UserActions);\n      await this.props.TimelineActions.addPage();\n      await handleTimeline();\n    };\n\n    this.handleFollowClick = async () => {\n      const _this$props5 = this.props,\n            FriendActions = _this$props5.FriendActions,\n            isfollow = _this$props5.isfollow,\n            userid = _this$props5.userid;\n      const id = userid.substr(1);\n      if (isfollow === '팔로우') await FriendActions.follow(id);else await FriendActions.unfollow({\n        'friendId': id\n      });\n      await FriendActions.getOtherInfoNum(id);\n    };\n\n    this.handleLikeClick = async e => {\n      const _this$props6 = this.props,\n            LikeActions = _this$props6.LikeActions,\n            TimelineActions = _this$props6.TimelineActions;\n      const id = e.target.id;\n      await TimelineActions.setLikeKey(id);\n      await LikeActions.clickLike(id);\n      await TimelineActions.setTimelineLike('none');\n\n      try {\n        await LikeActions.getLikeAndUserList(id, 1);\n      } catch (e) {}\n\n      const totalNum = this.props.totalNum;\n      await TimelineActions.setTimelineLikeNum(totalNum);\n    };\n\n    this.handleCancelClick = async e => {\n      const _this$props7 = this.props,\n            LikeActions = _this$props7.LikeActions,\n            TimelineActions = _this$props7.TimelineActions;\n      const id = e.target.id;\n      await TimelineActions.setLikeKey(id);\n      await LikeActions.cancelLike(id);\n      await TimelineActions.setTimelineLike('block');\n\n      try {\n        await LikeActions.getLikeAndUserList(id, 1);\n      } catch (e) {}\n\n      const totalNum = this.props.totalNum;\n      await TimelineActions.setTimelineLikeNum(totalNum);\n    };\n\n    this.handleComment = async e => {\n      const _this$props8 = this.props,\n            CommentActions = _this$props8.CommentActions,\n            TimelineActions = _this$props8.TimelineActions,\n            data = _this$props8.data;\n      const id = e.target.id;\n      const category = e.target.dataset.category;\n      await TimelineActions.setCommentCategory(category);\n      await TimelineActions.setTimelineCommentDisplay(id);\n      const commentdisplay = this.props.commentdisplay;\n\n      if (commentdisplay === 'block') {\n        let index = data.findIndex(item => item.get('postId') === parseInt(id));\n        let page = data.getIn([index, 'commentPage']);\n        await CommentActions.showPostCommentList(id, page);\n        await TimelineActions.setTimelineCommentPage(id);\n        const _this$props9 = this.props,\n              commentList = _this$props9.commentList,\n              lastComment = _this$props9.lastComment;\n        if (lastComment) await TimelineActions.setTimelineCommentList({\n          'commentId': id,\n          'commentList': commentList,\n          'trueComment': false\n        });else await TimelineActions.setTimelineCommentList({\n          'commentId': id,\n          'commentList': commentList,\n          'trueComment': true\n        });\n        await this.setCommentTime(id);\n      }\n    };\n\n    this.handleCommentAdd = async e => {\n      const id = e.target.id;\n      const _this$props10 = this.props,\n            TimelineActions = _this$props10.TimelineActions,\n            CommentActions = _this$props10.CommentActions,\n            data = _this$props10.data;\n      const index = data.findIndex(item => item.get('postId') === parseInt(id));\n\n      if (data.getIn([index, 'trueComment'])) {\n        const page = data.getIn([index, 'commentPage']);\n\n        try {\n          await CommentActions.showPostCommentList(id, page);\n          await TimelineActions.setTimelineCommentPage(id);\n          const _this$props11 = this.props,\n                commentList = _this$props11.commentList,\n                lastComment = _this$props11.lastComment;\n          if (lastComment) await TimelineActions.setTimelineCommentList({\n            'commentId': id,\n            'commentList': commentList,\n            'trueComment': false\n          });else await TimelineActions.setTimelineCommentList({\n            'commentId': id,\n            'commentList': commentList,\n            'trueComment': true\n          });\n          await this.setCommentTime(id);\n        } catch (e) {\n          TimelineActions.setTimelineCommentFalse(id);\n        }\n      }\n    };\n\n    this.enterComment = async e => {\n      if (window.event.keyCode === 13) {\n        const _this$props12 = this.props,\n              CommentActions = _this$props12.CommentActions,\n              TimelineActions = _this$props12.TimelineActions;\n        const _e$target = e.target,\n              innerText = _e$target.innerText,\n              id = _e$target.id;\n        var content = innerText;\n        content = content.replace(/\\r/g, \"\");\n        content = content.replace(/\\n/g, \"\");\n        await CommentActions.writeComment({\n          id,\n          content\n        });\n        await CommentActions.showPostCommentList(id, 1);\n        this.renewComment(id);\n\n        for (var i = 0; i < document.getElementsByName('^^comment').length; i++) {\n          if (parseInt(document.getElementsByName('^^comment')[i].id) === parseInt(id)) {\n            document.getElementsByName('^^comment')[i].textContent = '';\n            document.getElementsByName('^^comment')[i].blur();\n          }\n        }\n\n        await CommentActions.getCommentNum(id);\n        var commentNum = this.props.commentNum;\n        await TimelineActions.setTimelineCommentNum({\n          'commentNum': commentNum,\n          'commentId': id\n        });\n        await this.setCommentTime(id);\n      }\n    };\n\n    this.renewComment = id => setTimeout(async () => {\n      const _this$props13 = this.props,\n            presentComment = _this$props13.presentComment,\n            TimelineActions = _this$props13.TimelineActions;\n      await TimelineActions.renewTimelineComment({\n        'commentId': id,\n        'presentComment': presentComment\n      });\n      await this.setCommentTime(id);\n    }, 2000);\n\n    this.handleMenu = e => {\n      const _this$props14 = this.props,\n            data = _this$props14.data,\n            TimelineActions = _this$props14.TimelineActions,\n            BaseActions = _this$props14.BaseActions;\n      const id = e.target.id;\n      const index = data.findIndex(item => item.get('postId') === parseInt(id));\n      if (data.getIn([index, 'modifyVisible']) === 'block') return;\n\n      if (data.getIn([index, 'menuVisible']) === 'none') {\n        TimelineActions.setShowMenuVisible({\n          'index': index,\n          'visible': 'none'\n        });\n        BaseActions.setFollowMenuVisible('none');\n        BaseActions.setAlarmMenuVisible('none');\n        BaseActions.setUserMenuVisibility('none');\n        TimelineActions.setMenuVisible({\n          'index': index,\n          'visible': 'block'\n        });\n      } else {\n        TimelineActions.setMenuVisible({\n          'index': index,\n          'visible': 'none'\n        });\n      }\n    };\n\n    this.modifyClick = async e => {\n      const id = e.target.id;\n      const _this$props15 = this.props,\n            data = _this$props15.data,\n            TimelineActions = _this$props15.TimelineActions;\n      const index = data.findIndex(item => item.get('postId') === parseInt(id));\n      await TimelineActions.setMenuVisible({\n        'index': index,\n        'visible': 'none'\n      });\n      await TimelineActions.setModifyVisible({\n        'index': index,\n        'visible': 'inline-block'\n      });\n    };\n\n    this.get = type => {\n      return {\n        'modify': '수정하시겠습니까?',\n        'delete': '삭제하시겠습니까?'\n      }[type];\n    };\n\n    this.buttonClick = e => {\n      const _this$props16 = this.props,\n            PostActions = _this$props16.PostActions,\n            TimelineActions = _this$props16.TimelineActions,\n            data = _this$props16.data;\n      const id = e.target.id;\n      const category = e.target.dataset.category;\n      const index = data.findIndex(item => item.get('postId') === parseInt(id));\n      TimelineActions.setMenuVisible({\n        'index': index,\n        'visible': 'none'\n      });\n      PostActions.setPopupId(id);\n      PostActions.setPostPopupDisplay('block');\n      PostActions.setPopupCategory(category);\n      PostActions.setPopupText(this.get(category));\n    };\n\n    this.deleteClick = async () => {\n      const _this$props17 = this.props,\n            PostActions = _this$props17.PostActions,\n            TimelineActions = _this$props17.TimelineActions,\n            data = _this$props17.data,\n            userid = _this$props17.userid,\n            popupId = _this$props17.popupId;\n      const index = data.findIndex(item => item.get('postId') === parseInt(popupId));\n      const userId = userid.substr(1);\n\n      try {\n        await PostActions.deleteFeed(popupId);\n        await TimelineActions.deleteFeed(index);\n        await TimelineActions.getTimelinePostNum(userId);\n      } catch (e) {\n        console.log(e);\n      }\n    };\n\n    this.handleImageChange = async e => {\n      e.preventDefault();\n      const UserPageActions = this.props.UserPageActions;\n      let file = e.target.files[0];\n      var formdata = new FormData();\n      formdata.set('file', file);\n      await UserPageActions.modifyUserImage(formdata);\n      const userResult = this.props.userResult;\n      console.log(userResult.toJS());\n      storage.remove('loggedInfo');\n      storage.set('loggedInfo', userResult.toJS());\n      window.location.reload();\n    };\n\n    this.handleImage = e => {\n      const id = e.target.id;\n      const imageid = e.target.dataset.imageid;\n      this.props.history.push(`/feed/@:${id}/image/:${imageid}`);\n    };\n\n    this.unavailableModify = (index, id) => {\n      const _this$props18 = this.props,\n            TimelineActions = _this$props18.TimelineActions,\n            data = _this$props18.data;\n\n      for (var i = 0; i < document.getElementsByName('^^content').length; i++) {\n        if (parseInt(document.getElementsByName('^^content')[i].id) === parseInt(id)) {\n          document.getElementsByName('^^content')[i].textContent = data.getIn([index, 'content']);\n          document.getElementsByName('^^content')[i].blur();\n        }\n      }\n\n      TimelineActions.setModifyVisible({\n        'index': index,\n        'visible': 'none'\n      });\n    };\n\n    this.handleCancel = e => {\n      const id = e.target.id;\n      const data = this.props.data;\n      const index = data.findIndex(item => item.get('postId') === parseInt(id));\n      this.unavailableModify(index, id);\n    };\n\n    this.handleWrite = async () => {\n      const _this$props19 = this.props,\n            TimelineActions = _this$props19.TimelineActions,\n            data = _this$props19.data,\n            PostActions = _this$props19.PostActions,\n            popupId = _this$props19.popupId;\n      const index = data.findIndex(item => item.get('postId') === parseInt(popupId));\n      let showLevel = data.getIn([index, 'showLevel']);\n\n      try {\n        await PostActions.modifyFeedInformation({\n          'showLevel': showLevel,\n          'postId': popupId,\n          'content': data.getIn([index, 'modifyText'])\n        });\n      } catch (e) {\n        if (e.response.status === 409) {\n          PostActions.setPopupText('글은 1000자 이하여야 합니다. 다시 입력해주세요.');\n          PostActions.setPopupDisplay('block');\n          return;\n        }\n      }\n\n      this.unavailableModify(index, popupId);\n      TimelineActions.setFeedContext({\n        'index': index,\n        'text': data.getIn([index, 'modifyText'])\n      });\n    };\n\n    this.handleWriteInput = e => {\n      const _e$target2 = e.target,\n            id = _e$target2.id,\n            innerText = _e$target2.innerText;\n      const _this$props20 = this.props,\n            TimelineActions = _this$props20.TimelineActions,\n            data = _this$props20.data;\n      const index = data.findIndex(item => item.get('postId') === parseInt(id));\n      TimelineActions.setModifyText({\n        'index': index,\n        'modifyText': innerText\n      });\n    };\n\n    this.handleViewChange = e => {\n      const id = e.target.id;\n      const _this$props21 = this.props,\n            TimelineActions = _this$props21.TimelineActions,\n            data = _this$props21.data,\n            BaseActions = _this$props21.BaseActions;\n      const index = data.findIndex(item => item.get('postId') === parseInt(id));\n\n      if (data.getIn([index, 'showMenuVisible']) === 'none') {\n        TimelineActions.setShowMenuVisible({\n          'index': index,\n          'visible': 'block'\n        });\n        BaseActions.setFollowMenuVisible('none');\n        BaseActions.setAlarmMenuVisible('none');\n        BaseActions.setUserMenuVisibility('none');\n        TimelineActions.setMenuVisible({\n          'index': index,\n          'visible': 'none'\n        });\n      } else {\n        TimelineActions.setShowMenuVisible({\n          'index': index,\n          'visible': 'none'\n        });\n      }\n    };\n\n    this.handleShowLevel = async e => {\n      const id = e.target.id;\n      const postid = e.target.dataset.postid;\n      console.log(postid);\n      const _this$props22 = this.props,\n            data = _this$props22.data,\n            PostActions = _this$props22.PostActions,\n            TimelineActions = _this$props22.TimelineActions;\n      const index = data.findIndex(item => item.get('postId') === parseInt(postid));\n\n      try {\n        await PostActions.modifyFeedInformation({\n          'showLevel': id,\n          'postId': postid,\n          'content': data.getIn([index, 'content'])\n        });\n      } catch (e) {}\n\n      TimelineActions.setFeedShowlevel({\n        'index': index,\n        'showLevel': id\n      });\n      TimelineActions.setShowMenuVisible({\n        'index': index,\n        'visible': 'none'\n      });\n    };\n\n    this.handleOk = () => {\n      const _this$props23 = this.props,\n            popupCategory = _this$props23.popupCategory,\n            PostActions = _this$props23.PostActions;\n      PostActions.setPostPopupDisplay('none');\n      if (popupCategory === 'modify') this.handleWrite();\n      if (popupCategory === 'delete') this.deleteClick();else handleLogout();\n    };\n\n    this.handlePopupCancel = () => {\n      const PostActions = this.props.PostActions;\n      PostActions.setPostPopupDisplay('none');\n    };\n\n    this.handlePopupOk = () => {\n      const PostActions = this.props.PostActions;\n      PostActions.setPopupDisplay('none');\n    };\n  }\n\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    return prevProps.userid !== this.props.userid || prevProps.data !== this.props.data;\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (snapshot && prevProps.userid !== this.props.userid) {\n      const handleTimeline = this.handleTimeline;\n      handleTimeline();\n    } else if (snapshot && prevProps.data !== this.props.data) {\n      this.setTime();\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return this.props.data !== nextProps.data || this.props.result !== nextProps.result || this.props.followDisplay !== nextProps.followDisplay || this.props.comment !== nextProps.comment || this.props.username !== nextProps.username || this.props.nickname !== nextProps.nickname || this.props.thumbnail !== nextProps.thumbnail || this.props.hashdisplay !== nextProps.hashdisplay || this.props.postNum !== nextProps.postNum || this.props.popupDisplay !== nextProps.popupDisplay || this.props.postPopupDisplay !== nextProps.postPopupDisplay;\n  }\n\n  render() {\n    const data = this.props.data;\n\n    if (!storage.get('loggedInfo')) {\n      return null;\n    }\n\n    const commentThumbnail = storage.get('loggedInfo').thumbnail;\n    const hostUser = storage.get('loggedInfo').username;\n    const _this$props24 = this.props,\n          hashdisplay = _this$props24.hashdisplay,\n          keyid = _this$props24.keyid,\n          totalNum = _this$props24.totalNum,\n          postPopupDisplay = _this$props24.postPopupDisplay,\n          popupText = _this$props24.popupText,\n          popupDisplay = _this$props24.popupDisplay;\n    const _this$props25 = this.props,\n          followNum = _this$props25.followNum,\n          followerNum = _this$props25.followerNum,\n          thumbnail = _this$props25.thumbnail,\n          comment = _this$props25.comment,\n          username = _this$props25.username,\n          nickname = _this$props25.nickname,\n          postNum = _this$props25.postNum,\n          followDisplay = _this$props25.followDisplay,\n          isfollow = _this$props25.isfollow,\n          commentCategory = _this$props25.commentCategory;\n    const handleFollowClick = this.handleFollowClick,\n          overHashTag = this.overHashTag,\n          outHashTag = this.outHashTag,\n          handleLikeClick = this.handleLikeClick,\n          handleCancelClick = this.handleCancelClick,\n          enterComment = this.enterComment,\n          handleCommentAdd = this.handleCommentAdd,\n          handleComment = this.handleComment,\n          handleMenu = this.handleMenu,\n          handleImageChange = this.handleImageChange,\n          handleImage = this.handleImage,\n          handleCancel = this.handleCancel,\n          modifyClick = this.modifyClick,\n          handlePopupOk = this.handlePopupOk,\n          handleWriteInput = this.handleWriteInput,\n          handleViewChange = this.handleViewChange,\n          handleShowLevel = this.handleShowLevel,\n          handleOk = this.handleOk,\n          handlePopupCancel = this.handlePopupCancel,\n          buttonClick = this.buttonClick;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 417\n      },\n      __self: this\n    }, React.createElement(PageWrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418\n      },\n      __self: this\n    }, React.createElement(FeedList, {\n      hostUser: hostUser,\n      commentThumbnail: commentThumbnail,\n      change: handleImageChange,\n      thumbnail: thumbnail,\n      comment: comment,\n      username: username,\n      nickname: nickname,\n      followNum: followNum,\n      followerNum: followerNum,\n      followclick: handleFollowClick,\n      followdisplay: followDisplay,\n      postNum: postNum,\n      isfollow: isfollow,\n      like: handleLikeClick,\n      mainfeed: data,\n      hashdisplay: hashdisplay,\n      hover: overHashTag,\n      handleComment: handleComment,\n      nothover: outHashTag,\n      keyid: keyid,\n      cancel: handleCancelClick,\n      totalNum: totalNum,\n      enterComment: enterComment,\n      handleCommentAdd: handleCommentAdd,\n      commentCategory: commentCategory,\n      handleMenu: handleMenu,\n      modifyClick: modifyClick,\n      deleteClick: buttonClick,\n      handleImage: handleImage,\n      handleCancel: handleCancel,\n      handleWrite: buttonClick,\n      handleWriteInput: handleWriteInput,\n      handleViewChange: handleViewChange,\n      handleShowLevel: handleShowLevel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419\n      },\n      __self: this\n    })), React.createElement(PostPopup, {\n      handleOk: handleOk,\n      right: '40%',\n      handleCancel: handlePopupCancel,\n      text: popupText,\n      display: postPopupDisplay,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430\n      },\n      __self: this\n    }), React.createElement(Popup, {\n      handlePopupOk: handlePopupOk,\n      display: popupDisplay,\n      text: popupText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default connect(state => ({\n  user: state.user.getIn(['loggedInfo', 'username']),\n  followNum: state.friend.get('followNum'),\n  result: state.friend.get('result'),\n  followerNum: state.friend.get('followerNum'),\n  thumbnail: state.timeline.get('thumbnail'),\n  comment: state.timeline.get('comment'),\n  username: state.timeline.get('username'),\n  nickname: state.timeline.get('nickname'),\n  postNum: state.timeline.get('postNum'),\n  followDisplay: state.timeline.get('followdisplay'),\n  isfollow: state.friend.get('isFollow'),\n  data: state.timeline.get('mainfeed'),\n  page: state.timeline.get('page'),\n  isTruePost: state.timeline.get('isTruePost'),\n  hashdisplay: state.timeline.get('hashdisplay'),\n  keyid: state.timeline.get('keyid'),\n  totalNum: state.like.get('totalNum'),\n  commentList: state.comment.get('commentList'),\n  commentNum: state.comment.get('commentNum'),\n  commentCategory: state.timeline.get('commentCategory'),\n  commentdisplay: state.timeline.get('commentdisplay'),\n  postId: state.post.get('postId'),\n  presentComment: state.comment.get('presentComment'),\n  lastComment: state.comment.get('lastComment'),\n  userResult: state.userPage.get('result'),\n  postPopupDisplay: state.post.get('postPopupDisplay'),\n  popupText: state.post.get('popupText'),\n  popupId: state.post.get('popupId'),\n  popupDisplay: state.post.get('popupDisplay'),\n  popupCategory: state.post.get('popupCategory')\n}), dispatch => ({\n  FriendActions: bindActionCreators(friendActions, dispatch),\n  TimelineActions: bindActionCreators(timelineActions, dispatch),\n  LikeActions: bindActionCreators(likeActions, dispatch),\n  CommentActions: bindActionCreators(commentActions, dispatch),\n  BaseActions: bindActionCreators(baseActions, dispatch),\n  PostActions: bindActionCreators(postActions, dispatch),\n  UserPageActions: bindActionCreators(userPageActions, dispatch),\n  UserActions: bindActionCreators(userActions, dispatch)\n}))(TimelineContainer);","map":{"version":3,"sources":["C:/Users/user/fronttimeline/src/containers/Timeline/TimelineContainer.js"],"names":["React","Component","connect","bindActionCreators","PageWrapper","FeedList","PostPopup","Popup","friendActions","timelineActions","likeActions","baseActions","postActions","userActions","setUserActions","handleLogout","dateTimeToFormatted","storage","commentActions","userPageActions","TimelineContainer","handleScroll","e","scrollTop","srcElement","scrollingElement","window","innerHeight","scrollHeight","document","body","props","isTruePost","getFeedList","TimelineActions","addPage","page","userid","username","substr","getTimelineInformation","setFalsePost","overHashTag","setHashDisplay","setKey","target","id","outHashTag","handleTimeline","FriendActions","get","setFollowDisplay","getOtherInfoNum","getTimelinePostNum","notifyIsFollowUser","console","log","result","setComment","comment","setThumbnail","thumbnail","setUsername","setNickname","nickname","setTime","data","Promise","all","map","feed","index","time","timestring","setTimelineTime","setCommentTime","findIndex","item","parseInt","comments","getIn","commentIndex","timestamp","setTimelineCommentTime","componentDidMount","addEventListener","UserActions","handleFollowClick","isfollow","follow","unfollow","handleLikeClick","LikeActions","setLikeKey","clickLike","setTimelineLike","getLikeAndUserList","totalNum","setTimelineLikeNum","handleCancelClick","cancelLike","handleComment","CommentActions","category","dataset","setCommentCategory","setTimelineCommentDisplay","commentdisplay","showPostCommentList","setTimelineCommentPage","commentList","lastComment","setTimelineCommentList","handleCommentAdd","setTimelineCommentFalse","enterComment","event","keyCode","innerText","content","replace","writeComment","renewComment","i","getElementsByName","length","textContent","blur","getCommentNum","commentNum","setTimelineCommentNum","setTimeout","presentComment","renewTimelineComment","handleMenu","BaseActions","setShowMenuVisible","setFollowMenuVisible","setAlarmMenuVisible","setUserMenuVisibility","setMenuVisible","modifyClick","setModifyVisible","type","buttonClick","PostActions","setPopupId","setPostPopupDisplay","setPopupCategory","setPopupText","deleteClick","popupId","userId","deleteFeed","handleImageChange","preventDefault","UserPageActions","file","files","formdata","FormData","set","modifyUserImage","userResult","toJS","remove","location","reload","handleImage","imageid","history","push","unavailableModify","handleCancel","handleWrite","showLevel","modifyFeedInformation","response","status","setPopupDisplay","setFeedContext","handleWriteInput","setModifyText","handleViewChange","handleShowLevel","postid","setFeedShowlevel","handleOk","popupCategory","handlePopupCancel","handlePopupOk","getSnapshotBeforeUpdate","prevProps","prevState","componentDidUpdate","snapshot","shouldComponentUpdate","nextProps","nextState","followDisplay","hashdisplay","postNum","popupDisplay","postPopupDisplay","render","commentThumbnail","hostUser","keyid","popupText","followNum","followerNum","commentCategory","state","user","friend","timeline","like","postId","post","userPage","dispatch"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport PageWrapper from '../../components/PageWrapper';\r\nimport {FeedList} from '../../components/Timeline';\r\nimport {PostPopup,Popup} from '../../components/Popup';\r\nimport * as friendActions from '../../redux/modules/friend';\r\nimport * as timelineActions from '../../redux/modules/timeline';\r\nimport * as likeActions from '../../redux/modules/like';\r\nimport * as baseActions from '../../redux/modules/base';\r\nimport * as postActions from '../../redux/modules/post';\r\nimport * as userActions from '../../redux/modules/user';\r\nimport {setUserActions,handleLogout} from '../Function/SignModule';\r\nimport {dateTimeToFormatted} from '../Function/dateTimeModule';\r\nimport storage from '../../lib/storage';\r\nimport * as commentActions from '../../redux/modules/comment';\r\nimport * as userPageActions from '../../redux/modules/userPage';\r\nclass TimelineContainer extends Component{\r\n    \r\n    handleScroll = async(e) => {\r\n        const scrollTop =e.srcElement.scrollingElement.scrollTop;\r\n        const { innerHeight } = window;\r\n      const { scrollHeight } = document.body;\r\n    \r\n      if (scrollTop+innerHeight >scrollHeight && this.props.isTruePost ) {\r\n         this.getFeedList();\r\n         await this.props.TimelineActions.addPage();\r\n        }\r\n    }\r\n      getFeedList = async() => {\r\n        const{TimelineActions,page,isTruePost,userid} = this.props;\r\n        var username = userid.substr(1);\r\n        if(isTruePost){\r\n            try{\r\n                 await TimelineActions.getTimelineInformation(username,page);\r\n            }catch(e){\r\n                await TimelineActions.setFalsePost();\r\n            }\r\n            \r\n            \r\n        }\r\n    }\r\n    overHashTag = (e) =>{\r\n        const {TimelineActions} = this.props;\r\n        TimelineActions.setHashDisplay('block');\r\n        TimelineActions.setKey(e.target.id);\r\n    }\r\n    outHashTag = () =>{\r\n        const {TimelineActions} = this.props;\r\n        TimelineActions.setHashDisplay('none');\r\n    }\r\n\r\n    handleTimeline =async()=>{\r\n        const {TimelineActions,FriendActions,userid} = this.props;\r\n        var id = userid.substr(1);\r\n        const {username} = storage.get('loggedInfo');\r\n        if(username === id)TimelineActions.setFollowDisplay('none');\r\n        else TimelineActions.setFollowDisplay('block');\r\n        try{\r\n        await FriendActions.getOtherInfoNum(id);\r\n        await TimelineActions.getTimelinePostNum(id);\r\n        await FriendActions.notifyIsFollowUser(id);\r\n        }catch(e){\r\n            console.log(e);\r\n            \r\n        }\r\n        const{result} = this.props;\r\n        TimelineActions.setComment(result.comment);\r\n        TimelineActions.setThumbnail(result.thumbnail);\r\n        TimelineActions.setUsername(result.username);\r\n        TimelineActions.setNickname(result.nickname);\r\n        \r\n\r\n    }\r\n\r\n    setTime = async() => {\r\n        const{data,TimelineActions} = this.props;\r\n                await Promise.all(\r\n                    data.map(\r\n                        async(feed,index) => {\r\n                            let time = feed.get('timestamp');\r\n                            let timestring = dateTimeToFormatted(time);\r\n                            await TimelineActions.setTimelineTime({timestring:timestring,index : index});\r\n                        }\r\n                    )\r\n                );\r\n    }\r\n    setCommentTime = async(id) => {\r\n        const{data,TimelineActions} = this.props;\r\n        let index = data.findIndex(item => item.get('postId')===parseInt(id));\r\n        const comments = data.getIn([index,'commentList']);\r\n                await Promise.all(\r\n                    comments.map(\r\n                        async(comment,commentIndex) => {\r\n                            let time = comment.timestamp;\r\n                            let timestring = dateTimeToFormatted(time);\r\n                            await TimelineActions.setTimelineCommentTime({timestring:timestring,index : index,commentIndex:commentIndex});\r\n                        }\r\n                    )\r\n                );\r\n    }\r\n    getSnapshotBeforeUpdate(prevProps, prevState) {\r\n        return prevProps.userid !== this.props.userid || prevProps.data !== this.props.data;\r\n    }\r\n   componentDidUpdate(prevProps, prevState, snapshot){\r\n        \r\n        if(snapshot && prevProps.userid !== this.props.userid){\r\n        const {handleTimeline} = this;\r\n        handleTimeline();\r\n        }\r\n        else if(snapshot && prevProps.data !== this.props.data){\r\n            this.setTime();\r\n        }\r\n    }\r\n    \r\n    componentDidMount=async()=>{\r\n        const {handleTimeline} = this;\r\n        window.addEventListener(\"scroll\", this.handleScroll);\r\n        await this.getFeedList();\r\n        setUserActions(this.props.UserActions);\r\n        await this.props.TimelineActions.addPage();\r\n        await handleTimeline();\r\n    }\r\n    handleFollowClick =async()=>{\r\n        const {FriendActions,isfollow,userid} = this.props;\r\n        const id = userid.substr(1);\r\n        if(isfollow === '팔로우')\r\n            await FriendActions.follow(id);\r\n        else\r\n            await FriendActions.unfollow({'friendId': id});\r\n        await FriendActions.getOtherInfoNum(id);\r\n    }\r\n    handleLikeClick = async(e) =>{\r\n        const {LikeActions,TimelineActions} = this.props;\r\n        const id = e.target.id;\r\n        await TimelineActions.setLikeKey(id);\r\n        await LikeActions.clickLike(id);\r\n        await TimelineActions.setTimelineLike('none');\r\n        try{\r\n        await LikeActions.getLikeAndUserList(id,1);\r\n        }catch(e){}\r\n        const {totalNum} = this.props;\r\n        await TimelineActions.setTimelineLikeNum(totalNum);\r\n           \r\n    }\r\n    handleCancelClick =async(e) => {\r\n        const {LikeActions,TimelineActions} = this.props;\r\n        const id = e.target.id;\r\n        await TimelineActions.setLikeKey(id);\r\n        await LikeActions.cancelLike(id);\r\n        await TimelineActions.setTimelineLike('block');\r\n        try{\r\n        await LikeActions.getLikeAndUserList(id,1);\r\n        }catch(e){}\r\n        const {totalNum} = this.props;\r\n        await TimelineActions.setTimelineLikeNum(totalNum);\r\n    }\r\n    handleComment =async(e)=>{\r\n        const {CommentActions,TimelineActions,data} = this.props;\r\n        const {id} = e.target;\r\n        const {category} = e.target.dataset;\r\n        await TimelineActions.setCommentCategory(category);\r\n        await TimelineActions.setTimelineCommentDisplay(id);\r\n        const{commentdisplay} = this.props;\r\n        if(commentdisplay === 'block'){\r\n            let index = data.findIndex(item => item.get('postId')===parseInt(id));\r\n            let page = data.getIn([index,'commentPage']);\r\n            await CommentActions.showPostCommentList(id,page);\r\n            await TimelineActions.setTimelineCommentPage(id);\r\n            const{commentList,lastComment}=this.props;\r\n            if(lastComment)\r\n            await TimelineActions.setTimelineCommentList({'commentId' : id,'commentList':commentList,'trueComment' :false});\r\n            else\r\n            await TimelineActions.setTimelineCommentList({'commentId' : id,'commentList':commentList,'trueComment' :true});\r\n            await this.setCommentTime(id);\r\n        }\r\n    }\r\n    handleCommentAdd = async(e) =>{\r\n        const {id} = e.target;\r\n        const {TimelineActions,CommentActions,data} = this.props;\r\n        const index = data.findIndex(item => item.get('postId') ===parseInt(id));\r\n        if(data.getIn([index,'trueComment'])){\r\n            \r\n            const page = data.getIn([index,'commentPage']);\r\n            try{\r\n                await CommentActions.showPostCommentList(id,page);\r\n                await TimelineActions.setTimelineCommentPage(id);\r\n                const{commentList,lastComment}=this.props;\r\n            if(lastComment)\r\n            await TimelineActions.setTimelineCommentList({'commentId':id,'commentList':commentList,'trueComment' :false});\r\n            else\r\n            await TimelineActions.setTimelineCommentList({'commentId':id,'commentList':commentList,'trueComment' :true});\r\n            await this.setCommentTime(id);\r\n            }catch(e){\r\n                TimelineActions.setTimelineCommentFalse(id);\r\n            }\r\n        } \r\n    }\r\n    enterComment = async(e) =>{\r\n        if(window.event.keyCode === 13){\r\n            const {CommentActions,TimelineActions} = this.props;\r\n            const {innerText,id} = e.target;\r\n            var content = innerText;\r\n            content = content.replace(/\\r/g, \"\");\r\n            content = content.replace(/\\n/g, \"\");\r\n            await CommentActions.writeComment({id,content});\r\n            await CommentActions.showPostCommentList(id,1);\r\n            this.renewComment(id);\r\n            for(var i = 0; i < document.getElementsByName('^^comment').length; i++){\r\n                if(parseInt(document.getElementsByName('^^comment')[i].id) === parseInt(id)){\r\n                    document.getElementsByName('^^comment')[i].textContent = '';\r\n                    document.getElementsByName('^^comment')[i].blur();\r\n                }\r\n            }\r\n            await CommentActions.getCommentNum(id);\r\n            var {commentNum} = this.props;\r\n            await TimelineActions.setTimelineCommentNum({'commentNum':commentNum,'commentId':id});\r\n            await this.setCommentTime(id);\r\n            \r\n        }\r\n    }\r\n    renewComment=(id)=>\r\n        setTimeout(async()=>{\r\n            const {presentComment,TimelineActions} = this.props;\r\n            await TimelineActions.renewTimelineComment({'commentId' : id,'presentComment':presentComment});\r\n            await this.setCommentTime(id);\r\n        },2000);\r\n\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return this.props.data !== nextProps.data || this.props.result !== nextProps.result || \r\n        this.props.followDisplay !== nextProps.followDisplay || this.props.comment !== nextProps.comment ||\r\n        this.props.username !== nextProps.username || this.props.nickname !== nextProps.nickname || \r\n        this.props.thumbnail !== nextProps.thumbnail || this.props.hashdisplay !== nextProps.hashdisplay\r\n        || this.props.postNum !== nextProps.postNum || this.props.popupDisplay !== nextProps.popupDisplay ||\r\n         this.props.postPopupDisplay !== nextProps.postPopupDisplay;\r\n    }\r\n\r\n    handleMenu = (e) => {\r\n        const {data,TimelineActions,BaseActions} = this.props;\r\n        const {id} = e.target;\r\n        const index = data.findIndex(item => item.get('postId')===parseInt(id));\r\n        if(data.getIn([index,'modifyVisible']) === 'block') return;\r\n        if(data.getIn([index,'menuVisible']) === 'none'){\r\n            TimelineActions.setShowMenuVisible({'index':index, 'visible':'none'});\r\n            BaseActions.setFollowMenuVisible('none');\r\n            BaseActions.setAlarmMenuVisible('none');\r\n            BaseActions.setUserMenuVisibility('none');\r\n            TimelineActions.setMenuVisible({'index':index, 'visible':'block'});\r\n        }\r\n        else{\r\n            TimelineActions.setMenuVisible({'index':index, 'visible':'none'});\r\n        }\r\n        \r\n    }\r\n\r\n    modifyClick = async(e) => {\r\n        const {id} = e.target;\r\n        const {data,TimelineActions} = this.props;\r\n        const index = data.findIndex(item => item.get('postId')===parseInt(id));\r\n        \r\n        await TimelineActions.setMenuVisible({'index':index, 'visible':'none'});\r\n        await TimelineActions.setModifyVisible({'index' : index,'visible' : 'inline-block'});\r\n    }\r\n    get = (type) => {\r\n        return {\r\n            'modify' : '수정하시겠습니까?',\r\n            'delete' : '삭제하시겠습니까?'\r\n        }[type];\r\n    }\r\n    buttonClick = (e) => {\r\n        const {PostActions,TimelineActions,data} = this.props;\r\n        const {id} = e.target;\r\n        const {category} = e.target.dataset;\r\n        const index = data.findIndex(item => item.get('postId')===parseInt(id));\r\n        TimelineActions.setMenuVisible({'index':index, 'visible':'none'});\r\n        PostActions.setPopupId(id);\r\n        PostActions.setPostPopupDisplay('block');\r\n        PostActions.setPopupCategory(category);\r\n        PostActions.setPopupText(this.get(category));\r\n    }\r\n    deleteClick = async() => {\r\n        const {PostActions,TimelineActions,data,userid,popupId} = this.props;\r\n        const index = data.findIndex(item => item.get('postId')===parseInt(popupId));\r\n        const userId = userid.substr(1);\r\n        try{\r\n            await PostActions.deleteFeed(popupId);\r\n            await TimelineActions.deleteFeed(index);\r\n            await TimelineActions.getTimelinePostNum(userId);\r\n        }catch(e){\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    handleImageChange = async(e) => {\r\n        e.preventDefault();\r\n        const {UserPageActions} = this.props;\r\n        let file = e.target.files[0];\r\n        var formdata = new FormData();\r\n        formdata.set('file',file);\r\n        await UserPageActions.modifyUserImage(formdata);\r\n        const {userResult} = this.props;\r\n        console.log(userResult.toJS());\r\n        storage.remove('loggedInfo');\r\n        storage.set('loggedInfo',userResult.toJS());\r\n        window.location.reload();\r\n      }\r\n\r\n      handleImage =(e) =>{\r\n        const {id} = e.target;\r\n        const {imageid} = e.target.dataset;\r\n        this.props.history.push(`/feed/@:${id}/image/:${imageid}`);\r\n    }\r\n    unavailableModify =(index,id) => {\r\n        const {TimelineActions,data} = this.props;\r\n        for(var i = 0; i < document.getElementsByName('^^content').length; i++){\r\n            if(parseInt(document.getElementsByName('^^content')[i].id) === parseInt(id)){\r\n                document.getElementsByName('^^content')[i].textContent = data.getIn([index,'content']);\r\n                document.getElementsByName('^^content')[i].blur();\r\n            }\r\n        }\r\n        TimelineActions.setModifyVisible({'index' : index,'visible' : 'none'});\r\n    }\r\n    handleCancel = (e) => {\r\n        const {id} = e.target;\r\n        const {data} = this.props;\r\n        const index = data.findIndex(item => item.get('postId')===parseInt(id));\r\n        this.unavailableModify(index,id);\r\n    }\r\n    handleWrite = async() => {\r\n        const {TimelineActions,data,PostActions,popupId} = this.props;\r\n        const index = data.findIndex(item => item.get('postId')===parseInt(popupId));\r\n        let showLevel = data.getIn([index,'showLevel']);\r\n        try{\r\n        await PostActions.modifyFeedInformation({'showLevel' : showLevel, 'postId' : popupId, 'content' : data.getIn([index,'modifyText'])});\r\n        }catch(e){\r\n            if(e.response.status === 409){\r\n                PostActions.setPopupText('글은 1000자 이하여야 합니다. 다시 입력해주세요.');\r\n                PostActions.setPopupDisplay('block');\r\n                return;\r\n            }\r\n        }\r\n        this.unavailableModify(index,popupId);\r\n        TimelineActions.setFeedContext({'index': index,'text': data.getIn([index,'modifyText'])});\r\n        }\r\n        handleWriteInput = (e) => {\r\n            const {id,innerText} = e.target;\r\n            const {TimelineActions,data} = this.props;\r\n            const index = data.findIndex(item => item.get('postId')===parseInt(id));\r\n            TimelineActions.setModifyText({'index' : index, 'modifyText' : innerText});\r\n        }\r\n        \r\n        handleViewChange = (e) => {\r\n            const {id} = e.target;\r\n            const {TimelineActions,data,BaseActions} = this.props;\r\n            const index = data.findIndex(item => item.get('postId')===parseInt(id));\r\n        if(data.getIn([index,'showMenuVisible']) === 'none'){\r\n            TimelineActions.setShowMenuVisible({'index':index, 'visible':'block'});\r\n            BaseActions.setFollowMenuVisible('none');\r\n            BaseActions.setAlarmMenuVisible('none');\r\n            BaseActions.setUserMenuVisibility('none');\r\n            TimelineActions.setMenuVisible({'index':index, 'visible':'none'});\r\n        }\r\n        else{\r\n            TimelineActions.setShowMenuVisible({'index':index, 'visible':'none'});\r\n        }\r\n        }\r\n        handleShowLevel = async(e) => {\r\n            const {id} = e.target;\r\n            const {postid} = e.target.dataset;\r\n            console.log(postid);\r\n            const {data,PostActions,TimelineActions} = this.props;\r\n            const index = data.findIndex(item => item.get('postId')===parseInt(postid));\r\n            try{\r\n            await PostActions.modifyFeedInformation({'showLevel' : id, 'postId' : postid, 'content' : data.getIn([index,'content'])});\r\n            }catch(e){\r\n\r\n            }\r\n            TimelineActions.setFeedShowlevel({'index':index,'showLevel':id});\r\n            TimelineActions.setShowMenuVisible({'index':index, 'visible':'none'});\r\n        }\r\n\r\n        handleOk = () => {\r\n            const {popupCategory,PostActions} = this.props;\r\n            PostActions.setPostPopupDisplay('none');\r\n            if(popupCategory === 'modify')\r\n                this.handleWrite();\r\n\r\n            if(popupCategory === 'delete')\r\n                this.deleteClick();\r\n            else\r\n                handleLogout();\r\n        }\r\n        handlePopupCancel = () => {\r\n        const {PostActions} = this.props;\r\n        PostActions.setPostPopupDisplay('none');\r\n        }\r\n        handlePopupOk = () => {\r\n            const {PostActions} = this.props;\r\n        PostActions.setPopupDisplay('none');\r\n        }\r\n\r\n    render(){\r\n        \r\n        const {data} = this.props;\r\n        if(!storage.get('loggedInfo')) {\r\n            \r\n            return null;\r\n        }\r\n        const commentThumbnail = storage.get('loggedInfo').thumbnail; \r\n        const hostUser = storage.get('loggedInfo').username;\r\n        const {hashdisplay,keyid,totalNum,postPopupDisplay,popupText,popupDisplay} = this.props;\r\n        const {followNum,followerNum,thumbnail,comment,username,nickname,postNum,followDisplay,isfollow,commentCategory} = this.props;\r\n        const {handleFollowClick,overHashTag,outHashTag,handleLikeClick,handleCancelClick,enterComment,handleCommentAdd\r\n            ,handleComment,handleMenu,handleImageChange,handleImage,handleCancel,modifyClick,handlePopupOk\r\n            ,handleWriteInput,handleViewChange,handleShowLevel,handleOk,handlePopupCancel,buttonClick} = this;\r\n        return(\r\n            <div>\r\n            <PageWrapper>\r\n            <FeedList hostUser={hostUser} commentThumbnail = {commentThumbnail} change = {handleImageChange}\r\n            thumbnail = {thumbnail} comment ={comment} username={username} nickname={nickname}\r\n            followNum = {followNum} followerNum = {followerNum}  followclick={handleFollowClick}\r\n             followdisplay ={followDisplay} postNum={postNum} isfollow = {isfollow} like = {handleLikeClick}\r\n             mainfeed={data} hashdisplay = {hashdisplay} hover = {overHashTag} handleComment = {handleComment}\r\n             nothover={outHashTag} keyid = {keyid} cancel = {handleCancelClick} totalNum = {totalNum}\r\n             enterComment = {enterComment} handleCommentAdd={handleCommentAdd} commentCategory={commentCategory}\r\n             handleMenu = {handleMenu} modifyClick={modifyClick} deleteClick = {buttonClick} handleImage={handleImage}\r\n             handleCancel = {handleCancel} handleWrite={buttonClick} handleWriteInput={handleWriteInput} \r\n             handleViewChange = {handleViewChange} handleShowLevel={handleShowLevel}/>\r\n          </PageWrapper>\r\n          <PostPopup handleOk={handleOk} right={'40%'} handleCancel={handlePopupCancel}\r\n             text={popupText} display={postPopupDisplay} />\r\n             <Popup handlePopupOk = {handlePopupOk} display={popupDisplay} text={popupText} />\r\n          </div>\r\n            );\r\n    }\r\n}\r\nexport default connect(\r\n    (state) => ({\r\n        user : state.user.getIn(['loggedInfo','username']),\r\n        followNum : state.friend.get('followNum'),\r\n        result : state.friend.get('result'),\r\n        followerNum : state.friend.get('followerNum'),\r\n        thumbnail : state.timeline.get('thumbnail'),\r\n        comment : state.timeline.get('comment'),\r\n        username : state.timeline.get('username'),\r\n        nickname : state.timeline.get('nickname'),\r\n        postNum : state.timeline.get('postNum'),\r\n        followDisplay : state.timeline.get('followdisplay'),\r\n        isfollow : state.friend.get('isFollow'),\r\n        data : state.timeline.get('mainfeed'),\r\n        page : state.timeline.get('page'),\r\n        isTruePost : state.timeline.get('isTruePost'),\r\n        hashdisplay : state.timeline.get('hashdisplay'),\r\n        keyid : state.timeline.get('keyid'),\r\n        totalNum : state.like.get('totalNum'),\r\n        commentList : state.comment.get('commentList'),\r\n        commentNum : state.comment.get('commentNum'),\r\n        commentCategory : state.timeline.get('commentCategory'),\r\n        commentdisplay : state.timeline.get('commentdisplay'),\r\n        postId : state.post.get('postId'),\r\n        presentComment : state.comment.get('presentComment'),\r\n        lastComment : state.comment.get('lastComment'),\r\n        userResult : state.userPage.get('result'),\r\n        postPopupDisplay : state.post.get('postPopupDisplay'),\r\n        popupText : state.post.get('popupText'),\r\n        popupId : state.post.get('popupId'),\r\n        popupDisplay : state.post.get('popupDisplay'),\r\n        popupCategory : state.post.get('popupCategory')\r\n\r\n    }),\r\n    (dispatch) => ({\r\n        FriendActions: bindActionCreators(friendActions, dispatch),\r\n        TimelineActions : bindActionCreators(timelineActions,dispatch),\r\n        LikeActions : bindActionCreators(likeActions,dispatch),\r\n        CommentActions : bindActionCreators(commentActions,dispatch),\r\n        BaseActions : bindActionCreators(baseActions,dispatch),\r\n        PostActions : bindActionCreators(postActions,dispatch),\r\n        UserPageActions : bindActionCreators(userPageActions,dispatch),\r\n        UserActions : bindActionCreators(userActions,dispatch)\r\n\r\n    })\r\n)(TimelineContainer);"]},"metadata":{},"sourceType":"module"}