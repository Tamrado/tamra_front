{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport { Map, List, fromJS } from 'immutable';\nimport { handleActions, createAction } from 'redux-actions';\nimport { pender } from 'redux-pender';\nimport * as PostAPI from '../../lib/api/post';\nimport { MAC_IP_RE } from 'address';\nconst UPLOAD_FEED = 'post/UPLOAD_FEED';\nconst UPLOAD_IMAGE = 'post/UPLOAD_IMAGE';\nconst SET_FRIEND_INFO = 'post/SET_FRIEND_INFO';\nconst REMOVE_FRIEND = 'post/REMOVE_FRIEND';\nconst REMOVE_IMAGE = 'post/REMOVE_IMAGE';\nconst SET_IMAGE = 'post/SET_IAMGE';\nconst SET_WRITTEN_DATA = 'post/SET_WRITTEN_DATA';\nconst SET_SHOW_LEVEL = 'post/SET_SHOW_LEVEL';\nconst SET_WITH_FRIEND = 'post/SET_WITH_FRIEND';\nconst SET_WITH_DISPLAY = 'post/SET_WITH_DISPLAY';\nconst SET_WITH_FRIEND_DISPLAY = 'post/SET_WITH_FRIEND_DISPLAY';\nconst SET_DISPLAY = 'post/SET_DISPLAY';\nconst SET_WRITE_DISPLAY = 'post/SET_WRITE_DISPLAY';\nconst UPDATE_FILELIST = 'post/UPDATE_FILELIST';\nconst INITIALIZE_FILELIST = 'post/INITIALIZE_FILELIST';\nconst INITIALIZE_IMAGE = 'post/INITIALIZE_IMAGE';\nconst DELETE_FEED = 'post/DELETE_FEED';\nconst SET_FILE_SIZE = 'post/SET_FILE_SIZE';\nconst MODIFY_FEED_INFORMATION = 'post/MODIFY_FEED_INFORMATION';\nconst DELETE_FILE = 'post/DELETE_FILE';\nconst SET_POST_POPUP_DISPLAY = 'post/SET_POST_POPUP_DISPLAY';\nconst SET_POPUP_DISPLAY = 'post/SET_POPUP_DISPLAY';\nconst SET_POPUP_TEXT = 'post/SET_POPUP_TEXT';\nconst SET_POPUP_ID = 'post/SET_POPUP_ID';\nconst SET_POPUP_CATEGORY = 'post/SET_POPUP_CATEGORY';\nexport const setPopupCategory = createAction(SET_POPUP_CATEGORY);\nexport const setPopupId = createAction(SET_POPUP_ID);\nexport const setPopupText = createAction(SET_POPUP_TEXT);\nexport const setPostPopupDisplay = createAction(SET_POST_POPUP_DISPLAY);\nexport const setPopupDisplay = createAction(SET_POPUP_DISPLAY);\nexport const deleteFile = createAction(DELETE_FILE);\nexport const modifyFeedInformation = createAction(MODIFY_FEED_INFORMATION, PostAPI.modifyFeedInformation);\nexport const setFileSize = createAction(SET_FILE_SIZE);\nexport const deleteFeed = createAction(DELETE_FEED, PostAPI.deleteFeed);\nexport const initializeImage = createAction(INITIALIZE_IMAGE);\nexport const initializeFilelist = createAction(INITIALIZE_FILELIST);\nexport const updateFilelist = createAction(UPDATE_FILELIST);\nexport const uploadFeed = createAction(UPLOAD_FEED, PostAPI.uploadFeed);\nexport const uploadImage = createAction(UPLOAD_IMAGE, PostAPI.uploadImage);\nexport const setWriteDisplay = createAction(SET_WRITE_DISPLAY);\nexport const setDisplay = createAction(SET_DISPLAY);\nexport const setWithFriendDisplay = createAction(SET_WITH_FRIEND_DISPLAY);\nexport const setWithDisplay = createAction(SET_WITH_DISPLAY);\nexport const setWithFriend = createAction(SET_WITH_FRIEND);\nexport const setShowLevel = createAction(SET_SHOW_LEVEL);\nexport const setWrittenData = createAction(SET_WRITTEN_DATA);\nexport const removeFriend = createAction(REMOVE_FRIEND);\nexport const setFriendInfo = createAction(SET_FRIEND_INFO);\nexport const setImage = createAction(SET_IMAGE);\nexport const removeImage = createAction(REMOVE_IMAGE);\nconst initialState = Map({\n  friendInfo: List(),\n  tags: List(),\n  image: List(),\n  writtenData: '',\n  showLevel: 'public',\n  withFriend: '',\n  withDisplay: 'none',\n  withFriendDisplay: 'none',\n  display: 'none',\n  writeDisplay: 'none',\n  postId: -1,\n  clear: 0,\n  result: Map({}),\n  filelist: List(),\n  fileSize: Map({}),\n  popupDisplay: 'none',\n  postPopupDisplay: 'none',\n  popupText: '',\n  popupId: -1,\n  popupCategory: ''\n});\nexport default handleActions(_objectSpread({}, pender({\n  type: MODIFY_FEED_INFORMATION,\n  onSuccess: (state, action) => state.set('result', action.payload)\n}), {}, pender({\n  type: DELETE_FEED,\n  onSuccess: (state, action) => state.set('result', action.payload)\n}), {}, pender({\n  type: UPLOAD_FEED,\n  onSuccess: (state, action) => state.set('postId', action.payload.data.postId)\n}), {}, pender({\n  type: UPLOAD_IMAGE,\n  onSuccess: (state, action) => state.set('clear', 2),\n  onFailure: (state, action) => state.set('clear', -1)\n}), {\n  [SET_POPUP_CATEGORY]: (state, action) => state.set('popupCategory', action.payload),\n  [SET_POPUP_ID]: (state, action) => state.set('popupId', action.payload),\n  [SET_POPUP_TEXT]: (state, action) => state.set('popupText', action.payload),\n  [SET_POPUP_DISPLAY]: (state, action) => state.set('popupDisplay', action.payload),\n  [SET_POST_POPUP_DISPLAY]: (state, action) => state.set('postPopupDisplay', action.payload),\n  [UPDATE_FILELIST]: (state, action) => state.update('filelist', item => item.push(Map({\n    file: action.payload\n  }))),\n  [DELETE_FILE]: (state, action) => {\n    const index = state.get('image').findIndex(item => item.get('url') === action.payload);\n    return state.deleteIn(['image', index]).deleteIn(['filelist', index]);\n  },\n  [SET_FILE_SIZE]: (state, action) => state.set('fileSize', action.payload),\n  [INITIALIZE_IMAGE]: (state, action) => state.set('image', List()),\n  [INITIALIZE_FILELIST]: (state, action) => state.set('filelist', List()),\n  [SET_WRITE_DISPLAY]: (state, action) => state.set('writeDisplay', action.payload),\n  [SET_DISPLAY]: (state, action) => state.set('display', action.payload),\n  [SET_WITH_FRIEND_DISPLAY]: (state, action) => state.set('withFriendDisplay', action.payload),\n  [SET_WITH_DISPLAY]: (state, action) => state.set('withDisplay', action.payload),\n  [SET_WITH_FRIEND]: (state, action) => state.set('withFriend', action.payload),\n  [SET_SHOW_LEVEL]: (state, action) => state.set('showLevel', action.payload.showLevel),\n  [SET_WRITTEN_DATA]: (state, action) => state.set('writtenData', action.payload),\n  [SET_IMAGE]: (state, action) => state.update('image', image => image.push(Map({\n    url: action.payload.url\n  }))),\n  [REMOVE_IMAGE]: (state, action) => {\n    const index = state.get('image').findIndex(item => item.get('url') === action.payload.id);\n    return state.deleteIn(['image', index]);\n  },\n  [SET_FRIEND_INFO]: (state, action) => {\n    const index = state.get('friendInfo').findIndex(item => item.get('username') === action.payload.id);\n\n    if (index < 0) {\n      return state.update('friendInfo', friendInfo => friendInfo.push(Map({\n        username: action.payload.username,\n        nickname: action.payload.nickname,\n        thumbnail: action.payload.thumbnail,\n        comment: action.payload.comment\n      })));\n    }\n\n    return state.set('friendInfo', state.get('friendInfo'));\n  },\n  [REMOVE_FRIEND]: (state, action) => {\n    const index = state.get('friendInfo').findIndex(item => item.get('username') === action.payload);\n    return state.deleteIn(['friendInfo', index]);\n  }\n}), initialState);","map":{"version":3,"sources":["C:/Users/user/fronttimeline/src/redux/modules/post.js"],"names":["Map","List","fromJS","handleActions","createAction","pender","PostAPI","MAC_IP_RE","UPLOAD_FEED","UPLOAD_IMAGE","SET_FRIEND_INFO","REMOVE_FRIEND","REMOVE_IMAGE","SET_IMAGE","SET_WRITTEN_DATA","SET_SHOW_LEVEL","SET_WITH_FRIEND","SET_WITH_DISPLAY","SET_WITH_FRIEND_DISPLAY","SET_DISPLAY","SET_WRITE_DISPLAY","UPDATE_FILELIST","INITIALIZE_FILELIST","INITIALIZE_IMAGE","DELETE_FEED","SET_FILE_SIZE","MODIFY_FEED_INFORMATION","DELETE_FILE","SET_POST_POPUP_DISPLAY","SET_POPUP_DISPLAY","SET_POPUP_TEXT","SET_POPUP_ID","SET_POPUP_CATEGORY","setPopupCategory","setPopupId","setPopupText","setPostPopupDisplay","setPopupDisplay","deleteFile","modifyFeedInformation","setFileSize","deleteFeed","initializeImage","initializeFilelist","updateFilelist","uploadFeed","uploadImage","setWriteDisplay","setDisplay","setWithFriendDisplay","setWithDisplay","setWithFriend","setShowLevel","setWrittenData","removeFriend","setFriendInfo","setImage","removeImage","initialState","friendInfo","tags","image","writtenData","showLevel","withFriend","withDisplay","withFriendDisplay","display","writeDisplay","postId","clear","result","filelist","fileSize","popupDisplay","postPopupDisplay","popupText","popupId","popupCategory","type","onSuccess","state","action","set","payload","data","onFailure","update","item","push","file","index","get","findIndex","deleteIn","url","id","username","nickname","thumbnail","comment"],"mappings":"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","sourcesContent":["import { Map,List,fromJS } from 'immutable';\r\nimport { handleActions, createAction } from 'redux-actions';\r\nimport {pender} from 'redux-pender';\r\nimport * as PostAPI from '../../lib/api/post';\r\nimport { MAC_IP_RE } from 'address';\r\n\r\nconst UPLOAD_FEED = 'post/UPLOAD_FEED';\r\nconst UPLOAD_IMAGE = 'post/UPLOAD_IMAGE'\r\nconst SET_FRIEND_INFO = 'post/SET_FRIEND_INFO';\r\nconst REMOVE_FRIEND = 'post/REMOVE_FRIEND';\r\nconst REMOVE_IMAGE = 'post/REMOVE_IMAGE';\r\nconst SET_IMAGE = 'post/SET_IAMGE';\r\nconst SET_WRITTEN_DATA = 'post/SET_WRITTEN_DATA';\r\nconst SET_SHOW_LEVEL = 'post/SET_SHOW_LEVEL';\r\nconst SET_WITH_FRIEND = 'post/SET_WITH_FRIEND';\r\nconst SET_WITH_DISPLAY = 'post/SET_WITH_DISPLAY';\r\nconst SET_WITH_FRIEND_DISPLAY = 'post/SET_WITH_FRIEND_DISPLAY';\r\nconst SET_DISPLAY = 'post/SET_DISPLAY';\r\nconst SET_WRITE_DISPLAY = 'post/SET_WRITE_DISPLAY';\r\nconst UPDATE_FILELIST = 'post/UPDATE_FILELIST';\r\nconst INITIALIZE_FILELIST = 'post/INITIALIZE_FILELIST';\r\nconst INITIALIZE_IMAGE = 'post/INITIALIZE_IMAGE';\r\nconst DELETE_FEED = 'post/DELETE_FEED';\r\nconst SET_FILE_SIZE = 'post/SET_FILE_SIZE';\r\nconst MODIFY_FEED_INFORMATION = 'post/MODIFY_FEED_INFORMATION';\r\nconst DELETE_FILE = 'post/DELETE_FILE';\r\nconst SET_POST_POPUP_DISPLAY = 'post/SET_POST_POPUP_DISPLAY';\r\nconst SET_POPUP_DISPLAY = 'post/SET_POPUP_DISPLAY';\r\nconst SET_POPUP_TEXT = 'post/SET_POPUP_TEXT';\r\nconst SET_POPUP_ID = 'post/SET_POPUP_ID';\r\nconst SET_POPUP_CATEGORY = 'post/SET_POPUP_CATEGORY';\r\n\r\nexport const setPopupCategory = createAction(SET_POPUP_CATEGORY);\r\nexport const setPopupId = createAction(SET_POPUP_ID);\r\nexport const setPopupText = createAction(SET_POPUP_TEXT);\r\nexport const setPostPopupDisplay = createAction(SET_POST_POPUP_DISPLAY);\r\nexport const setPopupDisplay = createAction(SET_POPUP_DISPLAY);\r\nexport const deleteFile = createAction(DELETE_FILE);\r\nexport const modifyFeedInformation = createAction(MODIFY_FEED_INFORMATION,PostAPI.modifyFeedInformation);\r\nexport const setFileSize = createAction(SET_FILE_SIZE);\r\nexport const deleteFeed = createAction(DELETE_FEED,PostAPI.deleteFeed);\r\nexport const initializeImage = createAction(INITIALIZE_IMAGE);\r\nexport const initializeFilelist = createAction(INITIALIZE_FILELIST);\r\nexport const updateFilelist = createAction(UPDATE_FILELIST);\r\nexport const uploadFeed = createAction(UPLOAD_FEED,PostAPI.uploadFeed);\r\nexport const uploadImage = createAction(UPLOAD_IMAGE,PostAPI.uploadImage);\r\nexport const setWriteDisplay = createAction(SET_WRITE_DISPLAY);\r\nexport const setDisplay = createAction(SET_DISPLAY);\r\nexport const setWithFriendDisplay = createAction(SET_WITH_FRIEND_DISPLAY);\r\nexport const setWithDisplay = createAction(SET_WITH_DISPLAY);\r\nexport const setWithFriend = createAction(SET_WITH_FRIEND);\r\nexport const setShowLevel = createAction(SET_SHOW_LEVEL);\r\nexport const setWrittenData = createAction(SET_WRITTEN_DATA);\r\nexport const removeFriend = createAction(REMOVE_FRIEND);\r\nexport const setFriendInfo = createAction(SET_FRIEND_INFO);\r\nexport const setImage = createAction(SET_IMAGE);\r\nexport const removeImage = createAction(REMOVE_IMAGE);\r\n\r\n\r\nconst initialState = Map({\r\n    friendInfo: List(),\r\n    tags : List(),\r\n    image : List(),\r\n    writtenData : '',\r\n    showLevel : 'public',\r\n    withFriend : '',\r\n    withDisplay : 'none',\r\n    withFriendDisplay : 'none',\r\n    display : 'none',\r\n    writeDisplay : 'none',\r\n    postId : -1,\r\n    clear : 0,\r\n    result : Map({}),\r\n    filelist : List(),\r\n    fileSize : Map({}),\r\n    popupDisplay : 'none',\r\n    postPopupDisplay : 'none',\r\n    popupText : '',\r\n    popupId : -1,\r\n    popupCategory : ''\r\n});\r\n\r\n\r\nexport default handleActions({\r\n    ...pender({\r\n        type : MODIFY_FEED_INFORMATION,\r\n        onSuccess : (state,action) => state.set('result',action.payload)\r\n    }),\r\n    ...pender({\r\n        type : DELETE_FEED,\r\n        onSuccess : (state,action) => state.set('result',action.payload)\r\n    }),\r\n    ...pender({\r\n        type : UPLOAD_FEED,\r\n        onSuccess : (state,action) => state.set('postId',action.payload.data.postId)\r\n    }),\r\n    ...pender({\r\n        type : UPLOAD_IMAGE,\r\n        onSuccess : (state,action) => state.set('clear',2),\r\n        onFailure : (state,action) => state.set('clear',-1)\r\n    }),\r\n    [SET_POPUP_CATEGORY] : (state,action) => state.set('popupCategory',action.payload),\r\n    [SET_POPUP_ID] : (state,action) => state.set('popupId',action.payload),\r\n    [SET_POPUP_TEXT] : (state,action) => state.set('popupText',action.payload),\r\n    [SET_POPUP_DISPLAY] : (state,action) => state.set('popupDisplay',action.payload),\r\n    [SET_POST_POPUP_DISPLAY ] : (state,action) => state.set('postPopupDisplay',action.payload),\r\n    [UPDATE_FILELIST] : (state,action) => state.update('filelist',item => item.push(Map({\r\n        file : action.payload\r\n    })\r\n    )),\r\n    [DELETE_FILE] : (state,action) => {\r\n        const index = state.get('image').findIndex(item => item.get('url') === action.payload);\r\n        return state.deleteIn(['image',index]).deleteIn(['filelist',index]);\r\n    },\r\n    [SET_FILE_SIZE] : (state,action) => state.set('fileSize',action.payload),\r\n    [INITIALIZE_IMAGE] :(state,action) => state.set('image',List()),\r\n    [INITIALIZE_FILELIST] :(state,action) => state.set('filelist',List()),\r\n    [SET_WRITE_DISPLAY]: (state,action) => state.set('writeDisplay', action.payload),\r\n    [SET_DISPLAY] : (state,action) => state.set('display',action.payload),\r\n    [SET_WITH_FRIEND_DISPLAY] :(state,action) => state.set('withFriendDisplay',action.payload),\r\n    [SET_WITH_DISPLAY] : (state,action) => state.set('withDisplay',action.payload),\r\n    [SET_WITH_FRIEND] : (state,action) => state.set('withFriend',action.payload),\r\n    [SET_SHOW_LEVEL] : (state,action) => state.set('showLevel',action.payload.showLevel),\r\n    [SET_WRITTEN_DATA] : (state,action) => state.set('writtenData',action.payload),\r\n    [SET_IMAGE] :(state,action) => state.update('image',image => \r\n    image.push(\r\n        Map({\r\n            url : action.payload.url\r\n        })\r\n    )\r\n    ),\r\n    [REMOVE_IMAGE]:(state,action)=>{\r\n        const index = state.get('image')\r\n        .findIndex(item => item.get('url')===action.payload.id);\r\n        return state.deleteIn(['image',index]);\r\n    },\r\n    [SET_FRIEND_INFO]: (state,action) =>{\r\n        const index = state.get('friendInfo')\r\n        .findIndex(item => item.get('username')===action.payload.id);\r\n        if(index < 0){\r\n            return state.update('friendInfo',friendInfo => \r\n            friendInfo.push(\r\n                Map({\r\n                    username : action.payload.username,\r\n                    nickname : action.payload.nickname,\r\n                    thumbnail : action.payload.thumbnail,\r\n                    comment : action.payload.comment\r\n                })\r\n            )\r\n        );\r\n        }\r\n        return state.set('friendInfo',state.get('friendInfo'));\r\n            },\r\n    [REMOVE_FRIEND]:(state,action)=>{\r\n        const index = state.get('friendInfo').findIndex(item => item.get('username')===action.payload);\r\n        return state.deleteIn(['friendInfo',index]);\r\n    },\r\n    \r\n    }, initialState);"]},"metadata":{},"sourceType":"module"}