{"ast":null,"code":"import { Component } from 'react';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar NAVER_ID_SDK_URL = 'https://static.nid.naver.com/js/naveridlogin_js_sdk_2.0.0.js';\n/**\r\n * 이 함수는 브라우저 환경에서만 호출이 되야 한다. window 객체에 직접 접근한다.\r\n * @param props\r\n */\n\nvar initLoginButton = function (props) {\n  if (!('browser' in process)) {\n    return;\n  }\n\n  var clientId = props.clientId,\n      callbackUrl = props.callbackUrl,\n      onSuccess = props.onSuccess,\n      onFailure = props.onFailure;\n\n  var location = __assign({}, window).location;\n\n  var naver = window['naver'];\n  var naverLogin = new naver.LoginWithNaverId({\n    callbackUrl: callbackUrl,\n    clientId: clientId,\n    isPopup: true,\n    loginButton: {\n      color: \"green\",\n      type: 3,\n      height: 60\n    }\n  });\n  naverLogin.init();\n\n  if (!window.opener) {\n    naver.successCallback = function (data) {\n      return onSuccess(data);\n    };\n\n    naver.FailureCallback = onFailure;\n  } else {\n    // let tryCount = 0;\n    // const initLoop = setInterval(() => {\n    //   if(tryCount > 30) {\n    //     clearInterval(initLoop);\n    //   }\n    //   tryCount++;\n    // }, 100);\n    naverLogin.getLoginStatus(function (status) {\n      if (!status || location.hash.indexOf('#access_token') === -1) {\n        return;\n      }\n\n      window.opener.naver.successCallback(naverLogin.user);\n      window.close(); // clearInterval(initLoop);\n    });\n  }\n};\n\nvar appendNaverButton = function () {\n  if (document && document.querySelectorAll('#naverIdLogin').length === 0) {\n    var naverId = document.createElement('div');\n    naverId.id = 'naverIdLogin';\n    naverId.style.position = 'absolute';\n    naverId.style.top = '-10000px';\n    document.body.appendChild(naverId);\n  }\n};\n\nvar loadScript = function (props) {\n  if (document && document.querySelectorAll('#naver-login-sdk').length === 0) {\n    var script = document.createElement('script');\n    script.id = 'naver-login-sdk';\n    script.src = NAVER_ID_SDK_URL;\n\n    script.onload = function () {\n      return initLoginButton(props);\n    };\n\n    document.head.appendChild(script);\n  }\n};\n\nvar LoginNaver =\n/** @class */\nfunction (_super) {\n  __extends(LoginNaver, _super);\n\n  function LoginNaver() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  LoginNaver.prototype.componentDidMount = function () {\n    if (!('browser' in process)) {\n      return;\n    } // 네이버 로그인 버튼을 먼저 붙인 후 스크립트 로드하고 초기화를 해야 한다.\n\n\n    appendNaverButton();\n    loadScript(this.props);\n  };\n\n  LoginNaver.prototype.render = function () {\n    var render = this.props.render;\n    return render({\n      onClick: function () {\n        if (!document || !document.querySelector('#naverIdLogin').firstChild) return;\n        var naverLoginButton = document.querySelector('#naverIdLogin').firstChild;\n        naverLoginButton.click();\n      }\n    });\n  };\n\n  return LoginNaver;\n}(Component);\n\nexport default LoginNaver;","map":null,"metadata":{},"sourceType":"module"}