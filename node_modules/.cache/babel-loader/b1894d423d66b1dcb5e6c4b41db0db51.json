{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _classCallCheck from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\user\\\\fronttimeline\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{connect}from'react-redux';import{TagList}from'../../components/Post';import{bindActionCreators}from'redux';import*as friendActions from'../../redux/modules/friend';import*as postActions from'../../redux/modules/post';import*as searchActions from'../../redux/modules/search';import storage from'../../lib/storage';var TagListContainer=/*#__PURE__*/function(_Component){_inherits(TagListContainer,_Component);function TagListContainer(){var _getPrototypeOf2;var _this;_classCallCheck(this,TagListContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TagListContainer)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={opacity:0.8};_this.closeModal=function(){var _this$props=_this.props,SearchActions=_this$props.SearchActions,PostActions=_this$props.PostActions;PostActions.setDisplay('none');SearchActions.setFriendContent('');};_this.handleScroll=function(e){var scrollTop=e.srcElement.scrollingElement.scrollTop;_this.setState({opacity:0.8-scrollTop/800});if(_this.state.opacity<0){_this.closeModal();}};_this.handleFriendInfo=function _callee(e){var PostActions,id,count,withData;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:PostActions=_this.props.PostActions;id=e.target.id;count=0;_context.next=5;return _regeneratorRuntime.awrap(PostActions.setFriendInfo({'username':id,'nickname':e.target.getAttribute('data-nickname'),'thumbnail':e.target.getAttribute('data-thumbnail')}));case 5:PostActions.setWithDisplay('display');withData=_this.props.withData;_context.next=9;return _regeneratorRuntime.awrap(withData.toJS().forEach(function(item){return count++;}));case 9:if(count>1){PostActions.setWithFriend(withData.toJS()[0].nickname+'님 외 '+String(count-1)+'명과 함께');}else{PostActions.setWithFriend(withData.toJS()[0].nickname+'님과 함께');}_this.closeModal();case 11:case\"end\":return _context.stop();}}});};_this.handleFriendCancel=function _callee2(e){var PostActions,id,count,withData;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:PostActions=_this.props.PostActions;id=e.target.id;count=0;_context2.next=5;return _regeneratorRuntime.awrap(PostActions.removeFriend(id));case 5:withData=_this.props.withData;console.log(withData.toJS());_context2.next=9;return _regeneratorRuntime.awrap(withData.toJS().forEach(function(item){return count++;}));case 9:if(count>1){PostActions.setWithFriend(withData.toJS()[0].nickname+'님 외 '+String(count-1)+'명과 함께');}else if(count>0){PostActions.setWithFriend(withData.toJS()[0].nickname+'님과 함께');}else{PostActions.setWithDisplay('block');_this.setState({withfriendDisplay:'none'});}case 10:case\"end\":return _context2.stop();}}});};_this.handleSearch=function(){var _this$props2=_this.props,SearchActions=_this$props2.SearchActions,friendContent=_this$props2.friendContent;SearchActions.searchInFriendlist(friendContent);};_this.handleSearchContent=function(e){var SearchActions=_this.props.SearchActions;var innerText=e.target.innerText;SearchActions.setFriendContent(innerText);};_this.enterSearch=function(){if(window.event.keyCode===13)_this.handleSearch();};return _this;}_createClass(TagListContainer,[{key:\"componentDidMount\",value:function componentDidMount(){window.addEventListener(\"scroll\",this.handleScroll);if(!storage.get('loggedInfo'))return;this.props.PostActions.setWrittenData(storage.get('loggedInfo').nickname+'님 무슨 일이 있으셨나요?');}},{key:\"render\",value:function render(){var _this$props3=this.props,friendList=_this$props3.friendList,friendContent=_this$props3.friendContent,display=_this$props3.display;var opacity=this.state.opacity;var handleFriendInfo=this.handleFriendInfo,closeModal=this.closeModal,handleFriendCancel=this.handleFriendCancel,handleSearch=this.handleSearch,handleSearchContent=this.handleSearchContent,enterSearch=this.enterSearch;return React.createElement(TagList,{opacity:opacity,friends:friendList,search:handleSearch,onclick:handleFriendInfo,close:closeModal,display:display,cancel:handleFriendCancel,handlecontent:handleSearchContent,content:friendContent,enter:enterSearch});}}]);return TagListContainer;}(Component);export default connect(function(state){return{friendContent:state.search.get('friendContent'),friendList:state.search.get('friendList'),display:state.post.get('display'),withdisplay:state.post.get('withDisplay'),withData:state.post.get('friendInfo')};},function(dispatch){return{PostActions:bindActionCreators(postActions,dispatch),FriendActions:bindActionCreators(friendActions,dispatch),SearchActions:bindActionCreators(searchActions,dispatch)};})(TagListContainer);","map":{"version":3,"sources":["C:/Users/user/fronttimeline/src/containers/Base/TagListContainer.js"],"names":["React","Component","connect","TagList","bindActionCreators","friendActions","postActions","searchActions","storage","TagListContainer","state","opacity","closeModal","props","SearchActions","PostActions","setDisplay","setFriendContent","handleScroll","e","scrollTop","srcElement","scrollingElement","setState","handleFriendInfo","id","target","count","setFriendInfo","getAttribute","setWithDisplay","withData","toJS","forEach","item","setWithFriend","nickname","String","handleFriendCancel","removeFriend","console","log","withfriendDisplay","handleSearch","friendContent","searchInFriendlist","handleSearchContent","innerText","enterSearch","window","event","keyCode","addEventListener","get","setWrittenData","friendList","display","search","post","withdisplay","dispatch","FriendActions"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {TagList} from '../../components/Post';\r\nimport {bindActionCreators} from 'redux';\r\nimport * as friendActions from '../../redux/modules/friend';\r\nimport * as postActions from '../../redux/modules/post';\r\nimport * as searchActions from '../../redux/modules/search';\r\nimport storage from '../../lib/storage';\r\n\r\nclass TagListContainer extends Component{\r\n    state  = {\r\n        opacity : 0.8\r\n    };\r\n   \r\n    closeModal = () => {\r\n        const {SearchActions,PostActions} = this.props;\r\n        PostActions.setDisplay('none');\r\n        SearchActions.setFriendContent('');\r\n        \r\n    }\r\n     \r\n    componentDidMount() {\r\n        window.addEventListener(\"scroll\", this.handleScroll);\r\n        if(!storage.get('loggedInfo')) return ;\r\n        this.props.PostActions.setWrittenData(storage.get('loggedInfo').nickname + '님 무슨 일이 있으셨나요?');\r\n      }\r\n      handleScroll = (e) => {\r\n        const scrollTop =e.srcElement.scrollingElement.scrollTop;\r\n        this.setState({\r\n            opacity : 0.8 - scrollTop / 800\r\n        });\r\n        if(this.state.opacity < 0){\r\n           this.closeModal();\r\n        }\r\n      }\r\n    \r\n    \r\n    handleFriendInfo = async(e) => {\r\n        const{PostActions} = this.props;\r\n        const {id} = e.target;\r\n        let count = 0;\r\n        await PostActions.setFriendInfo({'username':id,'nickname': e.target.getAttribute('data-nickname'), 'thumbnail' : e.target.getAttribute('data-thumbnail')});\r\n        PostActions.setWithDisplay('display');\r\n        const{withData} = this.props;\r\n        await withData.toJS().forEach(item => count++);\r\n       \r\n        if(count > 1){\r\n            PostActions.setWithFriend(withData.toJS()[0].nickname+'님 외 '+String(count-1)+'명과 함께');\r\n        }\r\n        else{\r\n            PostActions.setWithFriend( withData.toJS()[0].nickname+'님과 함께');\r\n        }\r\n        this.closeModal();\r\n    }\r\n    \r\n    handleFriendCancel = async(e) => {\r\n        const{PostActions} = this.props;\r\n        const {id} = e.target;\r\n        let count = 0;\r\n        await PostActions.removeFriend(id);\r\n        const{withData} = this.props;\r\n        console.log(withData.toJS());\r\n        await withData.toJS().forEach(item => count++);\r\n       \r\n        if(count > 1){\r\n            PostActions.setWithFriend(withData.toJS()[0].nickname+'님 외 '+String(count-1)+'명과 함께');\r\n        }\r\n        else if(count > 0){\r\n            PostActions.setWithFriend(withData.toJS()[0].nickname+'님과 함께');\r\n        }\r\n        else{\r\n            PostActions.setWithDisplay('block'); \r\n            this.setState({\r\n            withfriendDisplay : 'none'\r\n        });\r\n    }\r\n    }\r\n\r\n      handleSearch = () => {\r\n          const{SearchActions,friendContent} = this.props;\r\n          SearchActions.searchInFriendlist(friendContent);\r\n          \r\n      }\r\n      handleSearchContent = (e) => {\r\n        const {SearchActions} = this.props;\r\n        const {innerText} = e.target;\r\n        \r\n        SearchActions.setFriendContent(innerText);\r\n      }\r\n      \r\n      enterSearch = () => {\r\n          if(window.event.keyCode === 13)\r\n            this.handleSearch();\r\n      }\r\n\r\n    render(){\r\n        const {friendList,friendContent,display} = this.props;\r\n        const {opacity} = this.state;\r\n        const {handleFriendInfo,closeModal,handleFriendCancel,\r\n        handleSearch,handleSearchContent,enterSearch} = this;\r\n        return(\r\n            <TagList opacity = {opacity} friends = {friendList} search = {handleSearch} onclick = {handleFriendInfo} close={closeModal}\r\n             display = {display} cancel = {handleFriendCancel} handlecontent = {handleSearchContent} content = {friendContent} enter = {enterSearch}/>\r\n            \r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    (state) => ({\r\n        friendContent : state.search.get('friendContent'),\r\n        friendList : state.search.get('friendList'),\r\n        display : state.post.get('display'),\r\n        withdisplay : state.post.get('withDisplay'),\r\n        withData : state.post.get('friendInfo')\r\n    }),\r\n    (dispatch) => ({\r\n        PostActions: bindActionCreators(postActions, dispatch),\r\n        FriendActions: bindActionCreators(friendActions, dispatch),\r\n        SearchActions : bindActionCreators(searchActions,dispatch)\r\n\r\n    })\r\n)(TagListContainer);"]},"metadata":{},"sourceType":"module"}